(()=>{"use strict";var e,t={14893:(e,t,s)=>{s.d(t,{p:()=>a});var i=s(89526);function a(e){return i.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",className:e},i.createElement("path",{d:"M4.09 4.22l.06-.07a.5.5 0 01.63-.06l.07.06L10 9.29l5.15-5.14a.5.5 0 01.63-.06l.07.06c.18.17.2.44.06.63l-.06.07L10.71 10l5.14 5.15c.18.17.2.44.06.63l-.06.07a.5.5 0 01-.63.06l-.07-.06L10 10.71l-5.15 5.14a.5.5 0 01-.63.06l-.07-.06a.5.5 0 01-.06-.63l.06-.07L9.29 10 4.15 4.85a.5.5 0 01-.06-.63l.06-.07-.06.07z",fillRule:"nonzero"}))}},53085:(e,t,s)=>{var i=s(73961),a=s(89526),o=s(87958),n=s(47861),r=s(82090),h=s(17332),c=s(48863),l=s(51094),d=s(6098),p=s(46589),u=s(38066),m=s(14570);const g={toggle_toggleButton:{float:(0,c.zw)("right","left"),marginInlineStart:"5px"},toggle_statusMessage:{paddingInlineStart:"0px"}},y={button:{height:"28px",margin:"2px 0",width:"fit-content"}},b={settingsHamburgerMenu:{display:"block",marginInlineStart:"auto",marginBottom:"4px",backgroundColor:"transparent"},settingsHamburgerMenu_closeButton:{...(0,m.b)(d.fn,p.k8,p.k8),position:"absolute",top:"0",margin:"6px",[(0,c.Ih)("right","left",d.fn.direction)]:"0","& $settingsHamburgerMenu_closeButton_icon":{...(0,u.Zb)()}},settingsHamburgerMenu_closeButton_icon:{},settingsHamburgerMenu_flyout_buttonSection:{display:"flex",flexDirection:"column"},settingsHamburgerMenu_flyout_divider:{margin:"8px -16px"},settingsHamburgerMenu_flyout:{padding:"16px"},settingsHamburgerMenu_flyout_label:{margin:"0 0 0.5em",display:"block"},settingsHamburgerMenu_flyout_score:{marginTop:"8px",display:"flex",alignItems:"center"},settingsHamburgerMenu_flyout_scoreCrown:{height:"16px",width:"16px",color:"currentColor",fill:"currentColor",marginInlineEnd:"4px"},settingsHamburgerMenu_flyout_toggleRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"6px 0"},settingsHamburgerMenu_centered:{margin:"0 auto"},settingsHamburgerMenu_icon:{color:l.CH,fill:"currentColor"},settingsHamburgerMenu_creditsTable:{margin:"0 auto",color:l.CH},settingsHamburgerMenu_creditsTable_specialThanks:{marginTop:"8px",marginBottom:"4px"}};var f=s(71388),w=s(87841),S=s(92588),v=s(90305),k=s(2483),C=s(49838),O=s(99683),T=s(73252),E=s(12994),P=s(57880),I=s(18158),x=s(20917),M=s(98401),D=s(11754),A=s(37834),R=s(98844),L=s(45191);var N=s(14893),B=s(3117);let F;function H(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e.Buoy="BUOY",e.Classic="CLASSIC",e.Speed="SPEED"}(F||(F={}));class _{static recordNewGame(e){switch(e){case F.Buoy:_.numBuoyGames+=1;break;case F.Classic:_.numClassicGames+=1;break;case F.Speed:_.numSpeedGames+=1}}static getAllStats(){return B.cr.sendWithPromise("get-stats")}static resetAllStats(){B.e9.send("reset-stats")}static saveClassicHighScore(e){B.e9.send("set-high-score",[F.Classic,Math.floor(e)])}static saveBuoyHighScore(e){B.e9.send("set-high-score",[F.Buoy,Math.floor(e)])}static saveSpeedHighScore(e){let t=e;e>0&&(t*=1e3),B.e9.send("set-high-score",[F.Speed,Math.floor(t)])}static saveGameMode(e){B.e9.send("save-game-mode",[e])}static saveHighVisibilityMode(e){B.e9.send("save-high-visibility-mode",[e])}static saveReducedSpeedMode(e){B.e9.send("save-reduced-speed-mode",[e])}static saveDefaultSurfer(e){B.e9.send("save-selected-surfer",[e])}static recordUnload(){const e=Math.floor(Date.now()-_.sessionStartTime)||0,t={buoyGamesPlayed:_.numBuoyGames,classicGamesPlayed:_.numClassicGames,speedGamesPlayed:_.numSpeedGames};B.e9.send("record-unload",[t,e]),_.numBuoyGames=0,_.numClassicGames=0,_.numSpeedGames=0,_.sessionStartTime=Date.now()}static recordGameEnd(e){const t={...e,score:Math.floor(e.score)};B.e9.send("record-game-end",[t])}}H(_,"numSpeedGames",0),H(_,"numClassicGames",0),H(_,"numBuoyGames",0),H(_,"sessionStartTime",Date.now());class W{constructor(){if(W.system)return W.system;W.system=this}defineClusters(){this.poses={dock:{sw:[1],s:[2],se:[3],solo:[4],n:[5],w:[6],e:[7],arch:[8],broken:[9],ropes:[10]},solids:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],posts:[1,2],logs:[3,4,5],coral:[6,7],rocks:[8,9,10,11,12,13,14],smallrocks:[8,9,10],largerocks:[11,12,13,14],woodenboat:[15],boats:[15,16],flagbuoy:[17,18,19],oceanbuoy:[20,21,22],markerbuoy:[23],scuba:[25],sign:[26],friends:[27,28,29,30],float:[1,2,3,4,5],wakebuoy:[1],floater:[2],ball:[3],ring:[4],cone:[5],guidebuoy:[6],ramp:[1],tentacle:[2],powerup:[3],heart:[4],coin:[5],dog:[7],wake64:[1,2,3,4,5,6],seaweed64:[7,8,9],wake192:[1,2],seaweed192:[3],ambient:[1,2,3,4],whirlpool:[1],sandbar:[1,2,3,4]},this.characterScenes={friendBeach1:{Sandbar256:[[-3,5],this.poses.sandbar],Wake64:[[-8,4],[-2,9],[2,8],[7,6],this.poses.wake64],Wake192:[[0,3],[-5,8],this.poses.wake192],Heart64:[[4,5],this.poses.heart],Objects64:[[-1,7],this.poses.friends]},friendBeach2:{Sandbar256:[[4,5],this.poses.sandbar],Wake64:[[-7,4],[-6,8],[8,5],this.poses.wake64],Wake192:[[1,3],[5,8],[0,9],this.poses.wake192],Heart64:[[-4,4],this.poses.heart],Objects64:[[-1,6],this.poses.friends]}},this.classicStart={classicStart:{Wake192:[[-14,2],[-8,6],[-18,8],[-9,10],[6,5],[13,1],[10,10],[17,11],this.poses.wake192],Seaweed64:[[-20,2],[-19,5],[-16,5],[-21,7],[-17,11],[-14,9],[-6,9],[7,9],[11,5],[14,9],[16,6],[20,4],[20,8],this.poses.seaweed64],Powerup64:[[-6,1],[-2,1],[2,1],[6,1],this.poses.powerup],Objects64:[[-19,8],[-15,6],[-11,6],[-11,12],[10,6],[15,7],[16,10],[20,5],[-20,6,this.poses.logs],[-16,10,this.poses.logs],[11,11,this.poses.logs],[21,6,this.poses.logs],[-10,11,this.poses.woodenboat],[18,9,this.poses.scuba],[-5,6,this.poses.flagbuoy],[-4,10,this.poses.flagbuoy],[-6,12,this.poses.flagbuoy],[5,6,this.poses.flagbuoy],[4,10,this.poses.flagbuoy],[6,12,this.poses.flagbuoy],this.poses.rocks],Docks64:[[-18,2,5],[-18,4,1],[-16,4,10],[-14,4,2],[-12,4,2],[-10,4,3],[-13,6,5],[-13,8,1],[-11,8,2],[-9,8,10],[-7,8,2],[-5,8,3],[5,8,1],[7,8,10],[9,8,2],[11,8,9],[13,8,3],[13,6,5],[10,4,1],[12,4,2],[14,4,9],[16,4,2],[18,4,3],[18,2,5],this.poses.dock.solo]}},this.island={island:{Wake192:[[-15,1],[-21,4],[-23,14],[-16,22],[17,2],[23,5],[21,13],[16,20],this.poses.wake192],Seaweed64:[[-21,10],[-19,16],[-12,18],[4,19],[10,18],[15,17],[19,15],[21,9],this.poses.seaweed64],Objects64:[[-8,3],[-19,6],[12,3],[19,6],[16,15],[8,16],[3,17],[-10,16],[-14,17],[-5,17,this.poses.coral],[13,16,this.poses.coral],[-5,0,this.poses.flagbuoy],[-4,3,this.poses.flagbuoy],[-3,4,this.poses.flagbuoy],[3,4,this.poses.flagbuoy],[5,0,this.poses.flagbuoy],[4,3,this.poses.flagbuoy],[-13,19,this.poses.logs],this.poses.rocks],Docks64:[[-3,16,5],[-3,18,5],[-3,20,2],[-1,20,3],[-5,20,10],[-7,20,2],[-9,20,1],[0,22],[-17,0,1],[-15,0,8],[-13,0,7],[-13,2,1],[-11,2,2],[-9,2,10],[-7,2,2],[-7,0,5],[-5,2,3],[5,2,1],[7,2,10],[9,2,3],[9,0,6],[11,0,9],[13,0,2],[15,0,10],[17,0,7],[17,2,4],this.poses.dock.solo]}},this.normal={large2:{Sandbar256:[[-5,9,1],[5,2],this.poses.sandbar],Wake192:[[-1,4],this.poses.wake192],Seaweed64:[[-7,4],[4,8],this.poses.seaweed64],Objects64:[[-6,1],[-5,3],[-4,2],[-1,1],[6,10],[7,5],[-3,1,this.poses.posts],[2,8,this.poses.posts],this.poses.coral],Docks64:[[-4,8,6],[-2,8,10],[0,8,3],[0,6,6],[2,6,10],[4,6,3],[4,4,5],[3,10],this.poses.dock.solo]},large3:{Sandbar256:[[-3,4],this.poses.sandbar],Wake64:[[-6,1],[2,1],[-7,9],this.poses.wake64],Wake192:[[-6,3],this.poses.wake192],Seaweed64:[[-5,8],[0,6],[5,9],this.poses.seaweed64],Seaweed192:[[-2,10],[3,11],this.poses.seaweed192],Objects64:[[-2,2,this.poses.coral],[8,2,this.poses.oceanbuoy],[7,8,this.poses.logs],[-5,6],[1,3],this.poses.rocks],Docks64:[[-2,6,5],[-2,8,1],[0,8,8],[2,10,4],[2,8,7],[2,6,6],[4,6,9],[6,6,3],this.poses.dock.solo]},large8:{Seaweed64:[[-5,7],[1,4],[3,11],this.poses.seaweed64],Seaweed192:[[2,2],[0,9],this.poses.seaweed192],Objects64:[[-5,4],[-3,3],[-3,5],[-2,4],[2,6],[3,7],[4,6],[5,4],[5,8],[-8,7,this.poses.oceanbuoy],[-5,1,this.poses.oceanbuoy],[8,2,this.poses.oceanbuoy],[7,11,this.poses.oceanbuoy],this.poses.rocks]},large9:{Sandbar256:[[-2,5],this.poses.sandbar],Wake64:[[-8,4],[-3,10],[4,10],[3,7],[7,8],this.poses.wake64],Wake192:[[-6,9],this.poses.wake192],Seaweed64:[[-7,5],[2,4],[7,5],this.poses.seaweed64],Seaweed192:[[0,9],this.poses.seaweed192],Objects64:[[-6,2],[4,3],[6,6],[-4,7,this.poses.logs],[5,8,this.poses.scuba],this.poses.coral]},large12:{Sandbar256:[[-1,3,4],[3,4,3],this.poses.sandbar],Wake64:[[-6,3],[7,7],[-3,9],this.poses.wake64],Seaweed64:[[-6,8],this.poses.seaweed64],Seaweed192:[[1,9],this.poses.seaweed192],Objects64:[[-5,4],[2,2],[-2,5,this.poses.posts],[5,5,this.poses.posts],this.poses.coral],Docks64:[[2,5,5],[2,7,2],[4,7,3],[0,7,8],[-2,7,2],[-4,7,1],this.poses.dock.solo]},medium4:{Wake64:[[-1,1],this.poses.wake64],Wake192:[[2,3],this.poses.wake192],Seaweed64:[[-5,5],this.poses.seaweed64],Objects64:[[-5,3],[2,1],[3,5],[-3,6,this.poses.posts],[5,6,this.poses.posts],[-3,2,this.poses.scuba],this.poses.rocks],Docks64:[[-1,5,5],[-1,7,1],[1,7,8],[3,7,3],this.poses.dock.solo]},medium6:{Wake64:[[-3,4],[-1,5],[4,5],this.poses.wake64],Objects64:[[-3,1],[-4,2],[-5,4],[-3,6],[-5,7],[-2,7],[1,4],[5,1],[4,7],[-1,3,this.poses.scuba],this.poses.rocks]},medium7:{Seaweed64:[[-2,6],this.poses.seaweed64],Objects32:[[5.5,.5],[4.5,3.5],[5.5,5.5],[3.5,7.5],this.poses.floater],Objects64:[[-4,5],this.poses.scuba],Docks64:[[-5,2,1],[-3,2,9],[-1,2,2],[1,2,10],[3,2,7],[3,4,5],[3,6,3],[1,6,1],this.poses.dock.solo]},medium10:{Wake64:[[-4,1],[-5,3],[-4,6],[2,1],[5,2],[4,5],[3,7],this.poses.wake64],Objects64:[[-2,4],[0,5],[1,3],[2,4],[-2,2,this.poses.flagbuoy],[3,2,this.poses.oceanbuoy],[-2,6,this.poses.scuba],this.poses.rocks]},small1:{Sandbar256:[[0,4],this.poses.sandbar],Wake192:[[-2,3],this.poses.wake192],Objects32:[[.5,1.5],this.poses.float],Objects64:[[4,2],this.poses.flagbuoy]},small2:{Wake192:[[-2,5],this.poses.wake192],Seaweed64:[[2,3],this.poses.seaweed64],Seaweed192:[[-1,1],this.poses.seaweed192],Objects32:[[-4.5,2.5],this.poses.wakebuoy],Objects64:[[-2,2],[0,3],[4,1,this.poses.oceanbuoy],this.poses.rocks]},small3:{Seaweed64:[[-4,2],[1,1],this.poses.seaweed64],Seaweed192:[[1,5],this.poses.seaweed192],Objects64:[[-1,3],[4,2],this.poses.logs],Docks64:[[-3,4],this.poses.dock.solo]},small4:{Wake192:[[2,5],this.poses.wake192],Seaweed64:[[-1,1],this.poses.seaweed64],Objects64:[[-4,1],[-3,2],[-1,5],[0,2],[-4,4,this.poses.scuba],[2,2,this.poses.scuba],[4,1,this.poses.rocks],this.poses.coral]},small6:{Sandbar256:[[1,1],this.poses.sandbar],Seaweed64:[[-4,3],[-1,5],[1,4],[3,5],this.poses.seaweed64],Objects32:[[-3.5,1.5],this.poses.float],Objects64:[[-2,3],[-4,5,this.poses.flagbuoy],this.poses.logs]},small7:{Wake64:[[-1,1],[-2,5],[1,4],this.poses.wake64],Objects64:[[-4,1],[-2,2],[-3,3],[1,5],[2,2],[3,1],[4,4],this.poses.coral]},small8:{Wake64:[[-2,1],[-4,3],[-1,4],[1,5],[3,3],this.poses.wake64],Objects64:[[-4,1],[-3,4],[0,2],[3,1],[4,4],this.poses.flagbuoy]},small9:{Seaweed64:[[-4,4],[3,2],this.poses.seaweed64],Objects64:[[-1,1],[4,4,this.poses.flagbuoy],[-2,3,this.poses.posts],this.poses.rocks],Docks64:[[-1,5,1],[1,5,3],[1,3,5],this.poses.dock.solo]},small10:{Wake64:[[4,1],this.poses.wake64],Objects64:[[-3,1],[3,3],this.poses.rocks],Docks64:[[0,1,5],[0,3,3],[-2,3,10],[-4,3,6],[-4,5,1],[-2,5,2],[0,5,9],[2,5,3],this.poses.dock.solo]},small11:{Seaweed64:[[-3,2],[3,4],this.poses.seaweed64],Objects64:[[-2,4],[-1,2],[0,3],[1,4],[1,1],[2,2],this.poses.rocks]},small12:{Seaweed64:[[0,4],this.poses.seaweed64],Objects64:[[-3,1],[1,1],[-3,4],[3,4],this.poses.rocks],Docks64:[[-2,3,1],[0,3,10],[2,3,3],this.poses.dock.solo]},small13:{Sandbar256:[[0,2],this.poses.sandbar],Wake64:[[-4,2],[3,1],this.poses.wake64],Wake192:[[0,5],this.poses.wake192],Objects64:[[0,1],[-3,3],[3,4],[0,3,this.poses.rocks],this.poses.coral]},small14:{Seaweed64:[[-1,1],[-4,4],[1,5],this.poses.seaweed64],Objects32:[[-4.5,1.5],[3.5,.5],this.poses.wakebuoy],Objects64:[[1,1],[0,4],[3,4],this.poses.rocks],Docks64:[[-2,5,4],[-2,3,6],[0,3,8],[2,3,3],this.poses.dock.solo]},small16:{Seaweed64:[[2,1],[-4,4],[3,3],this.poses.seaweed64],Seaweed192:[[-2,2],[0,5],this.poses.seaweed192],Objects64:[[-2,3,this.poses.logs],[2,2],this.poses.rocks]},small17:{Seaweed64:[[-4,5],[0,3],[4,2],this.poses.seaweed64],Objects64:[[-3,3],[-1,2],[-2,5],[1,4],[-2,4,this.poses.posts],[3,1,this.poses.oceanbuoy],this.poses.rocks]},medium19:{Sandbar256:[[-2,2],this.poses.sandbar],Seaweed64:[[4,3],this.poses.seaweed64],Objects64:[[-5,7],[-3,5],[3,1,this.poses.flagbuoy],this.poses.coral],Docks64:[[-1,4,5],[-1,6,1],[1,6,2],[3,6,3],this.poses.dock.solo]},tiny1:{Seaweed192:[[0,3],this.poses.seaweed192],Objects64:[[-1,1,this.poses.scuba],[2,1],this.poses.rocks]},tiny2:{Seaweed64:[[-2,2],[2,1],this.poses.seaweed64],Objects64:[[0,2,this.poses.coral],[2,3],this.poses.rocks]},tiny3:{Seaweed192:[[0,1],this.poses.seaweed192],Objects32:[[-2,2],this.poses.float],Objects64:[[0,2],[2,3],this.poses.rocks]},tiny4:{Seaweed64:[[0,3],[2,2],this.poses.seaweed64],Objects64:[[-2,2],[2,0],this.poses.rocks]},tiny5:{Wake64:[[-2,2],this.poses.wake64],Seaweed64:[[1,1],[2,3],this.poses.seaweed64],Objects32:[[-1,3],this.poses.float]},tiny6:{Seaweed64:[[0,1],this.poses.seaweed64],Seaweed192:[[0,3],this.poses.seaweed192],Docks64:[[1,2],this.poses.dock.solo]},tiny7:{Objects64:[[-2,1],[0,1],[2,3],[-1,2,this.poses.coral],this.poses.rocks]},tiny8:{Objects64:[[-2,1],[1,2],[2,3],[-1,3,this.poses.posts],[2,1,this.poses.posts],this.poses.coral]},tiny9:{Seaweed64:[[-1,3],this.poses.seaweed64],Objects64:[[0,1],[2,1],[-2,1,this.poses.coral],[1,2,this.poses.coral],this.poses.solids]},tiny10:{Objects64:[[-2,1,this.poses.oceanbuoy],[0,2],[2,1],[1,3],this.poses.rocks]},tiny11:{Objects32:[[0,1],this.poses.float],Objects64:[[-2,1],[2,2,this.poses.oceanbuoy],this.poses.logs],Docks64:[[-2,3,1],[0,3,3],this.poses.dock.solo]},tiny12:{Objects64:[[-2,1],[-2,3],[2,1],[1,3],[0,2,this.poses.sign],this.poses.rocks]},tiny13:{Objects64:[[-2,1,this.poses.scuba],[0,2],[1,1],[-2,3],[2,3,this.poses.logs],this.poses.rocks]},tiny14:{Objects64:[[-2,1],[0,2],[2,2],this.poses.rocks]},tiny15:{Objects64:[[-1,1],this.poses.posts],Docks64:[[-2,3,1],[0,3,9],[2,3,3],[2,1,5],this.poses.dock.solo]},tiny16:{Wake64:[[-2,1],[-1,3],[2,1],this.poses.wake64],Objects64:[[0,1],this.poses.scuba]},tiny17:{Objects64:[[-2,1],[2,1],[1,3],[0,2,this.poses.posts],this.poses.coral]},tiny18:{Wake64:[[-1,1],this.poses.wake64],Objects64:[[-2,3],[2,1],[0,2,this.poses.posts],this.poses.rocks]},small19:{Objects64:[[-4,2],[-2,1],[0,3],[2,4],[4,3],[-3,5,this.poses.coral],this.poses.rocks]},large18:{Wake64:[[-2,4],[-5,7],[-1,5],[1,8],this.poses.wake64],Seaweed64:[[-6,2],[-2,2],[-4,4],[-7,6],[-3,11],this.poses.seaweed64],Seaweed192:[[5,4],this.poses.seaweed192],Objects32:[[6,6],this.poses.ring],Objects64:[[-8,3],[-5,5],[-3,2],[-2,4],[-6,5],[-4,6],[-8,6],[-2,10],[3,3],[5,2],[4,6],[8,4],[-5,1,this.poses.logs],[5,5,this.poses.oceanbuoy],this.poses.rocks]}},this.dog={dog1:{Sandbar256:[[7,4],this.poses.sandbar],Seaweed64:[[-7,2],[-4,1],[5,2],[7,3],[5,7],this.poses.seaweed64],Objects32:[[1.5,5.5],this.poses.ball],Objects64:[[-4,7],[3,6],this.poses.rocks],Docks64:[[-10,6,1],[-8,6,10],[-6,6,3],[-6,4,6],[-4,4,3],this.poses.dock.solo],Dog64:[[-1,6],this.poses.dog]},dog2:{Wake64:[[-10,5],[-8,6],[-10,8],[10,5],[8,7],[10,8],this.poses.wake64],Seaweed64:[[-8,8],[-6,9],[3,7],[6,8],this.poses.seaweed64],Objects32:[[-.5,7.5],this.poses.ball],Objects64:[[0,.5],[-5,3],[-6,4],[-6,6],[2,5],[3,3],[5,2],[6,4],[6,6],this.poses.rocks],Dog64:[[-2,6],this.poses.dog]}},this.passive={small15:{Wake64:[[-3,2],[2,5],this.poses.wake64],Whirlpool128:[[0,3],this.poses.whirlpool],Objects32:[[-3.5,4.5],[-1.5,1.5],[.5,.5],[-.5,5.5],[2.5,1.5],[3.5,3.5],this.poses.float]},medium15:{Seaweed64:[[-3,2],[-4,4],this.poses.seaweed64],Seaweed192:[[1,3],[-3,6],[3,5],this.poses.seaweed192],Objects32:[[-5,1],[5,2],this.poses.wakebuoy]},medium16:{Wake64:[[-4,3],[-5,5],[2,6],[5,4],this.poses.wake64],Wake192:[[2,2],[-2,7],this.poses.wake192],Seaweed64:[[-3,5],[4,6],this.poses.seaweed64],Seaweed192:[[1,4],this.poses.seaweed192]},medium17:{Wake64:[[-3,6],this.poses.wake64],Wake192:[[0,4],[3,6],this.poses.wake192],Seaweed64:[[-5,4],[3,2],[4,4],this.poses.seaweed64],Seaweed192:[[-2,2],this.poses.seaweed192],Objects32:[[-4,1],[-1,5],[5,2],this.poses.float]},medium18:{Wake64:[[-4,5],[-1,3],[2,7],this.poses.wake64],Wake192:[[3,5],[2,1],this.poses.wake192],Whirlpool128:[[-4,2],[-1,6],[2,3],this.poses.whirlpool]}},this.powerup={large5:{Sandbar256:[[-3,2],[5,8],this.poses.sandbar],Wake192:[[3,5],this.poses.wake192],Seaweed64:[[-7,2],[-6,10],[-5,4],[1,1],[3,11],[7,10],this.poses.seaweed64],Whirlpool128:[[-1,6],this.poses.whirlpool],Powerup64:[[-2,9],this.poses.powerup],Objects32:[[-7.5,4.5],[7.5,6.5],this.poses.float],Objects64:[[-8,9],[-7,7],[-5,8],this.poses.solids]},large6:{Seaweed64:[[-8,3],[-3,11],[7,2],[7,10],[8,6],this.poses.seaweed64],Seaweed192:[[-3,1],this.poses.seaweed192],Powerup64:[[-5,9],this.poses.powerup],Objects32:[[-8,7.5],[-7.5,10.5],this.poses.wakebuoy],Objects64:[[-7,7],this.poses.scuba],Docks64:[[-6,3,1],[-4,3,10],[-2,3,3],[-2,9,1],[0,9,7],[0,11,1],[2,11,3],[4,4,1],[6,4,7],[6,6,5],[6,8,4],this.poses.dock.solo]},large7:{Wake64:[[-6,1],[8,4],[-1,11],this.poses.wake64],Wake192:[[-5,3],this.poses.wake192],Seaweed64:[[-7,5],[-7,11],[-5,7],[4,1],[6,2],[8,1],[6,5],[7,10],this.poses.seaweed64],Seaweed192:[[-5,9],this.poses.seaweed192],Powerup64:[[2,7],this.poses.powerup],Objects64:[[-8,1],[-5,4],[-2,7],[-4,11],[2,1],[4,4],[5,7],[4,11],this.poses.flagbuoy]},large13:{Wake64:[[-8,5],[-6,6],[-8,8],[8,5],[6,7],[8,8],this.poses.wake64],Seaweed64:[[-6,9],[-4,10],[5,11],[6,4],this.poses.seaweed64],Seaweed192:[[4,9],this.poses.seaweed192],Powerup64:[[-2,5],[2,5],this.poses.powerup],Objects32:[[-4.5,1.5],[2.5,.5],[6.5,2.5],this.poses.wakebuoy],Objects64:[[-2,2],[-3,3],[-4,4],[-4,6],[2,2],[3,3],[4,4],[4,6],[-5,3,this.poses.logs],[-3,8,this.poses.logs],[3,7,this.poses.logs],this.poses.rocks]},large14:{Seaweed64:[[-7,3],[-3,4],[-3,8],[-4,11],[-1,2],[5,4],[7,8],this.poses.seaweed64],Powerup64:[[-1,6],this.poses.powerup],Objects32:[[.5,1.5],[3.5,3.5],[7.5,2.5],[4.5,8.5],this.poses.floater],Objects64:[[-6,4],[2,5],[0,11],[-8,4,this.poses.coral],[-3,2,this.poses.coral],this.poses.posts],Docks64:[[-5,1,6],[-3,1,9],[-1,1,3],[-5,3,4],[-6,6,6],[-4,6,3],[-6,8,5],[-6,10,2],[-8,10,1],[-4,10,10],[-2,10,3],[4,6,1],[6,6,10],[8,6,3],this.poses.dock.solo]},medium2:{Seaweed64:[[-4,6],[0,2],this.poses.seaweed64],Seaweed192:[[1,4],this.poses.seaweed192],Powerup64:[[2,7],this.poses.powerup],Objects64:[[2,0],[5,1],[3,2],[5,4],[-3,3],[-5,4],[-2,6],[-4,7],this.poses.rocks]},medium3:{Seaweed64:[[-4,6],this.poses.seaweed64],Seaweed192:[[-1,4],this.poses.seaweed192],Powerup64:[[-1,7],this.poses.powerup],Objects32:[[3.5,6.5],this.poses.floater],Objects64:[[-3,2],[-5,3],[0,1],[2,7],[5,2,this.poses.flagbuoy],this.poses.rocks]},medium9:{Seaweed64:[[2,3],[-2,7],this.poses.seaweed64],Powerup64:[[0,5],this.poses.powerup],Objects64:[[-4,2],[3,6],this.poses.rocks],Docks64:[[-5,4,5],[-5,6,1],[-3,6,3],[1,1,1],[3,1,10],[5,1,3],[4,5],this.poses.dock.solo]},medium11:{Whirlpool128:[[-3,2],[3,3],this.poses.whirlpool],Powerup64:[[0,5],this.poses.powerup],Objects64:[[-5,6],[-4,7],[-2,6],[2,6],[4,7],[5,5],this.poses.rocks]},small18:{Seaweed64:[[-2,3],[4,5],this.poses.seaweed64],Powerup64:[[1,4],this.poses.powerup],Objects32:[[-2.5,.5],this.poses.wakebuoy],Docks64:[[-4,3,5],[-4,5,1],[-2,5,3],[2,1,1],[4,1,7],[4,3,4],this.poses.dock.solo]},large17:{Seaweed64:[[-8,1],[-7,6],[-6,11],[5,7],[9,3],this.poses.seaweed64],Powerup64:[[1,7],this.poses.powerup],Objects32:[[-2,1],[3,0],[-1,9],[3,8],this.poses.wakebuoy],Objects64:[[-6,2],[-3,4],[7,6],[-9,6,this.poses.posts],this.poses.rocks],Docks64:[[-7,4,1],[-5,4,7],[-5,6,1],[-3,6,2],[-1,6,3],[3,6,4],[3,4,6],[5,4,2],[7,4,3],[7,2,5],[-7,9],this.poses.dock.solo]}},this.ramp={large1:{Objects32:[[6.5,.5],[-8.5,1.5],this.poses.wakebuoy],Ramp64:[[5,4],[-1,8],[-6,6],this.poses.ramp],Seaweed64:[[-8,3],[-8,10],[8,2],[6,8],this.poses.seaweed64],Objects64:[[-8,6],[-5,9],[1,6],[7,4],[-1,2,this.poses.posts],[3,11,this.poses.posts],this.poses.rocks],Docks64:[[-7,8,1],[-5,8,9],[-3,8,7],[-3,10,1],[-1,10,8],[1,10,3],[1,8,6],[3,8,3],[3,6,6],[5,6,10],[7,6,3],this.poses.dock.solo]},large10:{Sandbar256:[[-4,2],[5,4],this.poses.sandbar],Wake64:[[-8,5],[-2,7],[-3,11],[3,9],[8,8],this.poses.wake64],Wake192:[[-5,10],[4,11],[4,2],this.poses.wake192],Seaweed64:[[-5,7],[6,9],this.poses.seaweed64],Ramp64:[[0,9],this.poses.ramp],Objects32:[[-1.5,9.5],[1.5,9.5],this.poses.floater],Objects64:[[-3,5],[4,7],this.poses.coral]},large11:{Sandbar256:[[-4,2,1],[5,10,2],this.poses.sandbar],Wake64:[[-2,11],[7,5],[1,9],this.poses.wake64],Wake192:[[0,1],[-5,9],this.poses.wake192],Seaweed64:[[-8,7],[-4,11],[-1,10],this.poses.seaweed64],Ramp64:[[2,6],this.poses.ramp],Objects64:[[-5,4],[0,6],[3,9],[5,6,this.poses.rocks],this.poses.coral],Docks64:[[-2,4,5],[-2,6,3],[-4,6,6],[-4,8,1],[-2,8,2],[0,8,9],[2,8,2],[4,8,10],[6,8,7],[6,10,4],this.poses.dock.solo]},large16:{Wake64:[[-6,2],[-7,4],[-6,10],[1,11],[6,4],[7,1],this.poses.wake64],Seaweed64:[[-5,5],[-6,7],[-4,9],[-2,8],[4,6],[6,7],this.poses.seaweed64],Seaweed192:[[4,9],this.poses.seaweed192],Ramp64:[[0,8],this.poses.ramp],Objects64:[[-3,4],[-2,6],[3,4],[2,6],[-4,2,this.poses.oceanbuoy],[4,2,this.poses.oceanbuoy],[-5,6,this.poses.rocks],[-4,7,this.poses.rocks],[3,7,this.poses.logs],this.poses.flagbuoy]},medium8:{Ramp64:[[-4,3],[4,2],this.poses.ramp],Objects64:[[-5,5],[-2,7],[-1,3],[1,5],[4,6],[5,4],this.poses.rocks]},medium12:{Sandbar256:[[-2,5],this.poses.sandbar],Wake64:[[-4,1],[4,4],this.poses.wake64],Seaweed64:[[2,1],[5,2],[2,5],this.poses.seaweed64],Ramp64:[[-1,3],this.poses.ramp],Objects64:[[3,2],this.poses.flagbuoy]},medium13:{Seaweed64:[[-5,2],[-1,7],[4,7],this.poses.seaweed64],Ramp64:[[-3,6],[1,6],this.poses.ramp],Objects32:[[-.5,.5],this.poses.wakebuoy],Objects64:[[4,2],[-1,5,this.poses.posts],this.poses.rocks],Docks64:[[-5,4,5],[-5,6,4],[3,6,4],[3,4,6],[5,4,3],this.poses.dock.solo]},medium14:{Seaweed64:[[-2,2],[-5,5],[5,2],this.poses.seaweed64],Ramp64:[[-1,7],this.poses.ramp],Objects64:[[-2,0],[-4,1],[-5,3],[5,5],[4,7],[4,3,this.poses.logs],this.poses.rocks],Docks64:[[3,5],this.poses.dock.solo]}},this.tentacle={large4:{Wake64:[[-8,7],[-2,9],[0,4],[3,6],[3,10],[7,11],this.poses.wake64],Wake192:[[-4,6],[6,8],[-5,11],this.poses.wake192],Whirlpool128:[[-3,4],[3,3],[0,7],this.poses.whirlpool],Tentacle64:[[-6,9],[5,10],this.poses.tentacle],Objects64:[[-1,0],[1,0],[-1,1,this.poses.sign],this.poses.rocks]},large15:{Wake64:[[-6,4],[-3,3],[3,4],this.poses.wake64],Seaweed64:[[-7,7],[-2,7],[-6,10],[3,8],[7,7],this.poses.seaweed64],Seaweed192:[[-1,9],[3,11],this.poses.seaweed192],Tentacle64:[[-5,8],this.poses.tentacle],Objects64:[[-1,4,this.poses.sign],[7,2,this.poses.flagbuoy],[7,11,this.poses.flagbuoy],[-8,5],[-8,7],[-7,8],[8,8],this.poses.rocks],Docks64:[[1,5,5],[1,7,1],[3,7,10],[5,7,7],[5,9,4],[5,5,6],[7,5,3],this.poses.dock.solo]},medium1:{Wake64:[[-2,2],[2,1],this.poses.wake64],Tentacle64:[[2,6],this.poses.tentacle],Objects32:[[-1.5,4.5],this.poses.wakebuoy],Objects64:[[-5,4],[-4,5],[-3,6],[-5,7],[5,3],[4,2,this.poses.sign],this.poses.rocks]},medium5:{Seaweed64:[[-4,2],[-5,5],[2,1],this.poses.seaweed64],Seaweed192:[[-2,7],this.poses.seaweed192],Tentacle64:[[3,3],this.poses.tentacle],Objects64:[[5,4],[4,1],[5,2],[-5,3],[-3,4,this.poses.sign],this.poses.rocks]},small5:{Wake64:[[-1,2],this.poses.wake64],Seaweed64:[[-2,3],[3,2],[4,4],this.poses.seaweed64],Tentacle64:[[2,3],this.poses.tentacle],Objects32:[[.5,4.5],this.poses.ring],Objects64:[[-3,2],this.poses.sign]}},this.cove={coveLarge:{Wake64:[[-14,5],[-17,10],[-13,13],[-4,9],[-5,12],[-1,15],[4,8],[7,11],[16,23],this.poses.wake64],Wake192:[[-12,2],[-18,7],[3,1],[8,2],[-16,21],[-8,19],[-7,24],[18,8],[20,11],[22,21],[1,21],this.poses.wake192],Seaweed64:[[-8,2],[-6,4],[-4,5],[-8,6],[-11,6],[-14,9],[-12,10],[-15,12],[-16,14],[-13,15],[-18,18],[2,5],[0,26],[5,25],[5,21],[8,19],[10,20],[10,23],[13,16],[17,13],[17,16],[17,19],[19,14],[20,12],this.poses.seaweed64],Seaweed192:[[0,3],[4,23],this.poses.seaweed192],Whirlpool128:[[-3,12],[1,10],[3,14],this.poses.whirlpool],SwimTrigger:[[0,12],[1]],Tentacle64:[[-1,6],[-5,7],[-8,9],[-9,12],[-8,16],[4,18],[8,16],[11,12],this.poses.tentacle],Objects32:[[-12.5,18.5],this.poses.ring],Objects64:[[-11,3,this.poses.logs],[-12,7,this.poses.logs],[-16,8,this.poses.logs],[14,18,this.poses.logs],[2,25,this.poses.logs],[19,15,this.poses.logs],[-14,17,this.poses.woodenboat],[7,3,this.poses.sign],[17,8,this.poses.sign],[1,4],[-2,2],[-4,3],[-5,2],[-3,4],[-7,3],[-9,4],[-10,2],[-7,5],[-10,5],[-12,4],[-10,7],[-13,6],[-13,8],[-13,11],[-15,7],[-15,10],[-19,12],[-20,13],[-18,14],[-10,15],[-11,16],[16,12],[12,14],[14,15],[13,16],[15,17],[18,18],[13,19],[11,20],[8,20],[6,21],[10,21],[8,22],[12,22],[14,20],[7,26],this.poses.rocks],Docks64:[[-16,17],this.poses.dock.solo]}},this.buoyFirst={buoyFirst:{Buoy64:[[-4,3.5],[4,3.5],this.poses.markerbuoy],BuoyGuide32:[[-8.5,-1.5],[-7.5,-.5],[-6.5,.5],[-5.5,1.5],[-4.5,2.5],[8.5,-1.5],[7.5,-.5],[6.5,.5],[5.5,1.5],[4.5,2.5],[-4,5],[-4.5,6],[-5.25,7],[4,5],[3.5,6],[2.75,7],this.poses.guidebuoy],BuoyTrigger:[[0,4.5],1]}},this.buoyLeft={buoyLeft:{Buoy64:[[-4.25,3.5],[3.75,3.5],this.poses.markerbuoy],BuoyGuide32:[[-2,.5],[-3.175,1.5],[-4,2.5],[-4,5],[-3.175,6],[-2,7],[4,2.5],[5,1.75],[5,5.75],[4,5],this.poses.guidebuoy],BuoyTrigger:[[-.25,4.5],1]}},this.buoyRight={buoyRight:{Buoy64:[[-3.75,3.5],[4.25,3.5],this.poses.markerbuoy],BuoyGuide32:[[2,.5],[3.175,1.5],[4,2.5],[4,5],[3.175,6],[2,7],[-4,2.5],[-5,1.75],[-5,5.75],[-4,5],this.poses.guidebuoy],BuoyTrigger:[[.25,4.5],1]}},this.buoyRandom={buoyRandom1:{Objects64:[[-8,5],[-5,11],[-3,1],[-2,10],[0,3],[3,2],[4,11],[8,6],this.poses.solids]},buoyRandom2:{Objects64:[[-8,9],[-1,1],[-1,10],[2,11],[3,2],[8,8],this.poses.solids]},buoyRandom3:{Objects64:[[-8,5],[-2,1],[-2,10],[0,.5],[2,11],[3,1],[7,5],[8,7],this.poses.solids]},buoyRandom4:{Objects64:[[-8,7],[-2,2],[-1,11],[3,1],[7,9],this.poses.solids]},buoyRandom5:{Objects64:[[-8,5],[-7,7],[-2,0],[-1,11],[0,10],[1,1],[3,11],[7,6],[8,4],this.poses.solids]},buoyRandom6:{Objects64:[[-8,8],[-3,2],[-2,7],[-1,11],[1,1],[6,7],[7,4],this.poses.solids]}},this.speedActs={start:{Sandbar256:[[-8,25,1],[9,22,2],this.poses.sandbar],Wake64:[[-10,23],[-14,25],[-13,29],[-2,26],[3,27],[14,26],this.poses.wake64],Seaweed64:[[-13,10],[-14,14],[-8,13],[-11,17],[7,13],[10,15],[14,12],[-13,26],[-8,29],[-6,28],[-4,25],[5,24],[11,25],[13,21],this.poses.seaweed64],Coin64:[[0,30],this.poses.coin],Ramp64:[[-7,20],[7,20],this.poses.ramp],Objects32:[[-6,22],[6,26],[9,21],this.poses.float],Objects64:[[-10,28,this.poses.logs],[8,24,this.poses.logs],[-12,23,this.poses.coral],[-14,11],[-17,14],[-15,18],[-10,13],[-8,15],[-7,10],[9,13],[11,10],[10,16],[15,14],[15,17],[11,20],this.poses.rocks],Docks64:[[-16,16,1],[-14,16,10],[-12,16,9],[-10,16,3],[-12,14,5],[-12,12,6],[-10,12,2],[-8,12,10],[-6,12,3],[16,16,3],[14,16,10],[12,16,1],[12,14,5],[8,15],[10,12,3],[8,12,10],[6,12,1],this.poses.dock.solo]},intro:{Wake64:[[-15,9],[-6,10],[-16,11],[-9,12],[9,11],[12,8],[-17,21],[-2,22],[4,18],[4,23],[15,17],[17,18],this.poses.wake64],Seaweed64:[[-14,11],[-7,12],[6,11],[14,9],[15,11],[-3,3],[-1,5],[1,2],[3,4],[-13,17],[-17,23],[-15,24],[-7,22],[-4,23],[-4,31],[4,30],[6,23],[13,17],[16,20],[15,22],this.poses.seaweed64],Seaweed192:[[-10,10],[9,9],this.poses.seaweed192],Powerup64:[[-11,22],this.poses.powerup],Coin64:[[11,22],this.poses.coin],Ramp64:[[0,27],this.poses.ramp],Objects32:[[-16,9],[-11,13],[-5,10],[6,7],[10,13],[16,9],this.poses.float],Objects64:[[-2,3,this.poses.oceanbuoy],[15,18,this.poses.oceanbuoy],[5,21,this.poses.scuba],[-1,2],[1,4],[-5,17],[-7,18],[-8,20],[-4,19],[-4,21],[-13,18],[-14,19],[-15,21],[6,18],[7,19],[8,21],[12,18],[13,20],[-1,29],[-2,30],[2,30],this.poses.rocks]},act1a:{Seaweed64:[[-7,5],[-5,7],[-10,8],[7,6],[10,8],[7,9],[-8,16],[-11,20],[-6,20],[-2,23],[-7,28],[-3,29],[3,25],[5,19],[5,30],[8,28],[9,15],[-13,12],[-15,17],[-16,21],[-17,24],[16,17],[17,20],[15,24],[15,12],this.poses.seaweed64],Seaweed192:[[-16,15],[-14,27],[16,15],[16,26],this.poses.seaweed192],Whirlpool128:[[-3,3],[3,4],this.poses.whirlpool],Heart64:[[-10,24],this.poses.heart],Coin64:[[12,7],this.poses.coin],Objects64:[[-9,6],[-8,7],[-6,6],[6,7],[8,8],[9,6],[-9,17],[-5,20],[9,14],[6,20],[3,23],[4,28],[6,29],[-5,28],[-3,27],[-4,30],[-3,24,this.poses.logs],[7,28,this.poses.logs],this.poses.rocks],Docks64:[[-9,12,5],[-9,14,3],[-11,14,6],[-11,16,5],[-11,18,3],[-13,18,6],[-13,20,5],[-13,22,5],[-13,24,4],[-3,14,5],[-3,16,5],[-3,18,5],[-3,20,5],[-3,22,3],[-5,22,6],[-5,24,5],[-5,26,3],[-7,26,1],[3,14,5],[3,16,5],[3,18,5],[3,20,5],[3,22,1],[5,22,7],[5,24,5],[5,26,1],[7,26,3],[11,16,5],[11,18,1],[13,18,7],[13,20,5],[13,22,5],[13,24,4],this.poses.dock.solo]},act1b:{Seaweed64:[[0,4],[-11,12],[-10,18],[-4,17],[-15,15],[-12,24],[-1,20],[0,30],[1,25],[3,20],[4,16],[10,20],[12,12],[15,5],[-14,5],[-17,12],[-16,17],[-15,21],[-16,23],[16,12],[15,17],[16,19],[17,23],this.poses.seaweed64],Seaweed192:[[-16,8],[16,9],this.poses.seaweed192],Whirlpool128:[[-1,13],[3,11],this.poses.whirlpool],Coin64:[[2,18],this.poses.coin],Ramp64:[[-8,7],[8,7],this.poses.ramp],Objects64:[[0,2],[1,3],[14,4],[-11,19],[-5,20],[-3,19],[-3,22],[-4,23],[2,16],[4,18],[5,17],[5,20],[-2,18,this.poses.woodenboat],[13,13,this.poses.logs],[-14,14,this.poses.logs],this.poses.rocks],Docks64:[[-11,6,5],[-11,8,5],[-11,10,1],[-9,10,7],[-9,12,6],[-5,12,3],[-7,12,10],[-9,14,5],[-9,16,3],[-11,16,9],[-13,16,6],[-13,18,5],[-13,20,5],[-13,22,1],[-11,22,3],[11,6,5],[11,8,5],[11,10,3],[9,10,6],[9,12,5],[9,14,2],[7,14,1],[11,14,7],[11,16,5],[11,18,1],[13,18,7],[13,20,5],[13,22,3],[11,22,1],[-2,29,1],[0,29,10],[2,29,3],[2,27,5],this.poses.dock.solo]},act2a:{Sandbar256:[[5,4],this.poses.sandbar],Seaweed64:[[-13,3],[-11,4],[-14,5],[-15,9],[-11,9],[17,12],[-13,13],[-6,13],[-16,14],[-14,17],[-11,17],[-7,16],[-14,20],[-9,21],[-6,21],[-10,25],[-11,27],[0,20],[4,18],[1,28],[2,26],[4,28],[6,29],[15,8],[17,10],[14,12],[16,13],[16,17],[17,21],[18,24],[17,27],[-18,6],[-18,9],[-18,15],this.poses.seaweed64],Seaweed192:[[-14,7],[-13,11],[-12,15],[-10,19],[-9,23],[16,15],[16,19],this.poses.seaweed192],Powerup64:[[12,24],this.poses.powerup],Coin64:[[7,9],this.poses.coin],Objects32:[[-3,15],[3,16],[5,19],[10,17],this.poses.wakebuoy],Objects64:[[-3,13],[-8,9],[-3,28],[5,6],[6,21],[5,22],[5,24],[12,19],[13,20],[14,21],[15,22],[15,24],[4,21,this.poses.logs],[6,27,this.poses.logs],[14,26,this.poses.logs],[2,5,this.poses.coral],[5,3,this.poses.coral],[8,6,this.poses.coral],this.poses.rocks],Docks64:[[-8,12,1],[-6,12,10],[-4,12,3],[-5,16,5],[-5,18,4],[0,18,1],[2,18,7],[2,20,4],this.poses.dock.solo]},act2b:{Seaweed64:[[-18,4],[-5,4],[-14,9],[-8,16],[-15,26],[-14,28],[-13,30],[-11,27],[12,12],[16,10],[18,14],[8,3],[9,6],[6,8],[3,8],[4,10],[2,11],[5,12],[6,15],[4,16],[1,17],[3,21],[0,21],[-3,26],[2,27],[-4,30],[15,27],[16,30],[12,31],this.poses.seaweed64],Seaweed192:[[2,14],[2,19],[0,23],this.poses.seaweed192],Heart64:[[12,17],this.poses.heart],Coin64:[[-15,17],this.poses.coin],Ramp64:[[-8,6],[13,8],this.poses.ramp],Objects64:[[-18,6],[-13,7],[-3,5],[-7,17],[-6,12],[-5,22],[-12,23],[16,6],[17,8],[16,11],[17,12],[14,12],[15,13],[13,14],[16,14],[15,18],[16,28],[15,29],[13,30],[-12,13,this.poses.posts],[-4,13,this.poses.posts],this.poses.rocks],Docks64:[[-12,3,3],[-14,3,6],[-14,5,3],[-16,5,6],[-16,7,5],[-16,9,4],[-10,12,5],[-10,14,1],[-8,14,8],[-6,14,3],[-4,2,1],[-2,2,7],[-2,4,1],[0,4,9],[2,4,2],[4,4,10],[6,4,7],[6,6,4],[-13,25,5],[-13,27,4],[-2,21],[-4,24],[-3,29,1],[-1,29,3],[-1,27,5],[-1,25,6],[1,25,10],[3,25,3],this.poses.dock.solo]},ramps1a:{Seaweed64:[[-13,2],[-10,6],[-11,9],[-5,7],[-17,13],[-2,13],[-16,16],[-9,16],[11,14],[-4,19],[16,18],[0,23],[-18,27],[-1,30],[10,27],[18,27],this.poses.seaweed64],Seaweed192:[[-4,4],[12,12],[17,15],[-3,17],[-17,19],[-18,23],[0,26],[-5,29],[18,21],[18,29],this.poses.seaweed192],Powerup64:[[-5,11],[13,28],this.poses.powerup],Ramp64:[[-9,3],[4,3],[10,3],[-5,15],[-12,27],[7,27],this.poses.ramp],Objects64:[[-12,1],[-13,4],[-14,5],[-12,7],[-8,7],[-7,5],[-4,3],[-4,6],[5,8],[6,9],[11,10],[14,9],[16,13],[0,12],[1,14],[-1,14],[-3,15],[0,16],[-10,15],[-18,14],[-17,15],[15,16],[18,16],[-18,17],[-16,18],[-3,18],[13,17],[14,18],[-18,21],[-3,24],[1,24],[16,22],[-17,24],[-4,28],[-2,29],[-1,27],[2,27],[9,28],[16,25],[17,24],[18,30],this.poses.rocks]},ramps1b:{Seaweed64:[[-9,6],[-18,8],[-16,14],[-3,9],[-1,10],[2,15],[11,8],[14,9],[16,5],[17,3],[15,13],[-2,16],[-15,17],[-5,19],[-16,26],[4,24],[8,23],[16,23],[12,19],this.poses.seaweed64],Seaweed192:[[-10,4],[-19,11],[16,9],[-8,21],[-16,31],[15,27],[17,30],this.poses.seaweed192],Coin64:[[11,11],this.poses.coin],Heart64:[[-13,23],this.poses.heart],Ramp64:[[-2,7],[14,2],[-9,19],[7,19],this.poses.ramp],Objects64:[[-13,2],[-10,3],[-12,5],[-8,7],[-17,9],[-16,12],[-18,14],[0,8],[6,5],[7,6],[8,4],[10,6],[11,5],[13,6],[15,4],[15,8],[17,7],[16,10],[14,12],[0,16],[-16,16],[-18,17],[-4,17],[-8,22],[-17,25],[-18,27],[-14,28],[-13,29],[-12,27],[-11,30],[5,23],[6,22],[7,24],[9,21],[17,18],[18,21],[17,24],[15,25],[13,28],[16,29],this.poses.rocks]},ramps2a:{Seaweed64:[[-14,2],[-7,3],[-4,2],[-18,9],[-15,9],[-17,12],[-8,13],[-4,11],[3,2],[15,5],[3,12],[9,11],[8,13],[5,14],[2,16],[3,19],[9,17],[7,20],[-6,24],[-9,27],[-5,28],[-8,30],[2,30],[5,28],[5,31],[-19,20],[-21,23],[-18,24],[-17,26],[-15,27],[18,20],[15,22],[18,23],[20,27],this.poses.seaweed64],Seaweed192:[[16,3],[-15,6],[-5,16],this.poses.seaweed192],Powerup64:[[-14,20],[9,23],this.poses.powerup],Ramp64:[[0,2],[-12,11],[12,11],this.poses.ramp],Objects64:[[-7,10],[-16,8],[-16,13],[-15,3],[-14,4],[-13,3],[-13,7],[-7,12],[-6,1],[-6,4],[-6,14],[-5,3],[-5,10],[-5,13],[-4,15],[1,4],[3,3],[4,12],[5,11],[7,11],[9,15],[15,1],[16,6],[17,2],[-21,21],[-20,20],[-18,20],[-17,21],[-16,22],[-17,23],[-20,22],[-19,24],[-18,25],[-16,26],[-17,27],[17,20],[16,21],[15,22],[16,23],[18,24],[19,23],[20,24],[21,26],[19,27],[21,25],[-8,26],[-7,29],[-6,27],[-6,31],[-5,25],[3,17],[3,29],[4,30],[5,18],[6,21],[7,17],[7,29],[8,19],this.poses.rocks]},ramps2b:{Sandbar256:[[-13,16,1],[13,17,3],this.poses.sandbar],Wake192:[[-16,13],[-8,15],[-15,18],[-5,20],[13,22],[15,19],this.poses.wake192],Seaweed64:[[-16,2],[-15,7],[-16,11],[-11,11],[-10,9],[-9,13],[-5,5],[-5,13],[-2,16],[-18,31],[-15,29],[-7,29],[-5,31],[5,11],[5,27],[5,31],[6,1],[8,3],[8,12],[7,16],[11,14],[14,9],[16,1],[16,28],[15,31],[18,30],this.poses.seaweed64],Seaweed192:[[-16,9],[16,5],[2,9],[17,8],this.poses.seaweed192],Coin64:[[3,14],this.poses.coin],Dog64:[[-4,9],this.poses.dog],Ramp64:[[-11,6],[0,4],[11,9],this.poses.ramp],Objects64:[[-14,19,27],[-8,18,28],[9,19,29],[14,20,30],[-12,14,this.poses.woodenboat],[-17,0],[-15,1],[-17,3],[-14,3],[-15,5],[-14,6],[-13,7],[-13,9],[-12,8],[-10,10],[-9,11],[-8,10],[-7,12],[-6,13],[-4,14],[-3,15],[-2,14],[0,15],[1,17],[-7,1],[-6,3],[-5,2],[-4,4],[-3,5],[-1,6],[1,7],[2,8],[4,9],[6,10],[7,12],[8,13],[9,15],[7,17],[13,14],[13,10],[14,12],[15,9],[15,6],[16,8],[15,2],[16,4],[17,3],[7,2],[8,1],[-17,28],[-16,29],[-15,30],[-6,28],[-4,29],[-16,31],[4,29],[6,28],[7,30],[16,29],[17,31],[18,27],this.poses.rocks]},act3a:{Sandbar256:[[-9,8],[-7,26],[12,5],[8,22],this.poses.sandbar],Wake64:[[0,12],[6,12],[0,18],this.poses.wake64],Wake192:[[-4,3],[6,1],[-10,15],[-1,14],[6,14],[16,18],this.poses.wake192],Seaweed64:[[-14,8],[-5,7],[-3,8],[7,6],[10,8],[14,7],[-5,23],[-11,26],[-9,29],[5,25],this.poses.seaweed64],Whirlpool128:[[0,16],[5,18],this.poses.whirlpool],Coin64:[[3,15],this.poses.coin],Objects32:[[9,2],[-1,24],this.poses.float],Objects64:[[-9,6],[-3,6],[-6,10],[-9,25],[8,7],[13,8],[5,21],[4,23],[8,24],[-6,20,this.poses.rocks],[-4,21,this.poses.rocks],[-7,22,this.poses.rocks],[11,25,this.poses.rocks],[-11,10,this.poses.logs],this.poses.coral]},act3b:{Sandbar256:[[-14,18],[-5,26],[9,16,4],[13,17,3],this.poses.sandbar],Wake192:[[-12,7],[-5,12],[-10,17],[-15,25],[12,8],[6,26],this.poses.wake192],Seaweed64:[[-15,5],[1,5],[0,8],[14,1],[4,21],[10,21],[13,22],[-17,23],[-9,18],[-5,28],[-2,27],this.poses.seaweed64],Heart64:[[1,21],this.poses.heart],Coin64:[[-11,27],this.poses.coin],Objects64:[[-16,3],[-13,2],[-5,22],[12,3],[15,2],[13,5],[-17,5,this.poses.oceanbuoy],[-10,4,this.poses.oceanbuoy],[-13,4,this.poses.scuba],[4,8,this.poses.posts],[11,1,this.poses.oceanbuoy],[17,4,this.poses.oceanbuoy],[-12,24,this.poses.posts],[-6,23,this.poses.posts],[-15,19,this.poses.coral],[-10,20,this.poses.coral],[-7,25,this.poses.coral],[5,17,this.poses.coral],[8,18,this.poses.posts],[12,15,this.poses.coral],[15,18,this.poses.posts],[17,19,this.poses.posts],this.poses.rocks],Docks64:[[-4,7,1],[-2,7,2],[0,7,10],[-2,5,5],[-2,3,6],[0,3,3],[2,7,3],[-12,20,5],[-12,22,3],[-14,22,6],[-14,24,9],[-4,24,5],[-4,26,4],[5,23],[6,20,1],[8,20,2],[10,20,8],[12,20,2],[14,20,3],[12,18,5],this.poses.dock.solo]},act4a:{Seaweed64:[[-8,3],[-10,5],[-14,6],[-6,9],[2,13],[11,10],[15,12],[18,14],[-18,17],[-12,19],[-5,19],[-2,21],[-11,27],[-7,25],[8,20],[15,24],[5,26],[4,29],this.poses.seaweed64],Seaweed192:[[-9,7],[11,8],this.poses.seaweed192],Coin64:[[11,29],this.poses.coin],Heart64:[[-13,24],this.poses.heart],Ramp64:[[2,10],this.poses.ramp],Objects64:[[-14,3],[-12,2],[-12,4],[-11,3],[-7,5],[-5,5],[-4,3],[-6,6],[-4,7],[0,13],[2,14],[4,15],[3,17],[7,7],[9,6],[12,5],[13,11],[14,14],[16,13],[16,16],[15,17],[-17,19],[-16,17],[-13,17],[-15,18],[-14,19],[-5,17],[-5,16],[-4,20],[-2,19],[-10,25],[-8,24],[-9,27],[-6,26],[14,20],[15,22],[17,21],[17,24],[8,21],[9,22],[6,22],[7,23],[5,24],[8,24],[6,27],[7,28],[8,29],[6,30],this.poses.rocks]},act4b:{Wake64:[[-14,5],[-17,10],[-13,13],[-4,9],[-5,12],[-1,15],[4,8],[7,11],[16,23],this.poses.wake64],Wake192:[[-12,2],[-18,7],[3,1],[8,2],[-16,21],[-8,19],[-7,24],[18,8],[20,11],[22,21],[1,21],this.poses.wake192],Seaweed64:[[-8,2],[-6,4],[-8,6],[-11,6],[-14,9],[-12,10],[-15,12],[-16,14],[-13,15],[-18,18],[2,5],[0,26],[5,25],[5,21],[8,19],[10,20],[10,23],[13,16],[17,13],[17,16],[17,19],[19,14],[20,12],this.poses.seaweed64],Seaweed192:[[0,3],[4,23],this.poses.seaweed192],Whirlpool128:[[-3,15],[1,13],[3,19],this.poses.whirlpool],Ramp64:[[9,17],this.poses.ramp],Coin64:[[-14,25],this.poses.coin],Powerup64:[[-7,16],this.poses.powerup],Objects64:[[-11,3,this.poses.logs],[-12,7,this.poses.logs],[-16,8,this.poses.logs],[14,18,this.poses.logs],[2,25,this.poses.logs],[19,15,this.poses.logs],[1,4],[-1,2],[-7,3],[-9,4],[-10,2],[-7,5],[-10,5],[-12,4],[-10,7],[-13,6],[-13,8],[-13,11],[-15,7],[-15,10],[-19,12],[-20,13],[-18,14],[-10,15],[-11,16],[16,12],[12,14],[14,15],[13,16],[15,17],[18,18],[13,19],[11,20],[8,20],[6,21],[10,21],[8,22],[12,22],[14,20],[7,26],this.poses.rocks]},act5a:{Wake192:[[-14,6],[15,8],[-1,16],[-12,24],[12,28],this.poses.wake192],Seaweed64:[[-18,16],[-14,15],[-9,18],[-6,8],[-3,6],[-2,11],[3,10],[6,9],[8,17],[10,15],[14,18],[18,17],[-5,28],[0,31],[5,29],this.poses.seaweed64],Ramp64:[[0,5],[-12,14],[12,14],[-3,27],[3,27],this.poses.ramp],Objects64:[[-6,6],[-9,15],[6,7],[9,14],[14,15],[17,19],[-6,29],[1,28],[-15,19],[-17,13,this.poses.logs],[-5,11,this.poses.logs],[2,11,this.poses.posts],this.poses.solids],Docks64:[[-16,15,5],[-16,17,1],[-14,17,2],[-12,17,10],[-10,17,3],[-4,8,5],[-4,10,1],[-2,10,10],[0,10,3],[0,8,6],[2,8,10],[4,8,3],[4,6,5],[4,12],[10,17,1],[12,17,2],[14,17,8],[16,17,3],[16,15,5],[9,19],[-6,26],[-4,30,1],[-2,30,2],[0,30,10],[2,30,9],[4,30,3],this.poses.dock.solo]},act5b:{Wake192:[[-7,12],[8,16],[-14,22],[-3,30],[14,25],this.poses.wake192],Seaweed64:[[-13,5],[-16,9],[-12,10],[-12,19],[-6,9],[6,8],[14,11],[0,16],[-2,24],[1,17],[1,21],[5,27],[6,23],[9,21],this.poses.seaweed64],Coin64:[[0,4],this.poses.coin],Ramp64:[[-10,6],[10,6],[0,14],this.poses.ramp],Objects64:[[-17,7],[-7,7],[7,7],[16,8],[15,12],[-13,20],[-4,23],[2,22],[7,24],[6,10,this.poses.logs],[1,16,this.poses.woodenboat],[-5,25,this.poses.logs],this.poses.rocks],Docks64:[[-14,7,5],[-14,9,1],[-12,9,8],[-10,9,9],[-8,9,3],[-15,12],[14,7,5],[14,9,3],[12,9,9],[10,9,10],[8,9,6],[8,11,1],[10,11,2],[12,11,3],[-6,22,1],[-4,22,9],[-2,22,3],[2,24,1],[4,24,3],[4,22,6],[6,22,10],[8,22,3],this.poses.dock.solo]}},this.randomObj={Docks64:[this.poses.dock.solo,this.poses.dock.arch],Objects64:this.poses.solids,Objects32:this.poses.float,Wake64:this.poses.wake64,Wake192:this.poses.wake192,Seaweed64:this.poses.seaweed64,Seaweed192:this.poses.seaweed192,Whirlpool128:this.poses.whirlpool,Ambient64:this.poses.ambient}}}class j{constructor(e,t,s){const i=$(e);this.poses=t,this.frames=s,this.spriteWidth=i.width/t,this.spriteHeight=i.height/s,this.image=i}draw(e,t,s,i){$e.data.ctx.drawImage(this.image,s*this.spriteWidth,i*this.spriteHeight,this.spriteWidth,this.spriteHeight,Math.floor(e),Math.floor(t),this.spriteWidth,this.spriteHeight)}}let z=new j("surfboard64",13,3),G=new j("player64",13,9),V=new j("enemy128",2,6),q=new j("surfer64",27,2),U=new j("docks64",10,1),K=new j("objects64",30,1),Z=new j("objects32",20,1),Y=new j("interact64",8,4),J=new j("slowdown64",9,3),X=new j("slowdown64",3,3),Q=new j("effects128",6,3),ee=new j("ripple96",1,3),te=new j("ambient64",4,6),se=new j("sandbar256",4,1),ie=new j("island1280",1,1);class ae{constructor(e,t,s,i,a,o){this.hitbox=new ne(this,0,0,s,i),this.x=e,this.y=t,this.width=s,this.height=i,this.sprite=a,this.pose=o,this.reset()}reset(){this.creation=$e.data.game.time.elapsed,this.lifetime=0,this.fps=6,this.frame={current:1,updated:this.creation},this.isAnimated=!1,this.sleep=!1,this.defineEffect("HIT")}defineEffect(e="HIT"){switch(this.effect=e,this.effect){case"CHEST":case"ISLAND":this.strokeType="TRANSPARENT";break;case"RAMP":case"POWERUP":case"HEART":case"COIN":case"DOG":case"BUOYTRIGGER":case"SWIMTRIGGER":this.strokeType="GOOD";break;case"SLOW":case"SUPERSLOW":case"SPIN":case"TENTACLE":this.strokeType="AVOID";break;default:this.strokeType="COLLIDE"}}update(){if(this.lifetime+=$e.data.game.time.loop,this.sprite.frames>1&&this.isAnimated){if(("AMBIENT"===this.effect||"CHEST"===this.effect)&&this.frame.current===this.sprite.frames)return;if(this.ending&&this.frame.current+1>this.sprite.frames)return void(this.sleep=!0);this.cycleFrame(this.frame,this.sprite)}}move(){this.shift(-$e.data.player.speed.x,-$e.data.player.speed.y)}shift(e=0,t=0){this.x+=e,this.hitbox.x+=e,this.y+=t,this.hitbox.y+=t}changePose(e){e||(e=this.pose+1),this.pose=e}changeFrame(e){e||(e=this.frame.current+1),this.frame.current=e,this.frame.updated=$e.data.game.time.elapsed}cycleFrame(e,t,s=this.fps){if($e.data.game.time.elapsed>=e.updated+1/s){e.updated=$e.data.game.time.elapsed;let s=e.current+1;s>t.frames&&(s=1),e.current=s}}draw(){this.sprite.draw(this.x-this.width/2,this.y-this.height/2,this.pose-1,this.frame.current-1)}drawHitbox(){const e=Math.floor(this.hitbox.x),t=Math.floor(this.hitbox.y),s=this.hitbox.width,i=this.hitbox.height;let a="#000000";let o=!1;if($e.data.session.isHighContrast)switch(this.strokeType){case"COLLIDE":a="CanvasText";break;case"GOOD":a="GrayText",o=!0;break;case"AVOID":a="LinkText",o=!0}else switch(this.strokeType){case"COLLIDE":a="#000000";break;case"GOOD":a="#00FF00",o=!0;break;case"AVOID":a="#FF0000",o=!0}const n=$e.data.ctx;n.beginPath(),n.lineWidth="4",n.strokeStyle=""+a,o?n.setLineDash([8]):n.setLineDash([]),n.strokeRect(e+1,t+1,s-2,i-2)}drawLayer(e,t,s,i,a){e.draw(this.x-e.spriteWidth/2+t,this.y-e.spriteHeight/2+s,i-1,a-1)}}class oe extends ae{constructor(e,t,s,i,a,o){super(e,t,s,i,a,o),this.reset()}reset(){super.reset(),this.type="Obstacle",this.ending=!1,this.collectedByPlayer=!1,this.hitByPlayer=!1,this.hitByEnemy=!1,this.hitBySurfer=!1,this.rippleOffset=-4,this.rippleSprite=ee,this.rippleFrame={current:1,updated:this.creation},this.isAnimated=!0}update(){super.update(),void 0!==this.rippleOffset&&this.cycleFrame(this.rippleFrame,this.rippleSprite)}draw(){void 0!==this.rippleOffset&&this.drawLayer(this.rippleSprite,0,this.rippleOffset,1,this.rippleFrame.current),super.draw()}}class ne{constructor(e,t,s,i,a){this.x=e.x-e.width/2+t,this.y=e.y-e.height/2+s,this.width=i,this.height=a}touches(e){return!(e.x+e.width<this.x)&&(!(this.x+this.width<e.x)&&(!(e.y+e.height<this.y)&&!(this.y+this.height<e.y)))}}class re extends ae{constructor(e,t,s){super(e,t,128,128,s,1),this.hitbox=new ne(this,32,80,64,40),this.reset()}reset(){super.reset(),this.state="CHASE",this.type="Enemy",this.defineEffect("ENEMY"),this.gotPlayer=!1,this.obstaclesHit=[],this.rippleOffset=void 0,this.angle={current:0,radian:0,driftTime:0,distance:0},this.sprite=V,this.speed={current:3,raw:3,max:9,accel:.05},this.timer={crash:0,direction:0},this.frame={current:1,updated:this.creation},this.speed.raw=$e.data.player.speed.raw+1}update(){super.update(),this.updateEnemyFrames(),this.isCrashed()||this.gotPlayer||(this.updateDirection(),this.updateSpeed(),this.updatePosition())}updateEnemyFrames(){switch(this.state){case"CHASE":this.cycleEnemyFrame(1,4);break;case"CRASH":this.cycleEnemyFrame(5,6);break;case"GRAB":this.cycleEnemyFrame(1,6)}}cycleEnemyFrame(e,t){if($e.data.game.time.elapsed>=this.frame.updated+1/this.fps){if(this.ending&&this.frame.current+1>this.sprite.frames)return;let s=this.frame.current+1;s>t&&(s=e),this.changeFrame(s)}}crash(){this.changeState("CRASH")}resume(){this.changeState("CHASE")}slow(){this.speed.raw=this.speed.raw/2}grab(){this.changeState("GRAB")}isCrashed(){return!(this.timer.crash<=0)&&(this.timer.crash-=$e.data.game.time.loop*$e.data.game.time.scale,!(this.timer.crash<=0)||(this.resume(),!1))}changeState(e){switch(this.state=e,e){case"CHASE":this.changeFrame(1),this.timer.crash=0,this.timer.direction=0;break;case"CRASH":this.changeFrame(5),this.timer.crash+=1.25,this.speed.raw=0;break;case"GRAB":this.changePose(2),this.changeFrame(1),this.speed.raw=0,this.gotPlayer=!0,this.ending=!0}}updateDirection(){if(this.angle.distance=Math.hypot($e.data.session.xOrigin-this.x,$e.data.session.yOrigin-this.y),this.timer.direction-=$e.data.game.time.loop*$e.data.game.time.scale,this.timer.direction<=0){this.timer.direction+=$e.data.randomNumberBetween(25,100)/100*(this.angle.distance/$e.data.session.yOrigin);const e=$e.data.session.xOrigin-this.x,t=$e.data.session.yOrigin-this.y;this.angle.current=180*Math.atan2(t,e)/Math.PI,this.angle.radian=this.angle.current*Math.PI/180}}updateSpeed(){const e=this.y>=$e.data.session.yOrigin;this.speed.raw<this.speed.max&&!e?this.speed.raw+=this.speed.accel*$e.data.game.time.scale:e?this.speed.raw-=this.speed.accel*$e.data.game.time.scale:this.speed.raw=this.speed.max,this.speed.current=this.speed.raw*$e.data.game.time.scale}updatePosition(){const e=this.angle.distance/$e.data.session.yOrigin*15,t=Math.cos(16*this.lifetime)*e*Math.PI/180,s=this.speed.current*Math.cos(this.angle.radian+t),i=this.speed.current*Math.sin(this.angle.radian+t);this.shift(s,i)}}class he extends ae{constructor(e,t,s){super(e,t,64,64,s),this.hitbox=new ne(this,20,32,24,24),this.reset()}reset(){super.reset(),this.state="CRASH",this.type="Surfer",this.defineEffect("SURFER"),this.boardPose=0,this.hitByPlayer=!1,this.obstaclesHit=[],this.angle={current:0,radian:0},this.sprite=q,this.speed={current:5,raw:5,max:10,accel:.025},this.timer={crash:0,direction:0},this.surferInstance=$e.data.randomNumberBetween(1,9),this.surferInstance<=6?this.boardInstance=$e.data.randomNumberBetween(1,6):this.boardInstance=$e.data.randomNumberBetween(7,9),this.resume()}update(){super.update(),this.isCrashed()||(this.updateDirection(),this.updateSpeed(),this.updatePosition())}crash(){this.changeState("CRASH")}resume(){const e=Math.random()>.5?"RIGHT":"LEFT";this.changeState(e),this.timer.crash=0,this.timer.direction=0}slow(){this.speed.raw=this.speed.raw/2}isCrashed(){return!(this.timer.crash<=0)&&(this.timer.crash-=$e.data.game.time.loop*$e.data.game.time.scale,!(this.timer.crash<=0)||(this.resume(),!1))}changeState(e){this.state=e;const t=3*(this.surferInstance-1),s=3*(this.boardInstance-1);switch(e){case"LEFT":this.changePose(t+1),this.changeBoardPose(s+1),this.angle.current=-155;break;case"RIGHT":this.changePose(t+2),this.changeBoardPose(s+2),this.angle.current=155;break;case"CRASH":this.changePose(t+3),this.changeBoardPose(s+3),this.timer.crash+=2.5,this.speed.raw=0}"LEFT"!==e&&"RIGHT"!==e||(this.angle.radian=(this.angle.current-90)*Math.PI/180)}changeBoardPose(e=0){e<=0&&(e=1),this.boardPose=e}updateDirection(){if(this.timer.direction-=$e.data.game.time.loop*$e.data.game.time.scale,this.timer.direction<=0&&(this.timer.direction+=$e.data.randomNumberBetween(25,150)/100,Math.random()>.5)){const e="LEFT"===this.state?"RIGHT":"LEFT";this.changeState(e)}}updateSpeed(){this.speed.raw<this.speed.max?this.speed.raw+=this.speed.accel*$e.data.game.time.scale:this.speed.raw>this.speed.max?this.speed.raw-=this.speed.accel*$e.data.game.time.scale:this.speed.raw=this.speed.max,this.speed.current=this.speed.raw*$e.data.game.time.scale}updatePosition(){const e=this.speed.current*Math.cos(this.angle.radian),t=this.speed.current*Math.sin(this.angle.radian);this.shift(e,t)}draw(){super.drawLayer(this.sprite,0,0,this.boardPose,2),super.draw()}}class ce extends oe{constructor(e,t,s){super(e,t,64,64,U,s),this.hitbox=new ne(this,6,16,52,32),this.reset()}reset(){super.reset(),this.type="Docks64",this.defineEffect("HIT"),this.isAnimated=!1,this.rippleOffset=-6,this.dockDecor=void 0,this.dockDecorPos=void 0,this.pose>=1&&this.pose<=8&&Math.random()<.75&&(this.dockDecor=$e.data.randomNumberBetween(1,12),this.dockDecorPos=$e.data.randomNumberBetween(-16,-24)),this.pose>=10&&this.pose<=12&&(this.rippleOffset=void 0)}draw(){super.draw(),void 0!==this.dockDecor&&super.drawLayer(Z,0,this.dockDecorPos,8+this.dockDecor,1)}}class le extends oe{constructor(e,t,s){super(e,t,64,64,K,s),this.hitbox=new ne(this,12,36,40,20),this.reset()}reset(){super.reset(),this.type="Objects64",this.defineEffect("HIT"),this.isAnimated=!1}}class de extends oe{constructor(e,t,s){super(e,t,32,32,Z,s),this.hitbox=new ne(this,4,20,24,12),this.reset()}reset(){super.reset(),this.type="Objects32",this.defineEffect("SPIN"),this.isAnimated=!1,this.rippleOffset=-12}}class pe extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,8,8,48,24),this.reset()}reset(){super.reset(),this.type="Ramp64",this.defineEffect("RAMP")}}class ue extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,-64,-64,192,192),this.reset()}reset(){super.reset(),this.type="Tentacle64",this.defineEffect("TENTACLE")}}class me extends oe{constructor(e,t,s){super(e,t,64,64,J,s),this.hitbox=new ne(this,4,8,56,48),this.reset()}reset(){super.reset(),this.type="Wake64",this.defineEffect("SLOW"),this.rippleOffset=void 0}}class ge extends oe{constructor(e,t,s){super(e,t,192,64,X,s),this.hitbox=new ne(this,8,8,176,48),this.reset()}reset(){super.reset(),this.type="Wake192",this.defineEffect("SLOW"),this.rippleOffset=void 0}}class ye extends oe{constructor(e,t,s){super(e,t,64,64,J,s),this.hitbox=new ne(this,4,8,56,48),this.reset()}reset(){super.reset(),this.type="Seaweed64",this.defineEffect("SUPERSLOW"),this.rippleOffset=void 0}}class be extends oe{constructor(e,t,s){super(e,t,192,64,X,s),this.hitbox=new ne(this,8,8,176,48),this.reset()}reset(){super.reset(),this.type="Seaweed192",this.defineEffect("SUPERSLOW"),this.rippleOffset=void 0}}class fe extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,0,0,64,64),this.reset()}reset(){super.reset(),this.type="Powerup64",this.defineEffect("POWERUP")}}class we extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,0,0,64,64),this.reset()}reset(){super.reset(),this.type="Heart64",this.defineEffect("HEART")}}class Se extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,0,0,64,64),this.reset()}reset(){super.reset(),this.type="Coin64",this.defineEffect("COIN")}}class ve extends oe{constructor(e,t,s){super(e,t,128,128,Q,s),this.hitbox=new ne(this,16,32,96,64),this.reset()}reset(){super.reset(),this.type="Whirlpool128",this.defineEffect("SPIN"),this.rippleOffset=void 0}}class ke extends oe{constructor(e,t,s){super(e,t,64,64,te,s),this.hitbox=new ne(this,0,0,64,64),this.reset()}reset(){super.reset(),this.type="Ambient64",this.defineEffect("AMBIENT"),this.frame.current=0,this.rippleOffset=0,this.isAnimated=!1}}class Ce extends oe{constructor(e,t,s){super(e,t,256,128,se,s),this.hitbox=new ne(this,24,72,208,24),this.reset()}reset(){super.reset(),this.type="Sandbar256",this.defineEffect("HIT"),this.rippleOffset=void 0,this.isAnimated=!1}}class Oe extends oe{constructor(e,t,s){super(e,t,64,64,K,s),this.hitbox=new ne(this,8,36,48,20),this.reset()}reset(){super.reset(),this.type="Characters64",this.defineEffect("HIT"),this.isAnimated=!1}}class Te extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,-32,-32,128,128),this.reset()}reset(){super.reset(),this.type="Dog64",this.defineEffect("DOG")}}class Ee extends oe{constructor(e,t,s){super(e,t,64,64,Y,s),this.hitbox=new ne(this,0,0,64,64),this.reset()}reset(){super.reset(),this.type="DogCrash64",this.defineEffect("DOGCRASH")}}class Pe extends oe{constructor(e,t,s){super(e,t,64,64,K,s),this.hitbox=new ne(this,16,48,32,16),this.reset()}reset(){super.reset(),this.buoyId=null,this.buoyTriggered=void 0,this.type="Buoy64",this.defineEffect("HIT")}}class Ie extends oe{constructor(e,t,s){super(e,t,32,32,Z,s),this.hitbox=new ne(this,4,20,24,12),this.reset()}reset(){super.reset(),this.buoyId=null,this.buoyTriggered=void 0,this.type="BuoyGuide32",this.defineEffect("SPIN"),this.isAnimated=!1,this.rippleOffset=-12}}class xe extends oe{constructor(e,t,s){super(e,t,224,64,K,s),this.hitbox=new ne(this,0,0,224,64),this.reset()}update(){}reset(){super.reset(),this.buoyId=null,this.type="BuoyTrigger",this.defineEffect("BUOYTRIGGER")}draw(){}}class Me extends oe{constructor(e,t,s){super(e,t,756,512,K,s),this.hitbox=new ne(this,0,0,756,512),this.reset()}update(){}reset(){super.reset(),this.type="SwimTrigger",this.defineEffect("SWIMTRIGGER")}draw(){}}class De extends oe{constructor(e,t,s){super(e,t,1280,512,ie,s),this.hitbox=new ne(this,0,180,1280,100),this.reset()}reset(){super.reset(),this.type="Island",this.defineEffect("ISLAND")}}class Ae extends oe{constructor(e,t,s){super(e,t,128,128,Q,s),this.hitbox=new ne(this,0,0,128,256),this.reset()}reset(){super.reset(),this.type="Chest",this.defineEffect("CHEST"),this.isAnimated=!1,this.rippleOffset=void 0,this.fps=4,this.sparkleSprite=Q,this.sparkleFrame={current:1,updated:this.creation}}startChestAnimation(){this.frame.updated=$e.data.game.time.elapsed,this.isAnimated=!0}update(){super.update(),this.cycleFrame(this.sparkleFrame,this.sparkleSprite,6)}draw(){super.draw(),this.drawLayer(this.sparkleSprite,0,-32,5,this.sparkleFrame.current)}}class Re{constructor(){if(Re.system)return Re.system;Re.system=this,this.cluster=new W,this.cluster.defineClusters(),this.reset(),this.createNewElements()}reset(){void 0===this.sleeping?this.sleeping=[]:this.sleeping=this.sleeping.concat(this.obstacles).concat(this.passives).concat(this.surfers).concat(this.enemies),this.grid={size:32,gap:16,height:12,padding:12,xGap:0,yGap:0},this.spawnClassic={row:{next:0},enemy:{next:1e3,inc:480},surfer:{next:30,inc:100},ramp:{next:500,inc:500},powerup:{next:650,inc:500},tentacle:{next:800,inc:500},dog:{next:3e3,inc:3e3},character:{next:2e3,inc:1e3}},this.spawnSpeed={row:{next:0,inc:1024}},this.spawnBuoy={row:{next:400,inc:1200},heart:{next:500,inc:1500},powerup:{next:3e3,inc:5e3}},this.characters={},this.everything=[],this.player=void 0,this.obstacles=[],this.passives=[],this.surfers=[],this.enemies=[],this.island=void 0,this.chest=void 0,this.nextBuoyIsLeft=!0,this.prevBuoyCluster=[],this.nextBuoyCluster=[],this.totalBuoyCount=0,this.currentSpeedAct=0,this.buoyGap=1024,this.coveBuilt=!1,this.clustersLastSpawned=[],this.clusterArray=Object.keys(this.cluster.randomObj),this.allSpeedActs=Object.keys(this.cluster.speedActs)}createNewElements(){this.startingObjects={Docks64:50,Objects64:80,Objects32:20,Ramp64:10,Tentacle64:3,Wake64:30,Wake192:15,Seaweed64:30,Seaweed192:15,Coin64:2,Powerup64:2,Heart64:1,Whirlpool128:5,Ambient64:10,Sandbar256:10,Characters64:1,Dog64:1,Buoy64:10,BuoyGuide32:20,Island:1,Chest:1,Enemy:3,Surfer:20};for(const e in this.startingObjects)if(this.startingObjects.hasOwnProperty(e)){const t=this.startingObjects[e];for(let s=0;s<t;s++){const t=this.createObject(e,-1e3,-1e3,0);this.sleeping.push(t)}}}createPlayer(){const e=$e.data.session.xOrigin,t=$e.data.session.yOrigin;this.player=this.createObject("Player",e,t),this.player.reset(),this.everything.push(this.player)}createSurfer(){const e=Math.random()*$e.data.session.width;let t=-32;const s=$e.data.randomNumberBetween(1,13);s<$e.data.player.speed.raw&&(t=$e.data.session.height);this.buildNewObject("Surfer",e,t).speed.max=s}createEnemy(){const e=Math.random()*$e.data.session.width;this.buildNewObject("Enemy",e,-32)}buildStartScene(){switch($e.data.session.settings.mode){case"CLASSIC":this.createClassicStart();break;case"SPEED":this.createFirstSpeedStart();break;case"BUOY":this.createFirstBuoyPass()}}update(){switch(this.putToSleep(),this.grid.xGap=this.grid.gap*this.grid.size+this.grid.padding*this.grid.size,this.grid.yGap=this.grid.height*this.grid.size+this.grid.padding*this.grid.size,$e.data.session.settings.mode){case"CLASSIC":this.updateClassicMode();break;case"SPEED":this.updateSpeedMode();break;case"BUOY":this.updateBuoyMode()}this.mergeEverything()}updateClassicMode(){this.spawnClassic.row.next<$e.data.game.distance.yPx&&(this.createClassicClusters(),this.spawnClassic.row.next+=this.grid.yGap+this.grid.padding*this.grid.size*2),!this.player.swimming&&this.spawnClassic.enemy.next<$e.data.game.distance.y&&(this.createEnemy(),this.spawnClassic.enemy.next+=this.spawnClassic.enemy.inc),(this.spawnClassic.surfer.next<$e.data.game.distance.y||this.player.swimming&&this.spawnClassic.surfer.next-this.spawnClassic.surfer.inc/2<$e.data.game.distance.y)&&(this.createSurfer(),this.spawnClassic.surfer.next+=this.spawnClassic.surfer.inc)}updateSpeedMode(){if(this.spawnSpeed.row.next<$e.data.game.distance.yPx)if(this.currentSpeedAct>0&&this.currentSpeedAct<this.allSpeedActs.length)this.createSpeedClusters(),this.currentSpeedAct%2==0?this.spawnSpeed.row.next+=this.spawnSpeed.row.inc+64:this.spawnSpeed.row.next+=this.spawnSpeed.row.inc;else if(void 0===this.island&&this.currentSpeedAct===this.allSpeedActs.length){const e=$e.data.session.xOrigin-$e.data.game.distance.xPx,t=$e.data.session.yOrigin-$e.data.game.distance.yPx+this.spawnSpeed.row.next+($e.data.session.height-$e.data.session.yOrigin)+this.spawnSpeed.row.inc;this.buildIsland(e,t)}}updateBuoyMode(){this.spawnBuoy.row.next<$e.data.game.distance.yPx&&(this.createBuoyPass(),this.createBuoyClusters(),this.spawnBuoy.row.next+=this.spawnBuoy.row.inc)}createClassicStart(){const e=$e.data.session.xOrigin,t=$e.data.session.yOrigin+128;this.buildCluster(this.cluster.classicStart,e,t)}createClassicClusters(){const e=[0,this.grid.xGap,-this.grid.xGap,this.grid.xGap/2,-this.grid.xGap/2],t=[0,0,0,this.grid.yGap,this.grid.yGap],s=Math.round(this.grid.xGap/448),i=Math.round(this.grid.yGap/448*.7);for(let a=0;a<e.length;a++){let o=$e.data.randomNumberBetween(-6,6)*this.grid.size,n=$e.data.randomNumberBetween(0,12)*this.grid.size,r=this.cluster.normal;0===a&&(o=0,n=0,$e.data.player.distance.air>0?r=this.cluster.passive:this.spawnClassic.character.next<$e.data.game.distance.y?(r=this.cluster.characterScenes,this.spawnClassic.character.next+=this.spawnClassic.character.inc):this.spawnClassic.dog.next<$e.data.game.distance.y?(r=this.cluster.dog,this.spawnClassic.dog.next+=this.spawnClassic.dog.inc):this.spawnClassic.powerup.next<$e.data.game.distance.y?(r=this.cluster.powerup,this.spawnClassic.powerup.next+=this.spawnClassic.powerup.inc):this.spawnClassic.ramp.next<$e.data.game.distance.y?(r=this.cluster.ramp,this.spawnClassic.ramp.next+=this.spawnClassic.ramp.inc):this.spawnClassic.tentacle.next<$e.data.game.distance.y&&(r=this.cluster.tentacle,this.spawnClassic.tentacle.next+=this.spawnClassic.tentacle.inc));let h=0;"LEFT"===$e.data.player.direction||"DOWN LEFT"===$e.data.player.direction?h=-this.grid.xGap/2:"RIGHT"!==$e.data.player.direction&&"DOWN RIGHT"!==$e.data.player.direction||(h=this.grid.xGap/2);const c=$e.data.session.xOrigin+e[a]+o+h,l=$e.data.session.height+128+t[a]+n;this.buildCluster(r,c,l),this.buildClassicRandomObstacles(c,l,s,i,448)}}createFirstSpeedStart(){const e=this.cluster.speedActs,t=$e.data.session.xOrigin-$e.data.game.distance.xPx,s=$e.data.session.yOrigin-$e.data.game.distance.yPx+this.spawnSpeed.row.next,i=this.allSpeedActs[this.currentSpeedAct];this.buildCluster(e,t,s,!1,i),this.spawnSpeed.row.next+=this.spawnSpeed.row.inc-($e.data.session.height-$e.data.session.yOrigin),this.currentSpeedAct+=1}createSpeedClusters(){const e=this.cluster.speedActs,t=$e.data.session.xOrigin-$e.data.game.distance.xPx,s=$e.data.session.yOrigin-$e.data.game.distance.yPx+this.spawnSpeed.row.next+($e.data.session.height-$e.data.session.yOrigin),i=this.allSpeedActs[this.currentSpeedAct];this.buildCluster(e,t,s,!1,i),this.currentSpeedAct+=1}createFirstBuoyPass(){const e=$e.data.session.height-128;this.nextBuoyCluster=this.buildCluster(this.cluster.buoyFirst,$e.data.session.xOrigin,e,!0)}createBuoyPass(){let e,t;this.totalBuoyCount+=1;const s=$e.data.session.height+128-$e.data.game.distance.yPx+this.spawnBuoy.row.next;this.nextBuoyIsLeft?(e=this.cluster.buoyLeft,t=$e.data.session.xOrigin-320-$e.data.game.distance.xPx-1*this.grid.size,this.nextBuoyIsLeft=!1):(e=this.cluster.buoyRight,t=$e.data.session.xOrigin+320-$e.data.game.distance.xPx+1*this.grid.size,this.nextBuoyIsLeft=!0),this.prevBuoyCluster=this.nextBuoyCluster,this.nextBuoyCluster=this.buildCluster(e,t,s,!0)}confirmBuoyHit(e){const t=this.prevBuoyCluster.concat(this.nextBuoyCluster);for(let s=0;s<t.length;s++)t[s].buoyId===e&&(t[s].buoyTriggered=!0,"BuoyGuide32"===t[s].type?t[s].pose=7:"Buoy64"===t[s].type&&(t[s].pose=24))}denyBuoyHit(e){const t=this.prevBuoyCluster.concat(this.nextBuoyCluster);for(let s=0;s<t.length;s++)t[s].buoyId===e&&(t[s].buoyTriggered=!1,"BuoyGuide32"===t[s].type&&(t[s].pose=8))}createBuoyClusters(){const e=this.cluster.normal,t=$e.data.session.xOrigin-$e.data.game.distance.xPx;let s=$e.data.session.height+.6*this.spawnBuoy.row.inc;const i=$e.data.randomNumberBetween(0,2)*this.grid.size,a=$e.data.randomNumberBetween(0,3)*this.grid.size;this.buildCluster(e,t-560-i,s),this.buildCluster(e,t+560+i,s+a);let o=128;this.nextBuoyIsLeft&&(o=-128),this.buildCluster(e,t+o,$e.data.session.height+128-$e.data.game.distance.yPx+this.spawnBuoy.row.next),this.buildCluster(this.cluster.buoyRandom,t,s),s+=5.5*this.grid.size,this.spawnBuoy.heart.next<$e.data.game.distance.y?(this.buildNewObject("Heart64",t,s,4),this.spawnBuoy.heart.next+=this.spawnBuoy.heart.inc):this.spawnBuoy.powerup.next<$e.data.game.distance.y?(this.buildNewObject("Powerup64",t,s,3),this.spawnBuoy.powerup.next+=this.spawnBuoy.powerup.inc):Math.random()<.1&&this.buildNewObject("Whirlpool128",t,s,1)}buildCluster(e,t,s,i=!1,a){let o;if(a)o=e[a];else{const t=Object.keys(e);o=e[$e.data.randomArrayIndex(t)];let s=0;for(;-1!==this.clustersLastSpawned.indexOf(o)&&s<5;)o=e[$e.data.randomArrayIndex(t)],s++}this.clustersLastSpawned.unshift(o),this.clustersLastSpawned.length>20&&this.clustersLastSpawned.pop();const n=t,r=s,h=[];for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];for(let s=0;s<t.length-1;s++){const i=t[s],a=n+i[0]*this.grid.size,o=r+i[1]*this.grid.size;let c=i[2];void 0===c?c=$e.data.randomArrayIndex(t[t.length-1]):Array.isArray(c)&&(c=$e.data.randomArrayIndex(i[2]));const l=this.buildNewObject(e,a,o,c);h.push(l)}}if(i)return h}buildClassicRandomObstacles(e,t,s,i,a){const o=this.grid.padding/3;for(let i=0;i<s;i++){const s=e+i*a,n=t+.66*this.grid.yGap;this.buildNewRandomObstacle(s,n,o)}for(let s=0;s<i;s++){const i=e+this.grid.xGap/2,n=t+s*a/2;this.buildNewRandomObstacle(i,n,o)}for(let s=0;s<i;s++){const i=e-this.grid.xGap/2,n=t+a/2+s*a/2;this.buildNewRandomObstacle(i,n,o)}}buildNewRandomObstacle(e,t,s){const i=$e.data.randomNumberBetween(-4-s,4+s)*this.grid.size,a=$e.data.randomNumberBetween(-2-s,2+s)*this.grid.size;let o="Objects64";Math.random()<.5&&(o=$e.data.randomArrayIndex(this.clusterArray));const n=$e.data.randomArrayIndex(this.cluster.randomObj[o]);this.buildNewObject(o,e+i,t+a,n)}buildIsland(e,t){this.island=this.buildNewObject("Island",e,t),this.chest=this.buildNewObject("Chest",e+180,t-64,6),this.buildCluster(this.cluster.island,e,t-256-64,!1,"island")}buildCove(){this.coveBuilt||(this.coveBuilt=!0,this.spawnClassic.row.next+=this.grid.yGap+this.grid.padding*this.grid.size*2,this.obstacles=this.goToSleep(this.obstacles,-64,$e.data.session.height+64),this.buildCluster(this.cluster.cove,$e.data.session.xOrigin-($e.data.session.height-$e.data.session.yOrigin)-256,$e.data.session.height))}buildNewObject(e,t,s,i=1){let a,o=this.wakeObject(e,t,s,i);switch(o||(o=this.createObject(e,t,s,i)),o.effect){case"HIT":case"POWERUP":case"HEART":case"RAMP":case"COIN":case"TENTACLE":case"DOG":case"DOGCRASH":a=this.obstacles;break;case"SLOW":case"SUPERSLOW":case"SPIN":case"AMBIENT":case"ISLAND":case"BUOYTRIGGER":case"SWIMTRIGGER":a=this.passives;break;case"ENEMY":a=this.enemies;break;case"SURFER":a=this.surfers;break;default:a=this.obstacles}switch(o.type){case"BuoyTrigger":case"BuoyGuide32":case"Buoy64":o.buoyId=this.totalBuoyCount}return a.push(o),o}createObject(e,t,s,i){switch(e){case"Docks64":return new ce(t,s,i);case"Objects64":return new le(t,s,i);case"Objects32":return new de(t,s,i);case"Ramp64":return new pe(t,s,1);case"Tentacle64":return new ue(t,s,2);case"Wake64":return new me(t,s,i);case"Wake192":return new ge(t,s,i);case"Seaweed64":return new ye(t,s,i);case"Seaweed192":return new be(t,s,i);case"Powerup64":return new fe(t,s,3);case"Heart64":return new we(t,s,4);case"Coin64":return new Se(t,s,5);case"Whirlpool128":return new ve(t,s,1);case"Ambient64":return new ke(t,s,i);case"Sandbar256":return new Ce(t,s,i);case"Characters64":return new Oe(t,s,i);case"Dog64":return new Te(t,s,7);case"DogCrash64":return new Ee(t,s,8);case"Buoy64":return new Pe(t,s,23);case"BuoyGuide32":return new Ie(t,s,6);case"BuoyTrigger":return new xe(t,s,1);case"SwimTrigger":return new Me(t,s,1);case"Island":return new De(t,s,1);case"Chest":return new Ae(t,s,6);case"Enemy":return new re(t,s);case"Surfer":return new he(t,s);case"Player":return new Be(t,s)}}mergeEverything(){const e=this.obstacles.concat(this.surfers).concat(this.enemies).concat(this.player);if(e.sort(((e,t)=>e.hitbox.y+e.hitbox.height-(t.hitbox.y+t.hitbox.height))),$e.data.player.distance.air>0){const t=e.findIndex((e=>"Player"===e.type)),s=e.splice(t,1)[0];e.push(s)}this.everything=this.passives.concat(e)}wakeObject(e,t,s,i){let a;const o=this.wakeFromSleep(e,i);return!!o&&(a=o,a.shift(t-a.x,s-a.y),a.reset(),a)}wakeFromSleep(e,t){let s=0,i=this.sleeping;for(;s<i.length;s++)if(i[s].type===e){i[s].pose=t;const e=i[s];return i=i.splice(s,1),e}}putToSleep(){this.obstacles=this.goToSleep(this.obstacles,-64),this.passives=this.goToSleep(this.passives,-64),this.surfers=this.goToSleep(this.surfers,-64,$e.data.session.height+64),this.enemies=this.goToSleep(this.enemies,-128,$e.data.session.height+128)}goToSleep(e,t,s=1e6){function i(e){return e.y>t&&e.y<s&&!1===e.sleep}const a=e.filter((e=>!i(e)));return this.sleeping=this.sleeping.concat(a),e.filter((e=>i(e)))}}class Le{constructor(){if(Le.system)return Le.system;Le.system=this,this.reset()}reset(){this.lastTime=0,this.thisTime=0,this.lastInput=0,this.doubleDelta=300}checkDoubleInput(e){if(this.thisTime=Date.now(),this.thisTime-this.lastTime<=this.doubleDelta){if(this.lastInput===e)switch(e){case"DOWN":this.routeInputType("BOOST")}this.thisTime=0}this.lastTime=this.thisTime,this.lastInput=e}routeInputType(e){const t=$e.data.session.state;switch(this.checkDoubleInput(e),e){case"UP":this.inputUp(t);break;case"DOWN":this.inputDown(t);break;case"DOWN LEFT":this.inputDownLeft(t);break;case"DOWN RIGHT":this.inputDownRight(t);break;case"LEFT":this.inputLeft(t);break;case"RIGHT":this.inputRight(t);break;case"FORWARD":this.inputForward(t);break;case"BACKWARD":this.inputBackward(t);break;case"TOGGLE PLAY":this.inputTogglePlay(t);break;case"CYCLEMODE":this.inputCycleMode(t);break;case"BOOST":this.inputBoost(t);break;case"SETTINGS":this.inputSettings(t);break;case"KONAMI":this.codeKonami(t);break;case"MICROSOFT":this.codeMicrosoft(t);break;case"EDGE":this.codeEdge(t);break;case"RESET":Xe.system.changeGameState("MENU")}}inputUp(e){const t=$e.data.session.isFlyoutActive;"PLAY"!==e||t?this.inputMenuUp(e):Be.system.changeState("STOP")}inputDown(e){const t=$e.data.player.state,s=$e.data.session.isFlyoutActive;"PLAY"!==e||s?this.inputMenuDown(e):"AIR"===t.substring(0,3)?this.inputTrick(e):Be.system.changeDirection("DOWN")}inputLeft(e){const t=$e.data.player.direction,s=$e.data.session.isFlyoutActive;"PLAY"!==e||s?this.inputMenuLeft(e):"DOWN LEFT"===t||"UP"===t?Be.system.changeDirection("LEFT"):"LEFT"!==t&&Be.system.changeDirection("DOWN LEFT")}inputDownLeft(e){const t=$e.data.session.isFlyoutActive;"PLAY"!==e||t?this.inputMenuLeft(e):Be.system.changeDirection("DOWN LEFT")}inputRight(e){const t=$e.data.player.direction,s=$e.data.session.isFlyoutActive;"PLAY"!==e||s?this.inputMenuRight(e):"DOWN RIGHT"===t||"UP"===t?Be.system.changeDirection("RIGHT"):"RIGHT"!==t&&Be.system.changeDirection("DOWN RIGHT")}inputDownRight(e){const t=$e.data.session.isFlyoutActive;"PLAY"!==e||t?this.inputMenuRight(e):Be.system.changeDirection("DOWN RIGHT")}inputMenuUp(e){}inputMenuDown(e){}inputMenuLeft(e){const t=$e.data.session.isFlyoutActive;"MENU"!==e||t||Be.system.changeCharacter(-1)}inputMenuRight(e){const t=$e.data.session.isFlyoutActive;"MENU"!==e||t||Be.system.changeCharacter(1)}inputForward(e){const t=$e.data.session.isFlyoutActive,s=document.activeElement;if(t&&s)if("select"===s.tagName.toLowerCase()){let e=Number(s.value)+1;e>3&&(e=1),s.value=e,Flyout.system.changeGameMode(s)}else document.activeElement.click();else"PLAY"===e||"PAUSE"===e?this.inputTogglePlay(e):"MENU"!==e||t?"OVER"===e&&Xe.system.changeGameState("MENU"):Xe.system.changeGameState("PLAY")}inputBackward(e){const t=$e.data.session.isFlyoutActive;"PLAY"===e||"PAUSE"===e||t?this.inputTogglePlay(e):"OVER"===e&&Xe.system.changeGameState("MENU")}inputSettings(e){$e.data.session.isFlyoutActive?Flyout.system.destroyFlyout():Flyout.system.buildFlyout()}inputTogglePlay(e){$e.data.session.isFlyoutActive&&Flyout.system.destroyFlyout(),"PLAY"===e?Xe.system.changeGameState("PAUSE"):"PAUSE"===e&&Xe.system.changeGameState("PLAY")}inputCycleMode(e){if("MENU"===e){const e=$e.data.session.settings.mode;let t;t="CLASSIC"===e?"SPEED":"SPEED"===e?"BUOY":"CLASSIC",$e.data.session.settings.mode=t,$e.data.saveGameSettings(),Ve.system.buildMenu(),Ve.system.sendNotification("MODE")}}inputBoost(e){"PLAY"===e&&Be.system.changeState("BOOST")}inputTrick(e){"PLAY"===e&&Be.system.newTrick()}codeKonami(e){"MENU"===e&&(Be.system.konamiSprite(),Ve.system.sendNotification("KONAMI"))}codeMicrosoft(e){"MENU"===e&&($e.data.game.enhancements.codeUsed=!0,$e.data.game.enhancements.infiniteLives=!0,$e.data.game.lives.current=3,Ve.system.updateIcons(),Ve.system.sendNotification("MICROSOFT",8e3))}codeEdge(e){"MENU"===e&&($e.data.game.enhancements.codeUsed=!0,$e.data.game.enhancements.infinitePowerups=!0,$e.data.game.powerups.current=3,Ve.system.updateIcons(),Ve.system.sendNotification("EDGE",8e3))}}class Ne{constructor(){if(Ne.system)return Ne.system;Ne.system=this,this.reset()}reset(){this.controllerList=[],this.lastJoystick=void 0,this.pressed={},this.controllerType="xbox",this.defineVibrations(),this.setVibration()}defineVibrations(){this.newVibration={DEFAULT:{DUR:0,DELAY:0,WEAK:.4,STRONG:.4},TINY:{DUR:100,DELAY:0,WEAK:.05,STRONG:0},SMALL:{DUR:100,DELAY:0,WEAK:.15,STRONG:0},BIG:{DUR:600,DELAY:0,WEAK:.5,STRONG:0},BOOST:{DUR:3e3,DELAY:0,WEAK:0,STRONG:.25},PICKUP:{DUR:200,DELAY:0,WEAK:.2,STRONG:0},RAMP:{DUR:200,DELAY:0,WEAK:0,STRONG:.15},SLOW:{DUR:400,DELAY:0,WEAK:0,STRONG:.15},CRASH:{DUR:300,DELAY:0,WEAK:.4,STRONG:.4}}}setVibration(e="DEFAULT"){const t=this.newVibration[e];this.vibrateProps={BASE:t.DUR,TIMER:t.DUR,DELAY:t.DELAY,WEAK:t.WEAK,STRONG:t.STRONG}}vibrateController(e,t,s,i){const a=$e.data.controller;a.pad.vibrationActuator&&"function"==typeof a.pad.vibrationActuator.playEffect&&a.pad.vibrationActuator.playEffect("dual-rumble",{startDelay:e,duration:t,weakMagnitude:s,strongMagnitude:i})}update(){if(-1===$e.data.controller.index&&this.controllerList.length>0){const e=this.controllerList;for(let t=0;t<e.length;t++){const s=navigator.getGamepads()[e[t]];if(void 0!==s){const i=this.checkJoysticks(s),a=this.checkButtons(s);if(void 0!==i||void 0!==a)return void this.setController(e[t],s)}}}else if(this.controllerList.length>0){this.vibrateProps.TIMER>0&&this.checkVibrations();const e=$e.data.controller;e.pad=navigator.getGamepads()[e.index],void 0!==e.pad&&(this.checkJoysticks(e.pad),this.checkButtons(e.pad))}}checkVibrations(){const e=this.vibrateProps,t=e.TIMER/e.BASE;this.vibrateController(e.DELAY,e.TIMER,t*e.WEAK,t*e.STRONG),e.TIMER-=1e3*$e.data.game.time.loop,e.TIMER<=0&&this.setVibration()}setController(e,t){const s=$e.data.controller;s.index=e,s.pad=t;let i="xbox";s.pad.id.toLowerCase().includes("045e")||s.pad.id.toLowerCase().includes("xbox")?i="xbox":(s.pad.id.toLowerCase().includes("054c")||s.pad.id.toLowerCase().includes("playstation"))&&(i="ps"),this.controllerType=i,$e.data.changeInputMethod(i)}checkJoysticks(e){const t=.5,s=e.axes[0]>t||e.axes[2]>t,i=e.axes[0]<-.5||e.axes[2]<-.5,a=e.axes[1]>t||e.axes[3]>t,o=e.axes[1]<-.5||e.axes[3]<-.5;let n;if(s||i||o||a?($e.data.changeInputMethod(this.controllerType),!o||s||i?!a||s||i?!i||o||a?!s||o||a?s&&o?n="RIGHT":s&&a?n="DOWN RIGHT":i&&o?n="LEFT":i&&a&&(n="DOWN LEFT"):n="RIGHT":n="LEFT":n="DOWN":n="UP"):this.lastJoystick=void 0,this.lastJoystick!==n)return this.lastJoystick=n,void 0!==n&&Le.system.routeInputType(n),n}checkButtons(e){function t(e){return"object"==typeof e?e.pressed:1==e}if(t(e.buttons[4])&&t(e.buttons[5]))return Le.system.routeInputType("RESET"),this.pressed[4]=!0,void(this.pressed[5]=!0);let s;for(let i=0;i<e.buttons.length;i++)if(t(e.buttons[i])){if(this.pressed[i])return;switch(i){case 0:s="FORWARD";break;case 1:s="BACKWARD";break;case 2:break;case 3:s="CYCLEMODE";break;case 4:s="LEFT";break;case 5:s="RIGHT";break;case 6:case 7:s="BOOST";break;case 8:case 9:s="TOGGLE PLAY";break;case 10:case 11:break;case 12:s="UP";break;case 13:s="DOWN";break;case 14:s="LEFT";break;case 15:s="RIGHT";break;case 16:case 17:s="TOGGLE PLAY"}this.pressed[i]=!0,$e.data.changeInputMethod(this.controllerType),Le.system.routeInputType(s)}else this.pressed[i]=!1;return s}}class Be extends ae{constructor(e,t,s){if(super(e,t,64,64,s,1),Be.system)return Be.system;Be.system=this,this.hitbox=new ne(this,20,32,24,24),this.reset()}reset(){super.reset(),this.type="Player",this.defineEffect("PLAYER"),this.isAnimated=!1,this.obstaclesHit=[],this.lastBuoyId=-1,this.shadowOffset=0,this.animPose=0,this.konamiActive=!1,this.classicFinishLine=!1,this.surfboardFrame={current:1,updated:this.creation},this.dogEndPose={current:7,updated:this.creation},this.spriteImage={characters:G,surfboard:z,shield:Q,dog:G,swimming:V},this.sprite=this.spriteImage.characters,this.resetSwim()}move(){}update(){super.update(),this.checkBoundaries(),this.cycleFrame(this.surfboardFrame,this.spriteImage.surfboard),this.updateState(),"STOP"!==$e.data.player.state&&"CRASH"!==$e.data.player.state&&this.updateSpeed()}checkBoundaries(){const e=$e.data.game.distance.xPx,t=$e.data.game.distance.yPx;switch($e.data.session.settings.mode){case"CLASSIC":!this.swimming&&e<-6400&&t<8e3&&Re.system.buildCove();break;case"SPEED":(e>576||e<-576)&&this.bounce();break;case"BUOY":(e>960||e<-960)&&this.bounce()}}changeCharacter(e,t=!1){if(this.konamiActive)return;const s=$e.data.session.settings.character;let i=s;if(t)i=e;else{if(!(s+e>=1&&s+e<=7))return;i=s+e}this.frame.current=i,this.frame.updated=$e.data.game.time.elapsed,$e.data.session.settings.character=i,$e.data.saveGameSettings(),Ne.system.setVibration("SMALL")}changeState(e){const t=$e.data.player;if(!(t.distance.air>0&&"AIR"!==e.substring(0,3)||"BOOST"===e&&$e.data.game.powerups.current<=0||t.timer.crash>0)){switch(e){case"DEFAULT":t.speed.max=t.speed.base,Ne.system.setVibration("TINY");break;case"STOP":t.speed.current=0,t.speed.raw=0,t.speed.max=0,this.changeDirection("UP"),this.changePose(1),Ne.system.setVibration("TINY");break;case"CRASH":t.speed.current=0,t.speed.raw=0,t.speed.max=0,this.changePose(7);break;case"AIR1":case"AIR2":case"AIR3":case"AIR4":t.speed.max=t.speed.base+t.speed.airAdd,this.changePose(9+$e.data.player.trick);break;case"BOOST":this.boost()}$e.data.player.state=e}}changeDirection(e){const t=$e.data.player;if(!(t.timer.crash>0||t.distance.bounce>0)){if(t.distance.air>0){if("DOWN"!==e)return;this.newTrick()}switch("STOP"===t.state&&this.changeState("DEFAULT"),e){case"LEFT":t.angle.current=-132,this.changePose(2);break;case"DOWN LEFT":t.angle.current=-150,this.changePose(3);break;case"DOWN":t.angle.current=180,this.changePose(4);break;case"DOWN RIGHT":t.angle.current=150,this.changePose(5);break;case"RIGHT":t.angle.current=132,this.changePose(6)}t.direction=e,t.angle.radian=(t.angle.current-90)*Math.PI/180}}updateState(){const e=$e.data.player.timer,t=$e.data.player.distance;t.air>0&&(t.air-=$e.data.player.speed.current,t.air<=0)?this.endAir():t.boost>0&&(t.boost-=$e.data.player.speed.current,t.boost<=0)?this.endBoost():t.bounce>0&&(t.bounce-=$e.data.player.speed.current,t.bounce<=0)?this.endBounce():t.immunity>0&&(t.immunity-=$e.data.player.speed.current,t.immunity<=0)?this.endImmune():(e.crash>0&&(e.crash-=$e.data.game.time.loop*$e.data.game.time.scale,e.crash<=0&&this.endCrash()),this.swimming&&("CRASH"===$e.data.player.state?(this.frame.current<5&&this.changeFrame(5),this.cycleSwimFrame(5,6)):this.cycleSwimFrame(1,4)))}updateSwim(){const e=$e.data.player.timer;e.swim>0&&(e.swim-=$e.data.game.time.loop*$e.data.game.time.scale,e.swim<=0&&this.swim())}cycleSwimFrame(e,t){if($e.data.game.time.elapsed>=this.frame.updated+1/this.fps){let s=this.frame.current+1;s>t&&(s=e),this.changeFrame(s)}}cycleDogWinFrame(e,t){if($e.data.game.time.elapsed>=this.dogEndPose.updated+1/4){let s=this.dogEndPose.current+1;s>t&&(s=e),this.dogEndPose.current=s,this.dogEndPose.updated=$e.data.game.time.elapsed}}updateSpeed(){const e=$e.data.player.speed;let t=1;($e.data.player.distance.air>0||$e.data.player.distance.boost>0)&&(t=8),e.raw<e.initial?e.raw=e.initial:e.raw<e.max?e.raw+=e.accel*t*$e.data.game.time.scale:e.raw>e.max?e.raw-=e.accel*t*$e.data.game.time.scale:e.raw=e.max,e.current=e.raw*$e.data.game.time.scale}changePose(e){this.swimming||(e||(e=this.pose+1),this.pose=e)}stop(){this.changePose(1)}slow(){$e.data.player.speed.raw=.8*$e.data.player.speed.raw,Ne.system.setVibration("SLOW")}superslow(){$e.data.player.speed.raw=.6*$e.data.player.speed.raw,Ne.system.setVibration("SLOW")}crash(){this.changeState("CRASH"),$e.data.player.timer.crash=1,$e.data.game.enhancements.collectedDog?($e.data.game.enhancements.collectedDog=!1,$e.data.game.shields.current=0,Ve.system.announceMessage("lostShield")):$e.data.game.enhancements.infiniteLives?Ve.system.announceMessage("playerCrash"):($e.data.game.lives.current-=1,Ve.system.announceMessage("playerLifeUsed")),Ve.system.refreshInterface(),$e.data.game.lives.current<=0?this.lose():Ne.system.setVibration("CRASH")}endCrash(){this.changeState("STOP"),$e.data.player.timer.crash=0,this.immune()}air(e=1600){this.changeDirection("DOWN"),$e.data.player.distance.air=e,this.shadowOffset=0,this.newTrick(),Ne.system.setVibration("RAMP")}newTrick(){$e.data.player.trick=$e.data.player.trick%4+1,this.changeState("AIR"+$e.data.player.trick),Ne.system.setVibration("SMALL")}endAir(){this.changeState("DEFAULT"),this.changeDirection("DOWN"),$e.data.player.trick=0,$e.data.player.distance.air=0,Ne.system.setVibration("SLOW"),this.immune()}boost(){$e.data.game.enhancements.infinitePowerups?Ve.system.announceMessage("playerBoost"):($e.data.game.powerups.current-=1,$e.data.game.powerups.numUsed+=1,Ve.system.announceMessage("playerBoostUsed")),$e.data.player.distance.boost=2400,$e.data.player.speed.max=$e.data.player.speed.base+$e.data.player.speed.boostAdd,Ve.system.refreshInterface(),Ne.system.setVibration("BOOST")}endBoost(){this.changeState("DEFAULT"),$e.data.player.distance.boost=0}powerup(){$e.data.game.powerups.numCollected+=1,$e.data.game.powerups.current>=$e.data.game.powerups.max||($e.data.game.powerups.current+=1,Ve.system.refreshInterface(),Ne.system.setVibration("PICKUP"),Ve.system.announceMessage("collectedBoost"))}heart(){$e.data.game.lives.numCollected+=1,$e.data.game.lives.current>=$e.data.game.lives.max||($e.data.game.lives.current+=1,Ve.system.refreshInterface(),Ne.system.setVibration("PICKUP"),Ve.system.announceMessage("collectedLife"))}coin(){$e.data.game.coins+=1,Ne.system.setVibration("PICKUP"),Ve.system.announceMessage("collectedCoin")}spin(){$e.data.player.speed.raw=.8*$e.data.player.speed.raw;const e=$e.data.player.direction;let t="DOWN";const s=["LEFT","DOWN LEFT","RIGHT","DOWN RIGHT"];switch(e){case"DOWN":t=s[$e.data.randomNumberBetween(0,3)];break;case"DOWN RIGHT":case"RIGHT":t=s[$e.data.randomNumberBetween(0,1)];break;case"DOWN LEFT":case"LEFT":t=s[$e.data.randomNumberBetween(2,3)]}this.changeDirection(t),Ve.system.announceMessage("playerSpun",e.toLowerCase()),Ne.system.setVibration("SLOW")}bounce(){this.spin(),$e.data.player.distance.bounce=32}endBounce(){$e.data.player.distance.bounce=0}immune(){$e.data.player.distance.immunity=96}endImmune(){$e.data.player.distance.immunity=0}rescueDog(){$e.data.game.enhancements.collectedDog=!0,"CLASSIC"===$e.data.session.settings.mode&&($e.data.game.shields.current=$e.data.game.shields.max,Ve.system.refreshInterface()),Ne.system.setVibration("PICKUP")}dogShield(){$e.data.game.shields.current-=1,Ve.system.refreshInterface(),Ne.system.setVibration("SMALL"),Ve.system.announceMessage("playerShieldUsed")}grabbedByEnemy(){$e.data.game.lives.current=0,Ve.system.refreshInterface(),this.lose(!0)}arriveAtIsland(){$e.data.game.isAtIsland=!0,Xe.system.changeGameState("OVER");const e=$e.data.player.speed;e.current=0,e.raw=0,e.max=0,this.changePose(9),Ne.system.setVibration("BIG")}triggeredBuoy(e){e-1===this.lastBuoyId&&($e.data.game.buoys+=1,Ve.system.announceMessage("triggeredBuoy")),this.lastBuoyId=e,Ne.system.setVibration("SMALL")}missedBuoy(e){$e.data.game.buoys=0,this.lastBuoyId=e,Ne.system.setVibration("SLOW"),Ve.system.announceMessage("missedBuoy")}konamiSprite(){this.konamiActive=!0,this.changeFrame(8)}startSwimTimer(){$e.data.player.timer.swim=5}swim(){this.swimming=!0,this.width=128,this.height=128,this.hitbox=new ne(this,32,80,64,40),this.sprite=this.spriteImage.swimming,this.pose=1,this.frame.current=1,$e.data.player.timer.swim=0,$e.data.player.speed.base=$e.data.player.speed.base+3,$e.data.player.speed.max=$e.data.player.speed.base,$e.data.game.enhancements.codeUsed=!0,Ve.system.sendNotification("EVENT",8e3),Ne.system.setVibration("BIG")}resetSwim(){this.swimming=!1,this.width=64,this.height=64,this.hitbox=new ne(this,20,32,24,24),this.sprite=this.spriteImage.characters,this.changeCharacter($e.data.session.settings.character,!0)}lose(e=!1){$e.data.game.grabbedByEnemy=e,Xe.system.changeGameState("OVER");const t=$e.data.player.speed;t.current=0,t.raw=0,t.max=0,e?this.changePose(8):this.changeState("CRASH"),Ne.system.setVibration("BIG")}enablePlayer(){this.changeState("DEFAULT"),this.changeDirection("DOWN"),Ne.system.setVibration("BIG"),this.frame.updated=$e.data.game.time.elapsed,this.surfboardFrame.updated=$e.data.game.time.elapsed}drawShadow(){const e=$e.data.ctx;$e.data.player.distance.air<=256?this.shadowOffset=$e.data.player.distance.air/4:this.shadowOffset<64?this.shadowOffset+=3*$e.data.game.time.scale:this.shadowOffset=64,e.beginPath(),e.arc(this.x,this.y+16+this.shadowOffset,20-this.shadowOffset/12,0,2*Math.PI),e.fillStyle="rgba(0,0,0,"+(.6-this.shadowOffset/200)+")",e.fill()}renderCharacterSelection(){if(this.cycleFrame(this.surfboardFrame,this.spriteImage.surfboard),$e.data.game.time.elapsed>=this.frame.updated+1/this.fps){this.frame.updated=$e.data.game.time.elapsed;const e=[4,5,6,6,6,5,4,3,2,2,2,3];this.changePose(e[this.animPose]),this.animPose+=1,this.animPose>=e.length&&(this.animPose=0)}if(this.konamiActive)super.drawLayer(this.spriteImage.surfboard,0,0,this.pose,this.surfboardFrame.current),this.sprite.draw(this.x+(0-this.width/2),this.y-this.height/2,this.pose-1,7);else for(let e=1;e<=7;e++){const t=116*(e-$e.data.session.settings.character);let s=4;e===$e.data.session.settings.character&&(s=this.pose),super.drawLayer(this.spriteImage.surfboard,t,0,s,this.surfboardFrame.current),this.sprite.draw(this.x+(t-this.width/2),this.y-this.height/2,s-1,e-1)}}draw(){if(this.swimming)super.draw();else{if($e.data.game.shields.current>0&&"OVER"!==$e.data.session.state&&super.drawLayer(this.spriteImage.shield,0,0,5-$e.data.game.shields.current,this.surfboardFrame.current),$e.data.player.distance.air>0&&this.drawShadow(),$e.data.player.distance.immunity>0&&($e.data.ctx.save(),Math.floor(4*$e.data.game.time.elapsed)%2==0?$e.data.ctx.globalAlpha=.3:$e.data.ctx.globalAlpha=.7),super.drawLayer(this.spriteImage.surfboard,0,0,this.pose,this.surfboardFrame.current),super.draw(),$e.data.game.enhancements.collectedDog){let e=this.pose;$e.data.game.isAtIsland&&(this.cycleDogWinFrame(7,9),e=this.dogEndPose.current),super.drawLayer(this.spriteImage.dog,0,0,e,9)}$e.data.player.distance.immunity>0&&$e.data.ctx.restore()}}}class Fe{constructor(){if(Fe.system)return Fe.system;Fe.system=this}}var He=s(27670);const _e={currentCharacter:B.pz.getInteger("lastSelectedPlayer"),highVisibilityMode:B.pz.getBoolean("highVisibilityActive"),gameSpeed:B.pz.getBoolean("reducedSpeedActive")?.5:1,mode:function(e){switch(e){case"SPEED":return F.Speed;case"BUOY":return F.Buoy;case"CLASSIC":default:return F.Classic}}(B.pz.getString("lastSelectedMode")),gameState:"MENU",classic_bestScore:B.pz.getInteger("classicBestScore"),speed_bestScore:B.pz.getInteger("speedBestScore")<0?-1:B.pz.getInteger("speedBestScore")/1e3,buoy_bestScore:B.pz.getInteger("buoyBestScore")};var We;function je(e){return{type:We.UPDATE_STATS,...e}}function ze(){return{type:We.RESET_STATS,classic_bestScore:-1,buoy_bestScore:-1,speed_bestScore:-1,currentCharacter:4}}!function(e){e.RESET_STATS="RESET_STATS",e.UPDATE_GAME_STATE="UPDATE_GAME_STATE",e.UPDATE_STATS="UPDATE_STATS"}(We||(We={}));const Ge=(0,He.MT)((function(e=_e,t){switch(t.type){case We.UPDATE_STATS:return{...e,currentCharacter:t.currentCharacter,mode:t.mode,highVisibilityMode:t.highVisibilityMode,gameSpeed:t.gameSpeed,classic_bestScore:Math.max(e.classic_bestScore,t.classic_bestScore),buoy_bestScore:Math.max(e.buoy_bestScore,t.buoy_bestScore),speed_bestScore:e.speed_bestScore<0?t.speed_bestScore:Math.min(e.speed_bestScore,t.speed_bestScore)};case We.UPDATE_GAME_STATE:return{...e,gameState:t.gameState};case We.RESET_STATS:return{...e,classic_bestScore:t.classic_bestScore,buoy_bestScore:t.buoy_bestScore,speed_bestScore:t.speed_bestScore,currentCharacter:t.currentCharacter};default:return e}}),_e);class Ve{constructor(){if(Ve.system)return Ve.system;Ve.system=this,this.string=new Fe,this.reset(),Ge.subscribe(this.displayBestCounter.bind(this))}reset(){this.container=$("game-ui"),this.notify=this.createNew("div",this.container,"ui-notify"),this.notifyClear=void 0,this.destroyInterface(),this.lives=void 0,this.counter=void 0,this.power=void 0}update(){this.updateCounter()}buildMenu(){this.destroyInterface();const e=this.createNew("div",this.container,"ui-top");this.buildTopIcons(e);const t=$e.data.session.settings.mode;this.createNew("h1",this.container,"ui-title").textContent=B.pz.getString(t.toLowerCase()+"Title");const s=$e.data.session.inputType,i=this.createNew("h2",this.container,"ui-info"),a=this.createNew("p",i);a.appendChild(this.getSelectionElement(s));this.createNew("span",a).textContent=" "+B.pz.getString("menuSelectionInfo"),this.createNew("br",i);const o=this.createNew("p",i);o.appendChild(this.getActionElement(s));this.createNew("span",o).textContent=" "+B.pz.getString("menuActionInfo");const n=this.createNew("div",this.container,"ui-selection"),r=this.createNew("button",n);r.appendChild(document.querySelector("#icon-arrow-left-template").cloneNode(!0).content),r.tabIndex=-1,this.createNew("div",n,"selection-box");const h=this.createNew("button",n);h.appendChild(document.querySelector("#icon-arrow-right-template").cloneNode(!0).content),h.tabIndex=-1,r.addEventListener("click",(function(){Be.system.changeCharacter(-1)}),!1),h.addEventListener("click",(function(){Be.system.changeCharacter(1)}),!1)}destroyInterface(){const e=this.container.childNodes;for(let t=e.length-1;t>=0;t--)e[t]!==this.notify&&this.container.removeChild(e[t]);this.clearNotification()}buildGameInterface(){this.destroyInterface();const e=this.createNew("div",this.container,"ui-top");this.buildTopIcons(e),$("game-tint").classList.remove("visible"),this.refreshInterface()}buildPauseInterface(){this.buildGameInterface();const e=B.pz.getString("pauseTitle");this.buildTitleInfo(e,B.pz.getString("pauseInfo")),this.refreshInterface(),$("game-tint").classList.add("visible")}buildOverInterface(){const e=B.pz.getString("overTitle");this.buildTitleInfo(e,B.pz.getString("overInfo")),this.refreshInterface()}buildTitleInfo(e,t){this.createNew("h1",this.container,"ui-title").textContent=e;const s=this.createNew("h2",this.container,"ui-info"),i=this.getActionElement($e.data.session.inputType);s.appendChild(i);this.createNew("span",s).textContent=" "+t}buildTopIcons(e){const t=this.createNew("div",e,"top-stats");this.lives=this.createNew("div",t,"stats-lives");const s=this.createNew("div",t,"stats-counter");this.counter=this.createNew("p",s,"counter-amount"),this.power=this.createNew("div",t,"stats-power"),this.refreshInterface(),this.displayBestCounter()}sendNotification(e,t=5e3){const s=this,i=$e.data.session.settings.mode;this.clearNotification();const a=this.createNew("div",this.notify,"notify-text");let o;switch(e){case"KONAMI":o=B.pz.getStringF("codeKonami",B.pz.getString("codeScoring"));break;case"MICROSOFT":o=B.pz.getStringF("codeMicrosoft",B.pz.getString("codeScoring"));break;case"EDGE":o=B.pz.getStringF("codeEdge",B.pz.getString("codeScoring"));break;case"EVENT":o=B.pz.getString("codeScoring");break;case"MODE":o=B.pz.getStringF("gameMode",B.pz.getString(i.toLowerCase()+"Title"));break;case"SCORE":let e=$e.data.session.bestScore[i.toLowerCase()];"SPEED"===i&&(e=$e.data.formatTime(e)),o=B.pz.getStringF("newBestScore",B.pz.getString(i.toLowerCase()+"Descriptor"),e,B.pz.getString(i.toLowerCase()+"Unit"))}this.announceMessage("notification",o),a.textContent=o,this.notifyClear=setTimeout((function(){s.notify.innerHTML=window.trustedTypes?trustedTypes.emptyHTML:""}),t)}announceMessage(e,t){}clearNotification(){clearTimeout(this.notifyClear),this.notify.innerHTML=window.trustedTypes?trustedTypes.emptyHTML:""}refreshInterface(){this.updateIcons(),this.updateCounter()}updateIcons(){if(this.lives.innerHTML=window.trustedTypes?trustedTypes.emptyHTML:"",this.power.innerHTML=window.trustedTypes?trustedTypes.emptyHTML:"",$e.data.game.enhancements.infiniteLives&&$e.data.game.shields.current<=0)this.createNew("div",this.lives,void 0,"icon life-full"),this.createNew("div",this.lives,void 0,"icon infinite");else for(let e=1;e<=$e.data.game.lives.max;e++){let t="life-empty";e<=$e.data.game.shields.current?t="shield":e<=$e.data.game.lives.current&&(t="life-full"),this.createNew("div",this.lives,void 0,"icon "+t)}if($e.data.game.enhancements.infinitePowerups)this.createNew("div",this.power,void 0,"icon powerup-full"),this.createNew("div",this.power,void 0,"icon infinite");else for(let e=1;e<=$e.data.game.powerups.max;e++){let t="powerup-empty";e<=$e.data.game.powerups.current&&(t="powerup-full"),this.createNew("div",this.power,void 0,"icon "+t)}}displayBestCounter(){const e=$e.data.session.settings.mode;let t=$e.data.session.bestScore[e.toLowerCase()];"SPEED"===e?t=$e.data.formatTime(t):t<0&&(t=0),this.counter.innerHTML=window.trustedTypes?trustedTypes.emptyHTML:"",this.counter.appendChild(document.querySelector("#icon-king-template").cloneNode(!0).content);this.createNew("span",this.counter).textContent=" "+B.pz.getStringF("bestScoreMenuDisplay",t,B.pz.getString(e.toLowerCase()+"Unit"))}updateCounter(){let e;const t=$e.data.session.settings.mode;switch(t){case"CLASSIC":e=Math.floor($e.data.game.distance.y);break;case"SPEED":e=$e.data.formatTime($e.data.game.time.elapsed-2*$e.data.game.coins);break;case"BUOY":e=$e.data.game.buoys+" "}this.counter.textContent=e+B.pz.getString(t.toLowerCase()+"Unit")}createNew(e,t,s,i){const a=document.createElement(e);return void 0!==s&&(a.id=s),void 0!==i&&(a.className=i),void 0!==t&&t.insertAdjacentElement("beforeend",a),a}getActionElement(e){let t;switch(e){case"mouse":case"touch":t=document.querySelector("#icon-button-text-action-template").cloneNode(!0).content,t.querySelector("span").textContent=B.pz.getString(e+"Action");break;case"ps":t=document.querySelector("#icon-button-icon-action-template").cloneNode(!0).content,t.querySelector("span").appendChild(document.querySelector("#icon-ps-x-template").cloneNode(!0).content);case"xbox":case"controller":t=document.querySelector("#icon-button-icon-action-template").cloneNode(!0).content,t.querySelector("span").appendChild(document.querySelector("#icon-xbox-a-template").cloneNode(!0).content);case"keyboard":default:t=document.querySelector("#icon-button-keytext-action-template").cloneNode(!0).content,t.querySelector("span").textContent=B.pz.getString("keyboardAction")}return t}getSelectionElement(e){let t,s;switch(e){case"mouse":case"touch":case"keyboard":t=document.querySelector("#icon-button-key-select-template").cloneNode(!0).content,s=t.querySelectorAll("span"),s[0].appendChild(document.querySelector("#icon-key-left-template").cloneNode(!0).content),s[1].appendChild(document.querySelector("#icon-key-right-template").cloneNode(!0).content);break;case"ps":case"xbox":case"controller":default:t=document.querySelector("#icon-button-key-select-template").cloneNode(!0).content,s=t.querySelectorAll("span"),s[0].appendChild(document.querySelector("#icon-dpad-left-template").cloneNode(!0).content),s[1].appendChild(document.querySelector("#icon-dpad-right-template").cloneNode(!0).content)}return t}}function qe(e){if("number"!=typeof e)return"----";let t=14,s=8;return e<0&&(e=3599),e>=3600&&(t=12,s=10),new Date(1e3*e).toISOString().substr(t,s)}function Ue(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Ke{static getSpeedScore(){return $e.data.game.time.elapsed-2*$e.data.game.coins}constructor(){if(Ue(this,"localData",void 0),Ke.offline)return Ke.offline;Ke.offline=this,this.loadData(),Ge.subscribe(this.loadData.bind(this))}loadData(){const e=Ge.getState();this.localData={settings:{character:e.currentCharacter,mode:e.mode,highVisibility:e.highVisibilityMode,gameSpeed:e.gameSpeed},classic:{bestScore:e.classic_bestScore},speed:{bestScore:e.speed_bestScore},buoy:{bestScore:e.buoy_bestScore}}}saveData(e){Ge.dispatch(je(e)),_.saveBuoyHighScore(e.buoy_bestScore),_.saveClassicHighScore(e.classic_bestScore),_.saveSpeedHighScore(e.speed_bestScore),_.saveGameMode(e.mode),_.saveHighVisibilityMode(e.highVisibilityMode),_.saveReducedSpeedMode(e.gameSpeed<1),_.saveDefaultSurfer(e.currentCharacter)}resetData(){Ge.dispatch(ze()),_.resetAllStats()}storeClassicStats(){const e=Math.floor($e.data.game.distance.y),t=$e.data.game;_.recordGameEnd({...this.getCommonStats(F.Classic,e),loseCondition:t.grabbedByEnemy?"kraken":"lives",dogCollected:t.enhancements.collectedDog}),!$e.data.game.enhancements.codeUsed&&e>this.localData.classic.bestScore&&($e.data.session.bestScore.classic=e,Ve.system.sendNotification("SCORE"),this.saveData({...Ge.getState(),classic_bestScore:e}))}getCommonStats(e,t){const s=$e.data.game;return{gameMode:e,score:e===F.Speed?Math.floor(1e3*t):t,konamiCodeUsed:Be.system.konamiActive,msftCodeUsed:s.enhancements.infiniteLives,edgeCodeUsed:s.enhancements.infinitePowerups,powerUpsUsed:s.powerups.numUsed,powerUpsCollected:s.powerups.numCollected}}storeSpeedStats(){const e=this.localData.speed,t=Ke.getSpeedScore();_.recordGameEnd({...this.getCommonStats(F.Speed,t),livesCollected:$e.data.game.lives.numCollected}),!$e.data.game.enhancements.codeUsed&&(t<e.bestScore||e.bestScore<0)&&$e.data.game.isAtIsland&&($e.data.session.bestScore.speed=t,Ve.system.sendNotification("SCORE"),this.saveData({...Ge.getState(),speed_bestScore:t}))}storeBuoyStats(){const e=this.localData.buoy,t=$e.data.game,s=t.buoys;_.recordGameEnd(this.getCommonStats(F.Buoy,t.buoys)),!$e.data.game.enhancements.codeUsed&&s>=e.bestScore&&Ve.system.sendNotification("SCORE")}storeBuoyStreak(){const e=$e.data.game.buoys,t=this.localData.buoy;!$e.data.game.enhancements.codeUsed&&e>t.bestScore&&(t.bestScore=e,$e.data.session.bestScore.buoy=e,this.saveData({...Ge.getState(),buoy_bestScore:e}))}}function Ze(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let Ye;Ue(Ke,"offline",void 0),function(e){e.Menu="MENU",e.Play="PLAY",e.Pause="PAUSE",e.Over="OVER"}(Ye||(Ye={}));class $e{constructor(e){if(Ze(this,"canvas",null),Ze(this,"ctx",null),Ze(this,"session",void 0),Ze(this,"controller",void 0),Ze(this,"player",void 0),Ze(this,"game",void 0),$e.data)return $e.data;$e.data=this,this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.defineSessionSettings(),this.resetCurrentPlayerData(),this.resetCurrentGameData(),Ge.subscribe(this.loadGameSettings.bind(this))}defineSessionSettings(){const e=Ge.getState();this.session={state:Ye.Menu,settings:{mode:e.mode,character:e.currentCharacter,highVisibility:e.highVisibilityMode,gameSpeed:e.gameSpeed},bestScore:{classic:e.classic_bestScore,speed:e.speed_bestScore,buoy:e.buoy_bestScore},isFlyoutActive:!1,isHighContrast:!1,inputType:"keyboard",inputLastChange:Date.now(),width:0,height:0,xOrigin:0,yOrigin:0,xPercent:.5,yPercent:.4},this.controller={index:-1,pad:-1,pressed:{}}}saveGameSettings(){Ke.offline.saveData({mode:this.session.settings.mode,currentCharacter:this.session.settings.character,highVisibilityMode:this.session.settings.highVisibility,gameSpeed:this.session.settings.gameSpeed,classic_bestScore:this.session.bestScore.classic,buoy_bestScore:this.session.bestScore.buoy,speed_bestScore:this.session.bestScore.speed,gameState:this.session.state})}loadGameSettings(){const e=Ge.getState();this.session.settings.mode=e.mode,this.session.settings.character=e.currentCharacter,this.session.settings.highVisibility=e.highVisibilityMode,this.session.settings.gameSpeed=e.gameSpeed,this.session.bestScore.classic=e.classic_bestScore,this.session.bestScore.speed=e.speed_bestScore,this.session.bestScore.buoy=e.buoy_bestScore}setupNewGame(){this.resetCurrentPlayerData(),this.resetCurrentGameData(),this.loadGameSettings(),this.defineCanvas(),this.clearCanvas(),this.definePlayerOrigin()}resetCurrentPlayerData(){this.player={state:"STOP",direction:"DOWN",distance:{air:0,boost:0,bounce:0,immunity:0},angle:{current:0,radian:0},trick:0,speed:{current:0,x:0,y:0,initial:1,raw:0,max:7.5,base:7.5,accel:.02,airAdd:2.5,boostAdd:5},timer:{crash:0,swim:0}}}resetCurrentGameData(){this.game={distance:{x:0,y:0,vector:0,mult:10,xPx:0,yPx:0},time:{elapsed:0,loop:0,scale:0},lives:{current:3,max:3,numCollected:0},powerups:{current:0,max:3,numCollected:0,numUsed:0},shields:{current:0,max:3},buoys:0,coins:0,isAtIsland:!1,grabbedByEnemy:!1,enhancements:{codeUsed:!1,infiniteLives:!1,infinitePowerups:!1,collectedDog:!1}}}update(e){this.game.time.loop=e/1e3,this.game.time.elapsed+=this.game.time.loop,this.game.time.scale=60*this.game.time.loop*this.session.settings.gameSpeed,this.player.speed.x=this.player.speed.current*Math.cos(this.player.angle.radian),this.player.speed.y=this.player.speed.current*Math.sin(this.player.angle.radian),this.game.distance.xPx+=this.player.speed.x,this.game.distance.yPx+=this.player.speed.y,this.game.distance.x+=this.player.speed.x/this.game.distance.mult,this.game.distance.y+=this.player.speed.y/this.game.distance.mult,this.game.distance.vector+=this.player.speed.current/this.game.distance.mult}randomNumberBetween(e,t){return Math.floor(e+(t+1-e)*Math.random())}randomArrayIndex(e){if(!Array.isArray(e))return e;return e[Math.floor(Math.random()*e.length)]}formatTime(e){return qe(e)}changeInputMethod(e){const t=Date.now(),s=t-this.session.inputLastChange;if(this.session.inputLastChange=t,!(this.session.inputType===e||s<300))switch(this.session.inputType=e,this.session.state){case"MENU":Ve.system.buildMenu();break;case"PAUSE":Ve.system.buildPauseInterface();break;case"OVER":Ve.system.buildOverInterface()}}defineCanvas(){const e=window.getComputedStyle(this.canvas.parentNode);this.session.width=parseInt(e.getPropertyValue("width"),10),this.session.height=parseInt(e.getPropertyValue("height"),10),this.canvas.style.width=this.session.width+"px",this.canvas.style.height=this.session.height+"px",this.canvas.width=this.session.width,this.canvas.height=this.session.height}clearCanvas(){this.ctx.clearRect(0,0,this.session.width,this.session.height)}checkHighContrast(){window.matchMedia("(forced-colors:active)").matches?$e.data.session.isHighContrast=!0:$e.data.session.isHighContrast=!1}definePlayerOrigin(){this.session.xOrigin=Math.floor(this.session.width*this.session.xPercent),this.session.yOrigin=Math.floor(this.session.height*this.session.yPercent)}}Ze($e,"data",void 0);class Je{constructor(){if(Je.system)return Je.system;Je.system=this}update(){this.evalPlayer=Re.system.player;const e=Re.system.obstacles.concat(Re.system.passives);this.evalImpacts=this.filterVisible(e),this.evalSurfers=Re.system.surfers,this.evalEnemies=Re.system.enemies,this.checkCollisions()}filterVisible(e){return e.filter((e=>function(e){return e.y>-64&&e.y<$e.data.session.height+64&&e.x>-64&&e.x<$e.data.session.width+64||"BUOYTRIGGER"===e.effect}(e)))}checkCollisions(){const e=$e.data.player.distance.air>0,t=this.evalSurfers.concat(this.evalEnemies);for(let s=0;s<this.evalImpacts.length;s++){const i=this.evalImpacts[s],a=64;if(this.collision(this.evalPlayer,i)&&!i.hitByPlayer&&!e&&i.y+a>$e.data.session.yOrigin){if(i.hitByPlayer=!0,this.evalPlayer.swimming&&"Sandbar256"!==i.type){if("HIT"===i.effect||"Objects32"===i.type||"RAMP"===i.effect)return void(i.sleep=!0);if("SLOW"===i.effect||"SUPERSLOW"===i.effect||"DOG"===i.effect)return}switch(i.effect){case"HIT":if($e.data.player.distance.immunity>0)continue;$e.data.game.enhancements.collectedDog&&Re.system.buildNewObject("DogCrash64",this.evalPlayer.x+24,this.evalPlayer.y+48,8),this.evalPlayer.crash();continue;case"SLOW":this.evalPlayer.slow();continue;case"SUPERSLOW":this.evalPlayer.superslow();continue;case"SPIN":this.evalPlayer.spin();continue;case"POWERUP":this.evalPlayer.powerup(),this.itemCollectAnimation(i);continue;case"HEART":this.evalPlayer.heart(),this.itemCollectAnimation(i);continue;case"COIN":this.evalPlayer.coin(),this.itemCollectAnimation(i);continue;case"RAMP":if($e.data.player.distance.boost>0&&"SPEED"!==$e.data.session.settings.mode)this.evalPlayer.air(2048);else if("SPEED"===$e.data.session.settings.mode)this.evalPlayer.air(512);else{if("CRASH"===$e.data.player.state)continue;this.evalPlayer.air(1024)}continue;case"DOG":this.evalPlayer.rescueDog(),this.itemCollectAnimation(i);continue;case"ISLAND":this.evalPlayer.arriveAtIsland();continue;case"SWIMTRIGGER":this.evalPlayer.startSwimTimer();continue;case"BUOYTRIGGER":this.evalPlayer.triggeredBuoy(i.buoyId),Ke.offline.storeBuoyStreak(),Re.system.confirmBuoyHit(i.buoyId);continue}}else this.collision(this.evalPlayer,i)&&"SWIMTRIGGER"===i.effect&&i.hitByPlayer?this.evalPlayer.updateSwim():"BUOYTRIGGER"===i.effect&&!i.hitByPlayer&&i.y<this.evalPlayer.y?(Ke.offline.storeBuoyStats(),this.evalPlayer.missedBuoy(i.buoyId),Re.system.denyBuoyHit(i.buoyId),i.hitByPlayer=!0):"AMBIENT"===i.effect&&i.y+a<this.evalPlayer.y?i.isAnimated=!0:"TENTACLE"===i.effect&&i.hitByPlayer&&!this.evalPlayer.swimming&&i.y+4*a<this.evalPlayer.y&&(Re.system.buildNewObject("Enemy",i.x,i.y),i.sleep=!0);for(let e=0;e<t.length;e++){const s=t[e];if(this.collision(s,i)&&-1===s.obstaclesHit.indexOf(i)){if(i.y<64)continue;switch(s.obstaclesHit.push(i),i.effect){case"HIT":case"RAMP":s.crash();continue;case"SLOW":case"SUPERSLOW":case"SPIN":s.slow();continue}}}}for(let e=0;e<this.evalEnemies.length;e++){const t=this.evalEnemies[e];this.collision(t,this.evalPlayer)&&!t.gotPlayer&&0===t.timer.crash&&($e.data.game.enhancements.collectedDog?(t.crash(),this.evalPlayer.dogShield()):(t.grab(),this.evalPlayer.grabbedByEnemy()));for(let e=0;e<this.evalSurfers.length;e++){const s=this.evalSurfers[e];this.collision(t,s)&&0===s.timer.crash&&s.crash()}}for(let t=0;t<this.evalSurfers.length;t++){const s=this.evalSurfers[t];this.collision(s,this.evalPlayer)&&0===$e.data.player.timer.crash&&0===s.timer.crash&&!e&&($e.data.game.enhancements.collectedDog?(s.crash(),this.evalPlayer.dogShield()):"BOOST"===$e.data.player.state||this.evalPlayer.swimming?s.crash():this.evalPlayer.crash())}}itemCollectAnimation(e){e.changePose(6),e.changeFrame(1),e.ending=!0,e.rippleOffset=void 0}collision(e,t){return e.hitbox.touches(t.hitbox)}}class Xe{constructor(e){if(Xe.system)return Xe.system;Xe.system=this,this.statistics=new Ke,this.core=new $e(e),this.router=new Le,this.controller=new Ne,this.spawn=new Re,this.collisions=new Je,this.interface=new Ve,this.water=$("game-water"),this.xWater=0,this.yWater=0,this.reflowCanvas(),this.changeGameState("MENU")}changeGameState(e){switch(e){case"MENU":this.initializeMenu();break;case"PLAY":if("PAUSE"===$e.data.session.state){this.initializeResume();break}if("MENU"===$e.data.session.state){this.initializeStart();break}case"OVER":this.initializeOver();break;case"PAUSE":this.initializePause()}var t;$e.data.checkHighContrast(),$e.data.session.state=e,Ge.dispatch((t=e,{type:We.UPDATE_GAME_STATE,gameState:t}))}gameLoop(e){if(Ne.system.update(),"PAUSE"!==$e.data.session.state&&!$e.data.session.isFlyoutActive)switch($e.data.update(e),$e.data.session.state){case"MENU":this.updateMenu();break;case"PLAY":this.updatePlay();break;case"OVER":this.updateOver()}}initializeMenu(){$e.data.setupNewGame(),Re.system.reset(),Ve.system.reset(),Ve.system.buildMenu(),Ve.system.sendNotification("MODE"),Re.system.createPlayer()}initializeStart(){$e.data.game.time.elapsed=0,Re.system.player.enablePlayer(),Ve.system.buildGameInterface(),Re.system.buildStartScene()}initializePause(){Ve.system.buildPauseInterface()}initializeResume(){Ve.system.buildGameInterface()}initializeOver(){$e.data.game;switch($e.data.session.settings.mode){case"CLASSIC":Ke.offline.storeClassicStats();break;case"SPEED":Re.system.chest&&Re.system.chest.startChestAnimation(),Ke.offline.storeSpeedStats();break;case"BUOY":Ke.offline.storeBuoyStats()}Ve.system.buildOverInterface()}updateMenu(){$e.data.clearCanvas(),Re.system.player.renderCharacterSelection()}updatePlay(){Je.system.update(),Re.system.update(),Re.system.everything.forEach((e=>{e.update(),e.move()})),Ve.system.update(),this.updateWater(),this.redrawAll()}updateOver(){Re.system.enemies.forEach((e=>{e.updateEnemyFrames()})),"SPEED"===$e.data.session.settings.mode&&Re.system.chest&&Re.system.chest.update(),this.redrawAll()}redrawAll(){$e.data.clearCanvas();const e=Re.system.everything.filter((e=>function(e){return e.hitbox.x+e.hitbox.width>-32&&e.hitbox.x<$e.data.session.width+32&&e.hitbox.y<$e.data.session.height+64||"ISLAND"===e.effect}(e)));$e.data.session.settings.highVisibility?e.forEach((e=>{e.draw(),e.drawHitbox()})):e.forEach((e=>{e.draw()})),"CLASSIC"===$e.data.session.settings.mode||$e.data.game.isAtIsland||this.drawBoundaries()}drawBoundaries(){const e=$e.data.session.width,t=$e.data.session.height,s=$e.data.session.xOrigin-$e.data.game.distance.xPx,i=$e.data.ctx,a="BUOY"===$e.data.session.settings.mode?960:576;i.beginPath(),i.rect(0,0,s-a,t),i.rect(s+a,0,e,t),i.fillStyle="rgba(255,255,255,0.2)",i.fill()}reflowCanvas(){const e=$e.data.session.xOrigin,t=$e.data.session.yOrigin;$e.data.defineCanvas(),$e.data.definePlayerOrigin();const s=$e.data.session.xOrigin-e,i=$e.data.session.yOrigin-t;switch(Re.system.everything.forEach((e=>{e.shift(s,i)})),$e.data.checkHighContrast(),this.updateWater(s,i),$e.data.session.state){case"MENU":Re.system.player&&Re.system.player.renderCharacterSelection();break;case"PLAY":this.changeGameState("PAUSE"),this.redrawAll();break;case"PAUSE":this.redrawAll()}}updateWater(e=0,t=0){this.xWater=(this.xWater+($e.data.player.speed.x-e))%256,this.yWater=(this.yWater+1.025*($e.data.player.speed.y-t))%256,this.water.style.backgroundPosition=Math.floor(-this.xWater)+"px "+Math.floor(-this.yWater)+"px"}}Xe.system=null;var Qe=s(325),et=s(52502),tt=s(57481),st=s(33832);function it(e){return a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"16",height:"16"},a.createElement("path",{d:"M1783 384q30 0 55 12t43 31 28 46 11 55v864q0 29-10 55t-29 45-43 32-55 12H137q-30 0-55-12t-43-31-28-46-11-55V528q0-28 10-54t29-46 43-32 55-12h1646zm9 144q0-11-9-16H137q-9 5-9 16v864q0 11 9 16h1646q9-5 9-16V528zM384 768H256V640h128v128zM256 896h256v128H256V896zm1152 0h256v128h-256V896zm0 256h256v128h-256v-128zm-1152 0h256v128H256v-128zm384 0h640v128H640v-128zm0-384H512V640h128v128zm0 128h128v128H640V896zm256 0h128v128H896V896zm256 0h128v128h-128V896zM896 768H768V640h128v128zm256 0h-128V640h128v128zm256 0h-128V640h128v128zm128-128h128v128h-128V640z"}))}function at(e){return a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"16",height:"16"},a.createElement("path",{d:"M1184 0q100 0 187 37t153 103 102 152 38 188v864q0 97-25 187t-71 168-110 143-142 110-169 71-187 25q-97 0-187-25t-168-71-143-110-110-142-71-169-25-187V480q0-100 37-187t103-153T548 38 736 0h448zm352 480q0-73-27-137t-76-112-112-75-137-28h-160v640H896V128H736q-73 0-137 27t-112 76-75 112-28 137v864q0 119 45 224t124 183 183 123 224 46q119 0 224-45t183-124 123-183 46-224V480z"}))}function ot(e){return a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"16",height:"16"},a.createElement("path",{d:"M1600 896q40 0 75 15t61 41 41 61 15 75v384q0 119-45 224t-124 183-183 123-224 46q-144 0-268-55t-226-156l-472-472q-28-28-43-65t-15-76q0-42 16-78t43-64 63-42 78-16q82 0 141 59l107 106V853q-59-28-106-70t-80-95-52-114-18-126q0-93 35-174t96-143 142-96T832 0q93 0 174 35t143 96 96 142 35 175q0 93-37 178t-105 149q35 9 63 30t49 52q45-25 94-25 50 0 93 23t69 66q45-25 94-25zM512 448q0 75 34 143t94 113V448q0-40 15-75t41-61 61-41 75-15q40 0 75 15t61 41 41 61 15 75v256q60-45 94-113t34-143q0-66-25-124t-69-101-102-69-124-26q-66 0-124 25t-102 69-69 102-25 124zm1152 640q0-26-19-45t-45-19q-34 0-47 19t-16 47-1 62 0 61-16 48-48 19q-37 0-50-23t-16-60 2-77 2-77-15-59-51-24q-34 0-47 19t-16 47-1 62 0 61-16 48-48 19q-37 0-50-23t-16-60 2-77 2-77-15-59-51-24q-34 0-47 19t-16 47-1 62 0 61-16 48-48 19q-26 0-45-19t-19-45V448q0-26-19-45t-45-19q-26 0-45 19t-19 45v787q0 23-8 42t-23 35-35 23-42 9q-22 0-42-8t-37-24l-139-139q-21-21-50-21t-50 21-22 51q0 29 21 50l472 473q84 84 184 128t219 45q93 0 174-35t142-96 96-142 36-175v-384z"}))}function nt(e){return a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"16",height:"16"},a.createElement("path",{d:"M1728 480q17 14 31 31t26 38q35 68 64 139t59 142q37 92 70 186t52 193q8 44 13 88t5 89q0 59-13 115t-45 107q-15 22-37 44t-48 39-56 28-57 11q-31 0-69-27t-77-64-71-76-54-62q-22-25-46-55t-52-49l-24-17q-20-14-42-21t-46-10-48-3-47-1H785q-24 0-47 4t-46 10-43 21l-24 17q-27 20-51 49t-47 55q-21 23-54 62t-71 76-76 64-70 27q-28 0-57-11t-55-28-49-39-37-44q-32-51-45-107T0 1386q0-45 5-89t13-88q8-46 23-100t36-114 43-120 48-119 49-110 46-96q11-20 25-37t32-33v-25q0-12 2-22t9-20 20-18q11-7 35-15t52-17 54-15 40-10q38-8 77-12t77-4q15 0 33 1t33 9h1q23 12 45 25t45 26h362q23-13 40-24t34-19 36-13 47-5q38 0 77 4t77 12q14 3 40 9t53 15 52 17 36 16q25 17 28 37t3 48zm69 1120q36-10 60-32t38-51 19-63 6-67q0-39-4-78t-12-78q-20-106-58-208t-80-202q-23-54-45-108t-50-106q-8-15-20-23t-23-18-20-20-8-32v-20q-57-20-115-32t-119-12h-11q-6 0-11 1-38 22-57 34t-37 18-38 7-61 1H897q-40 0-61-1t-38-7-37-18-57-34q-5-1-11-1t-11 0q-60 0-118 12t-116 32q0 28-5 44t-30 33q-11 6-20 15t-16 21q-28 51-50 105t-45 109q-41 99-79 201t-59 209q-8 38-12 77t-4 79q0 33 5 66t20 63 37 51 60 33q15-9 40-32t52-52 51-56 38-44q10-11 26-30t35-38 35-36 31-25q5-3 9-6t9-6q28-21 59-32t63-17 66-7 68-2h384q34 0 67 1t66 7 64 17 59 33q5 3 9 6t9 6q13 8 30 24t36 36 34 39 27 30q15 17 38 44t49 54 51 51 42 35zm-773-960q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45q0-26 19-45t45-19z"}))}function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function ht(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ct(e){e.stopPropagation()}class lt extends D.Z{constructor(...e){super(...e),ht(this,"handledProps",{managedClasses:void 0}),ht(this,"inputRefMap",new Map([["keyboard",a.createRef()],["mouse",a.createRef()],["touch",a.createRef()],["controller",a.createRef()]])),ht(this,"state",{selectedInput:"keyboard"}),ht(this,"renderHowToPlayContent",(e=>a.createElement(a.Fragment,null,a.createElement(w.nv,{className:this.props.managedClasses.howToPlayModal_paragraph},a.createElement("strong",null,B.pz.getString("classicModeTitleInline"))," ",B.pz.getString("howToPlayClassic")),a.createElement(w.nv,{className:this.props.managedClasses.howToPlayModal_paragraph},a.createElement("strong",null,B.pz.getString("speedModeTitleInline"))," ",B.pz.getString("howToPlaySpeed")),a.createElement(w.nv,{className:this.props.managedClasses.howToPlayModal_paragraph},a.createElement("strong",null,B.pz.getString("buoyModeTitleInline"))," ",B.pz.getString("howToPlayBuoy")),this.renderInputSection()))),ht(this,"onInputIconKeydown",(e=>{let t=this.state.selectedInput;if(e.keyCode===st.mW.arrowLeft||e.keyCode===st.mW.arrowUp)switch(this.state.selectedInput){case"keyboard":return;case"mouse":t="keyboard";break;case"touch":t="mouse";break;case"controller":t="touch"}else{if(e.keyCode!==st.mW.arrowRight&&e.keyCode!==st.mW.arrowDown)return;switch(this.state.selectedInput){case"keyboard":t="mouse";break;case"mouse":t="touch";break;case"touch":t="controller";break;case"controller":return}}e.stopPropagation(),this.setState({selectedInput:t})}))}render(){return a.createElement(Qe.S,rt({},this.unhandledProps(),{onKeyDown:ct,content:this.renderHowToPlayContent}))}componentDidUpdate(e,t){if(t.selectedInput!==this.state.selectedInput){const e=this.inputRefMap.get(this.state.selectedInput);if(e.current){const t=(0,i.findDOMNode)(e.current);t&&"function"==typeof t.focus&&t.focus()}}}renderInputSection(){return a.createElement("div",null,this.renderInputIcons(),this.getInputDescription(this.state.selectedInput))}getInputDescription(e){const t=this.props.managedClasses.howToPlayModal_icon,s=this.props.managedClasses.howToPlayModal_iconContainer,i=this.props.managedClasses.howToPlayModal_listItem;let o,n,r;switch(e){case"touch":o="howToPlayTouchMovement",n="howToPlayTouchBoost",r="howToPlayTouchRefresh";break;case"mouse":o="howToPlayMouseMovement",n="howToPlayMouseBoost",r="howToPlayMouseRefresh";break;case"controller":o="howToPlayControllerMovement",n="howToPlayControllerBoost",r="howToPlayControllerRefresh";break;default:case"keyboard":o="howToPlayKeyboardMovement",n="howToPlayKeyboardBoost",r="howToPlayKeyboardRefresh"}return a.createElement("ul",{className:this.props.managedClasses.howToPlayModal_bulletedList},a.createElement("li",{className:i},a.createElement("div",{"aria-hidden":!0,className:s},(h=t,a.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",className:h},a.createElement("path",{d:"M7.15 4.35c.2.2.5.2.7 0L9.5 2.71V6.5a.5.5 0 001 0V2.7l1.65 1.65a.5.5 0 00.7-.7l-2.5-2.5a.5.5 0 00-.7 0l-2.5 2.5a.5.5 0 000 .7z"}),a.createElement("path",{d:"M4.35 7.85a.5.5 0 10-.7-.7l-2.5 2.5a.5.5 0 000 .7l2.5 2.5a.5.5 0 00.7-.7L2.71 10.5H6.5a.5.5 0 000-1H2.7l1.65-1.65z"}),a.createElement("path",{d:"M15.65 7.85a.5.5 0 01.7-.7l2.5 2.5c.2.2.2.5 0 .7l-2.5 2.5a.5.5 0 01-.7-.7l1.64-1.65H13.5a.5.5 0 010-1h3.8l-1.65-1.65z"}),a.createElement("path",{d:"M7.85 15.65a.5.5 0 00-.7.7l2.5 2.5c.2.2.5.2.7 0l2.5-2.5a.5.5 0 00-.7-.7l-1.65 1.64V13.5a.5.5 0 00-1 0v3.8l-1.65-1.65z"})))),B.pz.getString(o)),a.createElement("li",{className:i},a.createElement("div",{"aria-hidden":!0,className:"icon life-small"}),B.pz.getString("howToPlayLife")),a.createElement("li",{className:i},a.createElement("div",{"aria-hidden":!0,className:"icon powerup-small"}),B.pz.getString(n)),a.createElement("li",{className:i},a.createElement("div",{"aria-hidden":!0,className:"icon shield-small"}),B.pz.getString("howToPlayShield")),a.createElement("li",{className:i},a.createElement("div",{"aria-hidden":!0,className:"icon coin-small"}),B.pz.getString("howToPlayCoin")),a.createElement("li",{className:i},a.createElement("div",{"aria-hidden":!0,className:s},function(e){return a.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",className:e},a.createElement("path",{d:"M3.07 9.05a7 7 0 0112.55-3.22l.13.17H12.5a.5.5 0 100 1h4a.5.5 0 00.5-.5v-4a.5.5 0 00-1 0v2.2a8 8 0 101.99 4.77.5.5 0 00-1 .08 7 7 0 11-13.92-.5z"}))}(t)),B.pz.getString(r)));var h}renderInputIcons(){const e=[[it,"keyboard"],[at,"mouse"],[ot,"touch"],[nt,"controller"]].map((e=>{const t=e[0],s=e[1],i=this.state.selectedInput===s;let o=this.props.managedClasses.howToPlayModal_inputButton;return i&&(o+=` ${this.props.managedClasses.howToPlayModal_inputButton__selected}`),a.createElement(k.XC,{role:"radio",key:s,innerRef:this.inputRefMap.get(s),onClick:()=>this.setState({selectedInput:s}),onKeyDown:this.onInputIconKeydown,className:o,"aria-checked":i,tabIndex:i?0:-1},t(""))}));return a.createElement("div",{className:this.props.managedClasses.howToPlayModal_inputButtonGroup,role:"radiogroup"},e)}}var dt=s(53363),pt=s(58934);const ut={howToPlayModal:{},howToPlayModal_bulletedList:{listStyle:"none",color:l.CH},howToPlayModal_listItem:{...(0,dt.Sh)("t7"),display:"flex",alignItems:"center",marginBottom:"0.25em"},howToPlayModal_icon:{color:l.CH,fill:"currentColor",padding:"4px",height:"16px",width:"16px"},howToPlayModal_iconContainer:{marginInlineEnd:"12px",display:"inline-block"},howToPlayModal_inputButton:{},howToPlayModal_inputButton__selected:{backgroundColor:pt.Ob},howToPlayModal_inputButtonGroup:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"12px",marginBottom:"8px"},howToPlayModal_paragraph:{marginBottom:"0.5em"}},mt=(0,h.ZP)(ut)(lt);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function yt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bt(e){e.stopPropagation()}const ft="#38c2ee",wt={...d.fn,neutralPalette:(0,tt.D)((0,et.in)(ft))};class St extends D.Z{constructor(e){super(e),yt(this,"handledProps",{setModal:void 0,dispatch:void 0,currentCharacter:void 0,gameState:void 0,highVisibilityMode:void 0,gameSpeed:void 0,mode:void 0,classic_bestScore:void 0,speed_bestScore:void 0,buoy_bestScore:void 0}),yt(this,"buttonRef",a.createRef()),yt(this,"onHighVisiblityModeChange",(()=>{const e=!this.props.highVisibilityMode;_.saveHighVisibilityMode(e),this.props.dispatch(je({...Ge.getState(),highVisibilityMode:e})),$e.data.session.settings.highVisibility=e,Xe.system.redrawAll()})),yt(this,"onReducedSpeedModeChange",(()=>{const e=1===this.props.gameSpeed?.5:1;_.saveReducedSpeedMode(1!==e),this.props.dispatch(je({...Ge.getState(),gameSpeed:e}))})),yt(this,"onGameModeChange",(e=>{this.props.dispatch(je({...Ge.getState(),mode:e})),Xe.system.changeGameState(Ye.Menu),_.saveGameMode(e)})),yt(this,"onNewGameClick",(()=>{Xe.system.changeGameState(Ye.Menu)})),yt(this,"onHamburgerMenuClick",(e=>{"function"==typeof this.props.onClick&&this.props.onClick(e),this.state.menuOpen||this.props.gameState!==Ye.Play||Xe.system.changeGameState(Ye.Pause),this.setState({menuOpen:!this.state.menuOpen})})),yt(this,"dismissMenu",(()=>{this.setState({menuOpen:!1})})),yt(this,"closeModal",(()=>{this.props.setModal(null)})),yt(this,"openHowToPlayModal",(()=>{this.props.setModal(a.createElement(mt,{onClick:bt,label:B.pz.getString("howToPlayDialogTitle"),accept:this.closeModal,acceptMessage:B.pz.getString("close"),dismiss:this.closeModal,closeButtonToolTip:B.pz.getString("close")}))})),yt(this,"openGameCreditsModal",(()=>{this.props.setModal(a.createElement(Qe.S,{onClick:bt,label:B.pz.getString("gameCreditsDialogTitle"),accept:this.closeModal,acceptMessage:B.pz.getString("close"),dismiss:this.closeModal,closeButtonToolTip:B.pz.getString("close"),content:this.getGameCreditsModalBody}))})),yt(this,"getGameCreditsModalBody",(e=>a.createElement(a.Fragment,null,a.createElement(w.nv,null,"Parker Young, Patrick Evan Little, Scott Porterfield, Connor Smith, William Devereux, Adina Shanholtz"),a.createElement(S.X6,{className:this.props.managedClasses.settingsHamburgerMenu_creditsTable_specialThanks,size:v.Gm._7,tag:v.lb.h3},B.pz.getString("specialThanks")),a.createElement(w.nv,null,"Jonathan Merrin, Charles Duval, Addison Kaufmann, Rachel Weil, Amanda Velasco Gallardo, Ramya Challa, Chris Pirih")))),yt(this,"confirmResetStats",(()=>{this.props.setModal(a.createElement(L.Z,{title:B.pz.getString("resetAllStatsDialogTitle"),closeButtonTooltip:B.pz.getString("close"),dialogText:B.pz.getString("resetAllStatsDialogText"),confirmText:B.pz.getString("resetAllStats"),rejectText:B.pz.getString("cancel"),handleConfirm:this.resetStats,handleReject:this.closeModal,onClick:bt}))})),yt(this,"resetStats",(()=>{this.props.dispatch(ze()),_.resetAllStats(),this.closeModal()})),this.state={menuOpen:!1}}render(){return a.createElement(a.Fragment,null,a.createElement(r.h,{designSystem:wt},a.createElement(f.ZP,{value:ft,tag:null,drawBackground:!1},a.createElement(k.XC,gt({},this.unhandledProps(),{ref:this.buttonRef,onClick:this.onHamburgerMenuClick,className:(0,A.A)(this.props.managedClasses.settingsHamburgerMenu)}),a.createElement(R.Z,null)))),this.renderMenu())}getHighScore(){switch(this.props.mode){case F.Buoy:return B.pz.getStringF("bestScoreMenuDisplay",Math.max(this.props.buoy_bestScore,0).toString(),B.pz.getString("buoyUnit"));case F.Speed:return qe(this.props.speed_bestScore);case F.Classic:default:return B.pz.getStringF("bestScoreMenuDisplay",Math.max(this.props.classic_bestScore,0).toString(),B.pz.getString("classicUnit"))}}renderMenu(){const e=this.getHighScore();return a.createElement(C.zg,{className:this.props.managedClasses.settingsHamburgerMenu_flyout,width:"280px",height:"fit-content",defaultVerticalPosition:O._k.bottom,defaultHorizontalPosition:O.xN.left,verticalPositioningMode:O.Lc.adjacent,visible:this.state.menuOpen,anchor:this.buttonRef,onDismiss:this.dismissMenu,onClick:bt},this.renderCloseButton(),a.createElement(S.X6,{tag:v.lb.h2,size:v.Gm._7},B.pz.getString("gameSettings")),this.renderGameModePicker(),a.createElement(w.nv,{className:this.props.managedClasses.settingsHamburgerMenu_flyout_score},(t=this.props.managedClasses.settingsHamburgerMenu_flyout_scoreCrown,a.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"32",height:"32"},a.createElement("path",{d:"M1354 1167l438-527v1280H256V640l445 526 323-526 330 527zM384 384q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10q27 0 50 10t40 27 28 41 10 50zm640 128q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10zm768-256q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10z"}))),B.pz.getStringF("bestScoreFlyout",e)),a.createElement(T.iz,{className:this.props.managedClasses.settingsHamburgerMenu_flyout_divider}),this.renderToggleSection(),a.createElement(T.iz,{className:this.props.managedClasses.settingsHamburgerMenu_flyout_divider}),this.renderButtonSection());var t}renderCloseButton(){return a.createElement(k.XC,{className:this.props.managedClasses.settingsHamburgerMenu_closeButton,title:B.pz.getString("close"),onClick:this.dismissMenu},(0,N.p)(this.props.managedClasses.settingsHamburgerMenu_closeButton_icon))}renderGameModePicker(){const e=B.pz.getString("gameModeBuoy"),t=B.pz.getString("gameModeClassic"),s=B.pz.getString("gameModeSpeed"),i=this.props.mode,o="PAUSE"===this.props.gameState||"PLAY"===this.props.gameState;return a.createElement(a.Fragment,null,a.createElement(E.Of,{onClick:this.onNewGameClick},B.pz.getString("newGame")),a.createElement(P.__,{className:this.props.managedClasses.settingsHamburgerMenu_flyout_label},o?B.pz.getString("gameModeSelectLabelDisabled"):B.pz.getString("gameModeSelectLabel")),a.createElement(I.Ph,{jssStyleSheet:u.O0,menu:u.gj,onValueChange:this.onGameModeChange,selectedItems:[i],disabled:o},a.createElement(x.$m,{id:F.Classic,value:F.Classic,displayString:t}),a.createElement(x.$m,{id:F.Speed,value:F.Speed,displayString:s}),a.createElement(x.$m,{id:F.Buoy,value:F.Buoy,displayString:e})))}renderToggleSection(){const e=B.pz.getString("on"),t=B.pz.getString("off");return a.createElement(a.Fragment,null,a.createElement("div",{className:this.props.managedClasses.settingsHamburgerMenu_flyout_toggleRow},a.createElement(P.__,{htmlFor:"highVisibilityMode"},B.pz.getString("highVisiblityModeToggleLabel")),a.createElement(M.ZD,{jssStyleSheet:g,inputId:"highVisibilityMode",selectedMessage:e,unselectedMessage:t,selected:this.props.highVisibilityMode,onChange:this.onHighVisiblityModeChange})),a.createElement("div",{className:this.props.managedClasses.settingsHamburgerMenu_flyout_toggleRow},a.createElement(P.__,{htmlFor:"reducedSpeedMode"},B.pz.getString("reducedSpeedModeToggleLabel")),a.createElement(M.ZD,{jssStyleSheet:g,inputId:"reducedSpeedMode",defaultChecked:!0,selectedMessage:e,unselectedMessage:t,selected:1!==this.props.gameSpeed,onChange:this.onReducedSpeedModeChange})))}renderButtonSection(){return a.createElement("div",{className:this.props.managedClasses.settingsHamburgerMenu_flyout_buttonSection},a.createElement(E.Of,{jssStyleSheet:y,onClick:this.openHowToPlayModal},B.pz.getString("howToPlayButton")),a.createElement(E.Of,{jssStyleSheet:y,onClick:this.openGameCreditsModal},B.pz.getString("gameCreditsButton")),a.createElement(E.Of,{jssStyleSheet:y,onClick:this.confirmResetStats},B.pz.getString("resetAllStats")))}}const vt=(0,o.$j)((function(e){return e}))((0,h.ZP)(b)(St));var kt=s(18169);function Ct(e){const[t,s]=a.useState(null);return a.createElement(a.Fragment,null,a.createElement(vt,{setModal:s}),a.createElement(n.f,{modal:t,rootElement:document.getElementById("modal-root")}))}window.addEventListener("beforeunload",(()=>{_.recordUnload()})),window.onload=async function(){await async function(){const e=await _.getAllStats();Ge.dispatch(je({buoy_bestScore:e.buoy_bestScore,speed_bestScore:e.speed_bestScore<0?-1:e.speed_bestScore/1e3,classic_bestScore:e.classic_bestScore,highVisibilityMode:e.highVisibilityMode,currentCharacter:e.currentCharacter,mode:e.mode,gameSpeed:e.reducedSpeedMode?.5:1}))}(),z=new j("surfboard64",13,3),G=new j("player64",13,9),V=new j("enemy128",2,6),q=new j("surfer64",27,2),U=new j("docks64",10,1),K=new j("objects64",30,1),Z=new j("objects32",20,1),Y=new j("interact64",8,4),J=new j("slowdown64",9,3),X=new j("slowdown64",3,3),Q=new j("effects128",6,3),ee=new j("ripple96",1,3),te=new j("ambient64",4,6),se=new j("sandbar256",4,1),ie=new j("island1280",1,1),window.addEventListener("gamepadconnected",(function(e){const t=e.gamepad.index;navigator.getGamepads()[t],Ne.system.controllerList.push(t)})),window.addEventListener("gamepaddisconnected",(function(e){const t=Ne.system,s=e.gamepad.index,i=t.controllerList.indexOf(s);i>-1&&t.controllerList.splice(i,1),$e.data.controller={index:-1,pad:-1,pressed:{}}})),function(){window.addEventListener("keydown",(function(e){$e.data.changeInputMethod("keyboard"),s.onKeydown(e)}),!1),window.addEventListener("keyup",(function(e){s.onKeyup(e)}),!1);let e,t=!1;const s={pressed:{},UP:38,DOWN:40,LEFT:37,RIGHT:39,ENTER:13,BACKSPACE:8,HOME:36,DELETE:46,SPACE:32,W:87,A:65,S:83,D:68,F:70,ESC:27,K:75,M:77,P:80,L:76,O:79,codes:[[38,38,40,40,37,39,37,39,66,65],[77,73,67,82,79,83,79,70,84],[69,68,71,69]],codePosition:0,onKeydown:function(i){if(!this.pressed[i.keyCode]){if(this.pressed[i.keyCode]=!0,"MENU"===$e.data.session.state){const s=i.keyCode;if(t&&s===this.codes[e][this.codePosition+1]){if(this.codePosition++,s===this.codes[e][this.codes[e].length-1]){switch(e){case 0:Le.system.routeInputType("KONAMI");break;case 1:Le.system.routeInputType("MICROSOFT");break;case 2:Le.system.routeInputType("EDGE")}t=!1,this.codePosition=0,e=void 0}}else{if(t&&this.codePosition<=1&&s===this.codes[e][0])return;t=!1,this.codePosition=0;for(let i=0;i<=this.codes.length-1&&!t;i++)s===this.codes[i][0]&&(e=i,t=!0)}}switch(i.keyCode){case s.DOWN:case s.S:Le.system.routeInputType("DOWN");break;case s.UP:case s.W:Le.system.routeInputType("UP");break;case s.LEFT:case s.A:Le.system.routeInputType("LEFT");break;case s.RIGHT:case s.D:Le.system.routeInputType("RIGHT");break;case s.ENTER:case s.SPACE:$e.data.session.isFlyoutActive||Le.system.routeInputType("FORWARD");break;case s.BACKSPACE:case s.DELETE:$e.data.session.isFlyoutActive||Le.system.routeInputType("BACKWARD");break;case s.HOME:case s.ESC:Le.system.routeInputType("TOGGLE PLAY");break;case s.F:Le.system.routeInputType("BOOST")}}},onKeyup:function(e){delete this.pressed[e.keyCode]}}}(),function(){window.addEventListener("mousemove",(function(t){"PLAY"===$e.data.session.state&&e.onMouseMove(t)}),!1),window.addEventListener("click",(function(t){(t=t||window.event).target||t.srcElement,e.onMouseClick(t)}),!1);const e={moused:void 0,thisClick:0,lastClick:0,doubleDelta:300,onMouseMove:function(e){this.moused=this.definePosition(e)},definePosition:function(e){const t=$e.data.session.xOrigin,s=$e.data.session.yOrigin,i=e.clientX,a=e.clientY,o=180*Math.atan2(s-a,t-i)/Math.PI;let n=this.moused;return n=o<0&&o>-55?"LEFT":o>-180&&o<-125?"RIGHT":o<-55&&o>-75?"DOWN LEFT":o>-125&&o<-105?"DOWN RIGHT":o>0&&o<180?"UP":"DOWN",this.moused===n||Le.system.routeInputType(n),n},onMouseClick:function(e){this.thisClick=Date.now(),this.thisClick-this.lastClick<=this.doubleDelta&&("PLAY"===$e.data.session.state?Le.system.routeInputType("BOOST"):Le.system.routeInputType("FORWARD"),this.thisClick=0),this.lastClick=this.thisClick}}}(),function(){window.addEventListener("touchstart",(function(t){$e.data.changeInputMethod("touch"),e.onTouchStart(t)}),!1),window.addEventListener("touchmove",(function(t){e.onTouchMove(t)}),!1),window.addEventListener("touchend",(function(t){e.onTouchEnd(t)}),!1);const e={touched:void 0,thisTap:0,lastTap:0,doubleDelta:300,xDown:0,yDown:0,xMove:0,yMove:0,onTouchStart:function(e){e.cancelable&&e.preventDefault(),e.targetTouches&&!this.isInteractive(e)&&(this.xDown=e.targetTouches[0].clientX,this.yDown=e.targetTouches[0].clientY)},onTouchMove:function(e){if(e.cancelable&&e.preventDefault(),this.xMove=e.targetTouches[0].clientX,this.yMove=e.targetTouches[0].clientY,e.touches&&!this.isInteractive(e)&&"PLAY"===$e.data.session.state){const t=e.targetTouches[0];this.touched=this.definePosition(t)}},onTouchEnd:function(e){const t=this.xMove-this.xDown,s=this.yMove-this.yDown,i=180*Math.atan2(s,t)/Math.PI;Math.abs(i)>135?"MENU"===$e.data.session.state?Le.system.routeInputType("RIGHT"):Le.system.routeInputType("LEFT"):Math.abs(i)<45?"MENU"===$e.data.session.state?Le.system.routeInputType("LEFT"):Le.system.routeInputType("RIGHT"):i>45&&i<135&&Le.system.routeInputType("DOWN"),this.isInteractive(e)||(this.thisTap=Date.now(),this.thisTap-this.lastTap<=this.doubleDelta&&(Le.system.routeInputType("FORWARD"),this.thisTap=0),this.lastTap=this.thisTap,this.touched=void 0,this.stopDefault(e))},isInteractive:function(e){const t=e.target||e.srcElement,s=$("hamburger-container")||null,i=$("modal-root")||null,a=$("game-clicktarget")||null,o="a"===e.target.tagName.toLowerCase()||"select"===e.target.tagName.toLowerCase()||"input"===e.target.tagName.toLowerCase()||"button"===e.target.tagName.toLowerCase();return!(!s||!s.contains(t)&&t!==a)||!(!i||!i.contains(t)&&i!==a)||!!o},stopDefault:function(e){this.isInteractive(e)||(e.preventDefault(),e.stopPropagation())},definePosition:function(e){const t=$e.data.session.xOrigin,s=$e.data.session.yOrigin,i=e.clientX,a=e.clientY,o=180*Math.atan2(s-a,t-i)/Math.PI;let n=this.touched;return n=o<0&&o>-55||i<.2*$e.data.session.width?"LEFT":o>-180&&o<-125||i>.8*$e.data.session.width?"RIGHT":o<-55&&o>-75?"DOWN LEFT":o>-125&&o<-105?"DOWN RIGHT":o>0&&o<180?"UP":"DOWN",this.touched===n||Le.system.routeInputType(n),n}}}(),function(){const e=document.getElementById("hamburger-container");e.style.zIndex=kt._p.CONTEXT_MENU.toString(),i.render(a.createElement(o.zt,{store:Ge},a.createElement(r.h,{designSystem:d.fn},a.createElement(Ct,null))),e)}(),function(){const e=$("game-canvas"),t=new Xe(e);let s,i=window.performance.now();const a=()=>{s=requestAnimationFrame(a);const e=window.performance.now()-i;t.gameLoop(e),i=window.performance.now()};requestAnimationFrame(a),function(e,t){let s;window.addEventListener("resize",(function(){void 0!==s&&(clearTimeout(s),s=void 0),s=setTimeout((function(){s=void 0,e()}),t)}))}((function(){t.reflowCanvas()}),50),document.addEventListener("visibilitychange",(function(){t.reflowCanvas()}))}()}},81164:(e,t,s)=>{s.d(t,{C:()=>c});var i,a=s(11754),o=s(37834),n=s(89526),r=s(12468);!function(e){e.a="a",e.button="button"}(i||(i={}));class h extends a.Z{constructor(){super(...arguments),this.handledProps={disabled:void 0,href:void 0,managedClasses:void 0}}render(){return n.createElement(this.tag,Object.assign({},this.unhandledProps(),{className:this.generateClassNames(),href:this.props.href||null},this.renderDisabledAttribute()),this.props.children)}generateClassNames(){const{button:e,button__disabled:t}=this.props.managedClasses;return super.generateClassNames((0,o.A)(e,[t,this.props.disabled]))}renderDisabledAttribute(){if(!0===this.props.disabled)return this.tag===i.a?{"aria-disabled":!0}:{disabled:!0}}get tag(){return"string"==typeof this.props.href?i.a:i.button}}h.displayName=`${r.k}Button`,h.defaultProps={managedClasses:{}};const c=h},65173:(e,t,s)=>{s.d(t,{ZP:()=>i});const i=s(81164).C},81545:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(11754),a=s(33832),o=s(37834),n=s(9453),r=s(89526),h=s(86577),c=s(64829),l=s(64702),d=s(78943),p=s.n(d),u=s(12468);class m extends i.Z{constructor(){super(...arguments),this.handledProps={describedBy:void 0,label:void 0,labelledBy:void 0,contentWidth:void 0,contentHeight:void 0,modal:void 0,managedClasses:void 0,onDismiss:void 0,visible:void 0,focusTargetOnClose:void 0},this.rootElement=r.createRef(),this.shouldAddKeyListener=e=>!(!e.modal&&!e.onDismiss),this.handleDocumentKeyDown=e=>{if(!e.defaultPrevented&&this.props.visible)switch(e.keyCode){case a.Lp:this.checkForSoftDismiss(e);break;case a.RN:this.handleTabKeyDown(e)}},this.checkForSoftDismiss=e=>{this.props.onDismiss&&"function"==typeof this.props.onDismiss&&this.props.visible&&this.props.onDismiss(e)},this.handleTabKeyDown=e=>{if(!this.props.modal)return;const t=p()(this.rootElement.current),s=t.length;if(0===s)return this.tryFocusOnRootElement(),void e.preventDefault();e.shiftKey&&e.target===t[0]?(t[s-1].focus(),e.preventDefault()):e.shiftKey||e.target!==t[s-1]||(t[0].focus(),e.preventDefault())},this.handleDocumentFocus=e=>{!e.defaultPrevented&&this.shouldForceFocus(e.target)&&(this.focusOnFirstElement(),e.preventDefault())},this.shouldForceFocus=e=>this.props.visible&&this.rootElement.current instanceof HTMLElement&&!this.rootElement.current.contains(e),this.focusOnFirstElement=()=>{if((0,n.N)()&&this.rootElement.current instanceof HTMLElement){const e=p()(this.rootElement.current);0===e.length?this.tryFocusOnRootElement():e[0].focus()}},this.tryFocusOnRootElement=()=>{this.rootElement.current instanceof HTMLElement&&this.rootElement.current.focus()},this.invokeFocusOnCloseTarget=()=>{if((0,c.Z)(this.props.focusTargetOnClose))return;if((0,l.Z)(this.props.focusTargetOnClose))return void this.props.focusTargetOnClose();const e=(0,h.x)(this.props.focusTargetOnClose);e instanceof HTMLElement&&e.focus()}}render(){const{dialog_positioningRegion:e,dialog_contentRegion:t}=this.props.managedClasses;return r.createElement("div",Object.assign({ref:this.rootElement},this.unhandledProps(),{className:this.generateClassNames(),"aria-hidden":!this.props.visible}),r.createElement("div",{className:(0,o.A)(e)},this.renderModalOverlay(),r.createElement("div",{role:"dialog","aria-modal":this.props.modal,tabIndex:-1,className:(0,o.A)(t),style:{height:this.props.contentHeight,width:this.props.contentWidth},"aria-describedby":this.props.describedBy,"aria-labelledby":this.props.labelledBy,"aria-label":this.props.label},this.props.children)))}componentDidMount(){(0,n.N)()&&(this.shouldAddKeyListener(this.props)&&document.addEventListener("keydown",this.handleDocumentKeyDown),this.props.modal&&(document.addEventListener("focusin",this.handleDocumentFocus),this.shouldForceFocus(document.activeElement)&&this.focusOnFirstElement()))}componentDidUpdate(e){(0,n.N)()&&(!e.modal&&this.props.modal?(document.addEventListener("focusin",this.handleDocumentFocus),this.focusOnFirstElement()):e.modal&&!this.props.modal&&document.removeEventListener("focusin",this.handleDocumentFocus),!this.shouldAddKeyListener(e)&&this.shouldAddKeyListener(this.props)?document.addEventListener("keydown",this.handleDocumentKeyDown):this.shouldAddKeyListener(e)&&!this.shouldAddKeyListener(this.props)&&document.removeEventListener("keydown",this.handleDocumentKeyDown))}componentWillUnmount(){(0,n.N)()&&(this.shouldAddKeyListener(this.props)&&document.removeEventListener("keydown",this.handleDocumentKeyDown),this.props.modal&&document.removeEventListener("focusin",this.handleDocumentFocus),this.invokeFocusOnCloseTarget())}generateClassNames(){return super.generateClassNames((0,o.A)(this.props.managedClasses.dialog))}renderModalOverlay(){if(this.props.modal)return r.createElement("div",{className:(0,o.A)(this.props.managedClasses.dialog_modalOverlay),onClick:this.checkForSoftDismiss,onTouchStart:this.checkForSoftDismiss,role:"presentation",tabIndex:-1,style:{touchAction:"none"}})}}m.defaultProps={contentHeight:"480px",contentWidth:"640px",visible:!1,managedClasses:{}},m.displayName=`${u.k}Dialog`;const g=m},46076:(e,t,s)=>{s.d(t,{ZP:()=>i});const i=s(81545).Z},2057:(e,t,s)=>{s.d(t,{ZP:()=>c});var i,a=s(11754),o=s(37834),n=s(89526),r=s(12468);!function(e){e.presentation="presentation",e.separator="separator"}(i||(i={}));class h extends a.Z{constructor(){super(...arguments),this.handledProps={managedClasses:void 0,role:void 0}}render(){return n.createElement("hr",Object.assign({},this.unhandledProps(),this.generateAttributes(),{className:this.generateClassNames()}))}generateAttributes(){if(this.props.role&&this.props.role!==i.separator)return{role:i[this.props.role]}}generateClassNames(){return super.generateClassNames((0,o.A)(this.props.managedClasses.divider))}}h.displayName=`${r.k}Divider`,h.defaultProps={managedClasses:{}};const c=h},67483:(e,t,s)=>{s.d(t,{ZP:()=>l});var i,a=s(11754),o=s(37834),n=s(57872),r=s(89526),h=s(12468);!function(e){e.label="label",e.legend="legend"}(i||(i={}));class c extends a.Z{constructor(){super(...arguments),this.handledProps={hidden:void 0,managedClasses:void 0,tag:void 0}}get tag(){return(0,n.Z)(i[this.props.tag])?i.label:i[this.props.tag]}render(){return r.createElement(this.tag,Object.assign({},this.unhandledProps(),{className:this.generateClassNames()}),this.props.children)}generateClassNames(){const{label:e,label__hidden:t}=this.props.managedClasses;return super.generateClassNames((0,o.A)(e,[t,this.props.hidden]))}}c.displayName=`${h.k}Label`,c.defaultProps={tag:i.label,managedClasses:{}};const l=c},22545:(e,t,s)=>{s.d(t,{ZP:()=>i});const i=s(28293).Z},28293:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(11754),a=s(33832),o=s(37834),n=s(89526),r=s(97084),h=s(12468);class c extends i.Z{constructor(){super(...arguments),this.handledProps={disabled:void 0,displayString:void 0,managedClasses:void 0,id:void 0,onInvoke:void 0,value:void 0},this.isItemSelected=()=>{let e=!1;return void 0!==this.context.listboxSelectedItems&&(e=1===this.context.listboxSelectedItems.filter((e=>e.id===this.props.id)).length),e},this.handleKeyDown=e=>{if(!this.props.disabled&&("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),!e.defaultPrevented))switch(e.keyCode){case a.bq:case a.ei:this.invokeOption(e)}},this.handleClick=e=>{this.props.disabled||("function"==typeof this.props.onClick&&this.props.onClick(e),e.defaultPrevented||this.invokeOption(e))},this.handleFocus=e=>{this.props.disabled||("function"==typeof this.context.listboxItemFocused&&this.context.listboxItemFocused(this.props,e),"function"==typeof this.props.onFocus&&this.props.onFocus(e))}}render(){return n.createElement("div",Object.assign({},this.unhandledProps(),{className:this.generateClassNames(),role:"option",id:this.props.id,"aria-selected":this.isItemSelected(),"aria-disabled":this.props.disabled,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown}),this.props.children)}generateClassNames(){const{listboxItem:e,listboxItem__disabled:t,listboxItem__selected:s}=this.props.managedClasses;return super.generateClassNames((0,o.A)(e,[t,this.props.disabled],[s,this.isItemSelected()]))}invokeOption(e){this.context.listboxItemInvoked&&this.context.listboxItemInvoked(this.props,e),"function"==typeof this.props.onInvoke&&this.props.onInvoke(e,this.props)}}c.displayName=`${h.k}ListboxItem`,c.contextType=r.R,c.defaultProps={disabled:!1,managedClasses:{}},c.contextType=r.R;const l=c},18078:(e,t,s)=>{s.d(t,{ZP:()=>i});const i=s(42999).Z},97084:(e,t,s)=>{s.d(t,{R:()=>i});const i=s(89526).createContext({listboxItemInvoked:null,listboxItemFocused:null,listboxSelectedItems:[],listboxMultiselectable:!1})},42999:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(11754),a=s(33832),o=s(99478),n=s(37834),r=s(9453),h=s(18868),c=s(64829),l=s(67099),d=s(89526),p=s(12468),u=s(97084);class m extends i.Z{constructor(e){super(e),this.handledProps={children:void 0,defaultSelection:void 0,disabled:void 0,labelledBy:void 0,describedBy:void 0,managedClasses:void 0,multiselectable:void 0,onItemInvoked:void 0,onSelectedItemsChanged:void 0,selectedItems:void 0,typeAheadEnabled:void 0,typeAheadPropertyKey:void 0,focusItemOnMount:void 0,selectOnFocus:void 0,tabbableItems:void 0},this.rootElement=d.createRef(),this.typeAheadString="",this.shiftRangeSelectStartIndex=-1,this.renderChild=(e,t)=>d.cloneElement(e,{tabIndex:this.props.tabbableItems&&t===this.state.focusIndex?0:-1}),this.isFocusableElement=e=>e instanceof HTMLElement&&"option"===e.getAttribute("role")&&!this.isDisabledElement(e)&&!this.props.disabled,this.isDisabledElement=e=>e instanceof HTMLElement&&"true"===e.getAttribute("aria-disabled"),this.setInitialFocus=(e,t)=>{let s=-1;for(let t=0;t<e.length;t++)s=m.getItemIndexById(e[t].id,this.props.children);-1===s&&(s=this.domChildren().findIndex(this.isFocusableElement)),this.props.focusItemOnMount&&t&&-1!==s?this.setFocus(s,1):this.setState({focusIndex:s})},this.getInitialSelection=()=>{let e;return e=void 0!==this.props.selectedItems?m.getListboxItemDataFromIds(this.props.selectedItems,this.props.children):m.getListboxItemDataFromIds(this.props.defaultSelection,this.props.children),!this.props.multiselectable&&e.length>1&&(e=e.slice(0,1)),e},this.listboxItemfocused=(e,t)=>{if(this.props.disabled)return;const s=t.currentTarget,i=this.domChildren().indexOf(s);this.isDisabledElement(s)?s.blur():(this.setState({focusIndex:i,focussedItemId:e.id}),!this.props.multiselectable&&this.props.selectOnFocus&&this.updateSelection([e]))},this.handleMenuKeyDown=e=>{if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),e.defaultPrevented||this.props.disabled)return;let t;switch(e.keyCode){case a.Lp:case a.bq:case a.ei:case a.RN:return;case a.Q6:case a.ho:if(t=this.setFocus(this.state.focusIndex+1,1),this.props.multiselectable&&e.shiftKey&&""!==t){const e=m.getItemPropsById(t,this.props.children);null!==e&&this.toggleItem(e)}e.preventDefault();break;case a.$Y:case a.BJ:if(t=this.setFocus(this.state.focusIndex-1,-1),this.props.multiselectable&&e.shiftKey&&""!==t){const e=m.getItemPropsById(t,this.props.children);null!==e&&this.toggleItem(e)}e.preventDefault();break;case a.$B:this.props.multiselectable&&e.shiftKey&&e.ctrlKey&&this.selectRange(this.state.focusIndex,this.domChildren().length-1),this.setFocus(this.domChildren().length-1,-1),e.preventDefault();break;case a.wn:this.props.multiselectable&&e.shiftKey&&e.ctrlKey&&this.selectRange(0,this.state.focusIndex),this.setFocus(0,1),e.preventDefault();break;default:"A"===e.key?this.selectRange(0,this.domChildren().length):!e.ctrlKey&&this.props.typeAheadEnabled&&this.processTypeAhead(e)}},this.processTypeAhead=e=>{clearTimeout(this.typeAheadTimer),this.typeAheadString=this.typeAheadString+e.key.toLowerCase();let t=-1;d.Children.toArray(this.props.children).some(((e,s)=>void 0!==e.props[this.props.typeAheadPropertyKey]&&((0,o.Ny)(e.props[this.props.typeAheadPropertyKey].toLowerCase(),this.typeAheadString)?(t=s,!0):void 0))),-1!==t?(this.typeAheadTimer=setTimeout((()=>{this.typeAheadTimerExpired()}),1e3),this.setFocus(t,1)):this.typeAheadString=""},this.typeAheadTimerExpired=()=>{this.typeAheadString="",clearTimeout(this.typeAheadTimer)},this.listboxItemInvoked=(e,t)=>{if(this.props.disabled)return;"function"==typeof this.props.onItemInvoked&&this.props.onItemInvoked(e);const s=t.currentTarget,i=this.domChildren().indexOf(s);this.props.multiselectable&&"click"===t.type?(t.shiftKey&&-1!==this.shiftRangeSelectStartIndex||(this.shiftRangeSelectStartIndex=i),t.ctrlKey?this.toggleItem(e):t.shiftKey?this.selectRange(this.shiftRangeSelectStartIndex,i):this.updateSelection([e])):this.props.multiselectable&&"keydown"===t.type?t.shiftKey?this.selectRange(this.shiftRangeSelectStartIndex,i):this.toggleItem(e):this.updateSelection([e])},this.toggleItem=e=>{const t=this.state.selectedItems.filter((t=>t.id!==e.id));if(t.length<this.state.selectedItems.length)this.updateSelection(t);else{const t=this.state.selectedItems.concat([e]);this.updateSelection(t)}},this.selectRange=(e,t)=>{const s=d.Children.toArray(this.props.children).slice(e>=t?t:e,e>=t?e+1:t+1).map((e=>e.props));this.updateSelection(s)},this.updateSelection=e=>{const t=m.validateSelection(e,this.props.children);return(0,h.Z)(t,this.state.selectedItems)||(void 0===this.props.selectedItems&&this.setState({selectedItems:t}),this.props.onSelectedItemsChanged&&this.props.onSelectedItemsChanged(t)),t},this.state={focusIndex:-1,focussedItemId:"",selectedItems:this.getInitialSelection()}}static getListboxItemDataFromIds(e,t){return m.validateSelection(e,t)}static getItemIndexById(e,t){return d.Children.toArray(t).findIndex((t=>void 0!==t.props[m.idPropertyKey]&&t.props[m.idPropertyKey]===e))}static isValidSelectedItem(e){return void 0!==e&&!0!==e.props[m.disabledPropertyKey]&&void 0!==e.props[m.valuePropertyKey]}static getNodeById(e,t){return d.Children.toArray(t).find((t=>void 0!==t.props[m.idPropertyKey]&&t.props[m.idPropertyKey]===e))}static getItemPropsById(e,t){const s=this.getNodeById(e,t);return void 0!==s?s.props:null}static validateSelection(e,t){return e.map((e=>{let s="";s="string"==typeof e?e:e.id;const i=this.getNodeById(s,t);return m.isValidSelectedItem(i)?i.props:null})).filter((e=>null!==e))}render(){return d.createElement("div",Object.assign({},this.unhandledProps(),{ref:this.rootElement,role:"listbox","aria-disabled":this.props.disabled||null,"aria-multiselectable":this.props.multiselectable||null,"aria-activedescendant":this.state.focussedItemId,"aria-labelledby":this.props.labelledBy||null,"aria-describedby":this.props.describedBy||null,className:this.generateClassNames(),onKeyDown:this.handleMenuKeyDown}),d.createElement(u.R.Provider,{value:{listboxSelectedItems:this.state.selectedItems,listboxItemFocused:this.listboxItemfocused,listboxItemInvoked:this.listboxItemInvoked,listboxMultiselectable:this.props.multiselectable}},this.renderChildren()))}componentDidUpdate(e){let t=null;if((0,h.Z)(e.defaultSelection,this.props.defaultSelection)||void 0!==this.props.selectedItems||(t=this.updateSelection(this.getInitialSelection())),e.children!==this.props.children){t=null===t?this.updateSelection(this.state.selectedItems.slice(0)):t;const e=this.domChildren();if(!(0,c.Z)(this.rootElement.current)&&this.rootElement.current.contains(document.activeElement))return void this.setState({focusIndex:e.indexOf(document.activeElement)});(e.length<=this.state.focusIndex||!this.isFocusableElement(e[this.state.focusIndex]))&&this.setInitialFocus(t,!1)}}componentDidMount(){this.setInitialFocus(this.state.selectedItems,!0)}componentWillUnmount(){clearTimeout(this.typeAheadTimer)}generateClassNames(){const{listbox:e,listbox__disabled:t}=this.props.managedClasses;return super.generateClassNames((0,n.A)(e,[t,this.props.disabled]))}renderChildren(){return d.Children.map(this.props.children,this.renderChild)}domChildren(){return(0,r.N)()&&this.rootElement.current instanceof HTMLElement?Array.from(this.rootElement.current.children):[]}setFocus(e,t){const s=this.domChildren();let i="";for(;(0,l.Z)(e,s.length);){const a=s[e];if(i=a.id,this.isFocusableElement(a)){this.props.disabled||a.focus();break}e+=t}return i}}m.displayName=`${p.k}Listbox`,m.defaultProps={multiselectable:!1,defaultSelection:[],typeAheadPropertyKey:"displayString",typeAheadEnabled:!0,focusItemOnMount:!1,managedClasses:{},selectOnFocus:!0,tabbableItems:!0},m.getFirstValidOptionInRange=(e,t,s,i)=>{for(let a=e;a!==t+i;a+=i){const e=s[a];return m.isValidSelectedItem(e)?e:null}},m.getValidOptions=e=>e.filter((e=>m.isValidSelectedItem(e))),m.valuePropertyKey="value",m.idPropertyKey="id",m.disabledPropertyKey="disabled";const g=m},79389:(e,t,s)=>{s.d(t,{ZP:()=>i});const i=s(63566).Z},63566:(e,t,s)=>{s.d(t,{Z:()=>b});var i=s(11754),a=s(33832),o=s(5346),n=s(37834),r=s(9453),h=s(48527),c=s(18868),l=s(64829),d=s(9680),p=s(89526),u=s(18078),m=s(12468),g=s(8641);class y extends i.Z{constructor(e){super(e),this.handledProps={isMenuOpen:void 0,disabled:void 0,displayStringFormatter:void 0,form:void 0,labelledBy:void 0,describedBy:void 0,multiselectable:void 0,trigger:void 0,menu:void 0,required:void 0,managedClasses:void 0,selectedItems:void 0,defaultSelection:void 0,onValueChange:void 0,placeholder:void 0,autoFocus:void 0,menuFlyoutConfig:void 0,onMenuSelectionChange:void 0},this.rootElement=p.createRef(),this.triggerId=(0,h.Z)(y.triggerUniqueIdPrefix),this.checkPropsForMenuState=()=>{let e=!1;return void 0!==this.props.isMenuOpen?e=this.props.isMenuOpen:!0===this.props.multiselectable&&(e=!0),e},this.onSelectValueChange=e=>null,this.menuSelectionChange=e=>{"function"==typeof this.props.onMenuSelectionChange&&this.props.onMenuSelectionChange(e),this.updateSelection(e)},this.updateSelection=e=>{e=this.trimSelection(e);const t=this.getValueFromSelection(e);if(this.state.value===t)return;const s=this.getFormattedDisplayString(e);if("function"!=typeof this.props.onValueChange||(0,c.Z)(e,this.state.selectedItems)||this.props.onValueChange(t,e,s),void 0===this.props.selectedItems){const i=this.getValidOptions();this.setState({selectedItems:e,value:t,displayString:s,selectedItemIndex:this.getSelectedItemPosInSet(i,e),selectableItemCount:i.length})}},this.updateSelectionFromProps=()=>{const e=this.trimSelection(u.ZP.getListboxItemDataFromIds(this.props.selectedItems,this.props.children));this.setState({selectedItems:e,value:this.getValueFromSelection(e),displayString:this.getFormattedDisplayString(e)})},this.trimSelection=e=>!1===this.props.multiselectable&&e.length>1?[this.state.selectedItems[0]]:e,this.getValueFromSelection=e=>this.props.multiselectable?e.map((e=>e.value)):0===e.length?"":e[0].value,this.getSelectedItemPosInSet=(e,t)=>{if(!this.props.multiselectable&&1===t.length){const s=t[0].id,i=e.length;for(let t=0;t<i;t++)if(e[t].props[y.idPropertyKey]===s)return t+1}return 0},this.defaultTriggerRenderFunction=(e,t,s)=>{if(e.multiselectable)return null;const i=`${(0,l.Z)(this.props.labelledBy)?"":`${this.props.labelledBy} `}${s}`,a=""+((0,l.Z)(this.props.describedBy)?"":`${this.props.describedBy}`);return p.createElement("button",{disabled:e.disabled,id:s,"aria-haspopup":"listbox","aria-labelledby":i,"aria-describedby":a,"aria-expanded":t.isMenuOpen},t.displayString)},this.defaultDisplayStringFormatter=(e,t)=>{const s=e.map((e=>e.displayString||e.value));return e.length>0?s.join(", "):t},this.handleClick=e=>{"function"==typeof this.props.onClick&&this.props.onClick(e),this.props.disabled||e.defaultPrevented||(e.preventDefault(),this.toggleMenu(!this.state.isMenuOpen),!1===this.validateMenuState(!this.state.isMenuOpen)&&this.focusTriggerElement())},this.handleKeydown=e=>{if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.disabled&&!e.defaultPrevented)switch(e.keyCode){case a.bq:case a.ei:e.preventDefault(),this.toggleMenu(!this.state.isMenuOpen),!1===this.validateMenuState(!this.state.isMenuOpen)&&this.focusTriggerElement();break;case a.Lp:e.preventDefault(),this.toggleMenu(!1),this.focusTriggerElement();break;case a.Q6:case a.ho:e.preventDefault(),this.props.multiselectable||this.state.isMenuOpen||this.incrementSelectedOption(1);break;case a.$Y:case a.BJ:e.preventDefault(),this.props.multiselectable||this.state.isMenuOpen||this.incrementSelectedOption(-1)}},this.incrementSelectedOption=e=>{const t=p.Children.toArray(this.props.children);if(1===this.state.selectedItems.length){const s=u.ZP.getItemIndexById(this.state.selectedItems[0].id,this.props.children);if(-1!==s){const i=s+e,a=e>-1?t.length-1:0;this.selectItemInRange(i,a,t,e)}}else{const s=e>-1,i=t.length-1;this.selectItemInRange(s?0:i,s?i:0,t,e)}},this.selectItemInRange=(e,t,s,i)=>{const a=u.ZP.getFirstValidOptionInRange(e,t,s,i);(0,l.Z)(a)||this.updateSelection([a.props])},this.toggleMenu=e=>{const t=this.validateMenuState(e);t!==this.state.isMenuOpen&&this.setState({isMenuOpen:t})},this.validateMenuState=e=>{let t=e;return void 0!==this.props.isMenuOpen?t=this.props.isMenuOpen:!0===this.props.multiselectable&&(t=!0),t},this.handleMenuBlur=e=>{this.state.isMenuOpen&&!this.props.multiselectable&&null!==this.rootElement.current&&(!this.rootElement.current.contains(e.relatedTarget)||(0,o.Re)(e.relatedTarget)&&e.relatedTarget.id===this.triggerId)&&this.toggleMenu(!1)},this.getFormattedDisplayString=e=>void 0===this.props.displayStringFormatter?this.defaultDisplayStringFormatter(e,this.props.placeholder):this.props.displayStringFormatter(e,this.props.placeholder),this.isFocusableButton=e=>e instanceof HTMLButtonElement&&"true"!==e.getAttribute("aria-disabled"),this.focusTriggerElement=()=>{const e=this.getTriggerButton();null!==e&&e.focus()},this.getValidOptions=()=>u.ZP.getValidOptions(p.Children.toArray(this.props.children));let t=this.trimSelection(u.ZP.getListboxItemDataFromIds(void 0!==this.props.selectedItems?this.props.selectedItems:this.props.defaultSelection,this.props.children));!this.props.multiselectable&&t.length>1&&(t=t.slice(0,1));const s=this.getValidOptions();this.state={selectedItems:t,value:this.getValueFromSelection(t),displayString:this.getFormattedDisplayString(t),isMenuOpen:this.validateMenuState(!1),selectedItemIndex:this.getSelectedItemPosInSet(s,t),selectableItemCount:s.length}}componentDidUpdate(e){let t=!1,s=this.state.isMenuOpen;e.multiselectable!==this.props.multiselectable&&(t=!0,s=this.checkPropsForMenuState()),e.isMenuOpen!==this.props.isMenuOpen&&(s=this.checkPropsForMenuState()),s!==this.state.isMenuOpen&&this.toggleMenu(s),e.selectedItems===this.props.selectedItems?t&&this.updateSelection(this.state.selectedItems.map((e=>e))):this.updateSelectionFromProps()}componentDidMount(){this.toggleMenu(this.checkPropsForMenuState()),!this.props.autoFocus||this.state.isMenuOpen||this.props.multiselectable||this.focusTriggerElement()}render(){return p.createElement("div",Object.assign({},this.unhandledProps(),{ref:this.rootElement,className:this.generateClassNames(),onKeyDown:this.handleKeydown,onClick:this.handleClick}),this.renderTrigger(),this.renderHiddenSelectElement(),this.renderMenu())}generateClassNames(){const{select:e,select__scaleToFit:t,select__disabled:s,select_menu__open:i,select__multiSelectable:a}=this.props.managedClasses;return super.generateClassNames((0,n.A)(e,[t,!(0,l.Z)(this.props.menuFlyoutConfig)&&this.props.menuFlyoutConfig.scaleToFit],[s,this.props.disabled],[i,this.state.isMenuOpen],[a,this.props.multiselectable]))}renderHiddenSelectElement(){return p.createElement("select",{required:this.props.required||null,name:this.props.name||null,form:this.props.form||null,value:this.state.value,multiple:this.props.multiselectable||null,disabled:this.props.disabled||null,onChange:this.onSelectValueChange,style:{display:"none"}})}renderTrigger(){return void 0!==this.props.trigger?this.props.trigger(this.props,this.state,this.triggerId):this.defaultTriggerRenderFunction(this.props,this.state,this.triggerId)}renderMenu(){if(!this.state.isMenuOpen)return;let e=!this.props.multiselectable;this.props.multiselectable&&this.props.autoFocus&&(e=this.props.multiselectable);const t=p.createElement(u.ZP,{labelledBy:this.props.labelledBy,describedBy:this.props.describedBy,disabled:this.props.disabled,focusItemOnMount:e,multiselectable:this.props.multiselectable,defaultSelection:this.state.selectedItems,selectedItems:this.props.selectedItems,onSelectedItemsChanged:this.menuSelectionChange,onBlur:this.handleMenuBlur,selectOnFocus:!1,tabIndex:-1,managedClasses:{listbox:(0,d.Z)(this.props.managedClasses,"select_menu",""),listbox__disabled:(0,d.Z)(this.props.managedClasses,"select_menuDisabled","")}},this.props.children),s="function"==typeof this.props.menu?this.props.menu(this.props,this.state,t):t;return(0,l.Z)(this.props.menuFlyoutConfig)?s:p.createElement(g.ZP,Object.assign({anchor:this.rootElement},this.props.menuFlyoutConfig,{managedClasses:this.generateViewportPositionerClassNames()}),s)}generateViewportPositionerClassNames(){const{select__menuPositioningRegion:e,select__menuPositionLeft:t,select__menuPositionRight:s,select__menuPositionTop:i,select__menuPositionBottom:a,select__menuPositionHorizontalInset:o,select__menuPositionVerticalInset:n}=this.props.managedClasses;return{viewportPositioner:e,viewportPositioner__left:t,viewportPositioner__right:s,viewportPositioner__top:i,viewportPositioner__bottom:a,viewportPositioner__horizontalInset:o,viewportPositioner__verticalInset:n}}getTriggerButton(){const e=(0,r.N)()&&this.rootElement.current instanceof HTMLElement?Array.from(this.rootElement.current.children):[],t=e.findIndex(this.isFocusableButton);return-1!==t?e[t]:null}}y.displayName=`${m.k}Select`,y.defaultProps={multiselectable:!1,disabled:!1,defaultSelection:[],placeholder:"",managedClasses:{}},y.idPropertyKey="id",y.triggerUniqueIdPrefix="selecttrigger-";const b=y},87472:(e,t,s)=>{s.d(t,{ZP:()=>i});const i=s(39093).Z},39093:(e,t,s)=>{s.d(t,{Z:()=>h});var i=s(11754),a=s(37834),o=s(89526),n=s(12468);class r extends i.Z{constructor(e){super(e),this.handledProps={managedClasses:void 0,disabled:void 0,inputId:void 0,labelId:void 0,name:void 0,selected:void 0,selectedMessage:void 0,statusMessageId:void 0,unselectedMessage:void 0,onChange:void 0},this.handleToggleChange=e=>{"boolean"!=typeof this.props.selected&&this.setState({selected:!this.state.selected}),this.props.onChange&&this.props.onChange(e)},this.state={selected:this.props.selected||!1}}static getDerivedStateFromProps(e,t){return"boolean"==typeof e.selected&&e.selected!==t.selected?{selected:e.selected}:null}render(){const{toggle_toggleButton:e,toggle_input:t,toggle_stateIndicator:s}=this.props.managedClasses;return o.createElement("div",Object.assign({},this.unhandledProps(),{className:this.generateClassNames(),"aria-disabled":this.props.disabled||null}),this.generateLabel(),o.createElement("div",{className:(0,a.A)(e)},o.createElement("input",{className:(0,a.A)(t),type:"checkbox",id:this.props.inputId,"aria-describedby":this.props.statusMessageId,disabled:this.props.disabled,name:this.props.name,value:this.generateToggleStateLabel(),onChange:this.handleToggleChange,checked:this.state.selected}),o.createElement("span",{className:(0,a.A)(s)})),this.renderStatusMessage())}generateClassNames(){const{toggle:e,toggle__disabled:t,toggle__checked:s}=this.props.managedClasses;return super.generateClassNames((0,a.A)(e,[t,this.props.disabled],[s,this.state.selected]))}generateToggleStateLabel(){return this.state.selected?this.props.selectedMessage:this.props.unselectedMessage}generateLabel(){if(this.props.labelId||this.props.children)return o.createElement("label",{className:(0,a.A)(this.props.managedClasses.toggle_label),id:this.props.labelId,htmlFor:this.props.inputId},this.props.children)}renderStatusMessage(){if(this.props.selectedMessage||this.props.unselectedMessage)return o.createElement("span",{id:this.props.statusMessageId,className:(0,a.A)(this.props.managedClasses.toggle_statusMessage)},this.generateToggleStateLabel())}}r.displayName=`${n.k}Toggle`,r.defaultProps={managedClasses:{}};const h=r},61341:(e,t,s)=>{s.d(t,{ZP:()=>c});var i=s(11754),a=s(37834),o=s(89526),n=s(12468),r=s(14895);class h extends i.Z{constructor(){super(...arguments),this.handledProps={managedClasses:void 0,tag:void 0,size:void 0}}get tag(){return this.generateHTMLTag()}render(){return o.createElement(this.tag,Object.assign({},this.unhandledProps(),{className:this.generateClassNames()}),this.props.children)}generateClassNames(){const e=this.props.managedClasses;return super.generateClassNames((0,a.A)(e.typography,e[`typography__${this.props.size}`]))}generateHTMLTag(){return r.l[this.props.tag]||r.l.p}}h.defaultProps={tag:r.l.p,size:r.H._1,managedClasses:{}},h.displayName=`${n.k}Typography`;const c=h},14895:(e,t,s)=>{var i,a;s.d(t,{l:()=>i,H:()=>a}),function(e){e.caption="caption",e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.p="p",e.span="span",e.figcaption="figcaption"}(i||(i={})),function(e){e[e._1=1]="_1",e[e._2=2]="_2",e[e._3=3]="_3",e[e._4=4]="_4",e[e._5=5]="_5",e[e._6=6]="_6",e[e._7=7]="_7",e[e._8=8]="_8",e[e._9=9]="_9"}(a||(a={}))},12468:(e,t,s)=>{s.d(t,{k:()=>i});const i="Base"},8641:(e,t,s)=>{s.d(t,{ZP:()=>y});var i=s(11754),a=s(37834),o=s(86577),n=s(9453),r=s(9680),h=s(64829),c=s(89526),l=s(12468),d=s(10736);const p=c.createContext({viewport:null});var u,m;!function(e){e.left="left",e.insetLeft="insetLeft",e.insetRight="insetRight",e.right="right",e[void 0]="undefined"}(u||(u={})),function(e){e.top="top",e.insetTop="insetTop",e.insetBottom="insetBottom",e.bottom="bottom",e[void 0]="undefined"}(m||(m={}));class g extends i.Z{constructor(e){super(e),this.handledProps={managedClasses:void 0,anchor:void 0,viewport:void 0,horizontalPositioningMode:void 0,defaultHorizontalPosition:void 0,horizontalThreshold:void 0,horizontalAlwaysInView:void 0,horizontalLockToDefault:void 0,verticalPositioningMode:void 0,defaultVerticalPosition:void 0,verticalThreshold:void 0,verticalAlwaysInView:void 0,verticalLockToDefault:void 0,fixedAfterInitialPlacement:void 0,scaleToFit:void 0,delayContentInstanciation:void 0,disabled:void 0},this.rootElement=c.createRef(),this.openRequestAnimationFrame=null,this.anchorTop=0,this.anchorRight=0,this.anchorBottom=0,this.anchorLeft=0,this.anchorHeight=0,this.anchorWidth=0,this.scrollTop=0,this.scrollLeft=0,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.getPositioningStyles=()=>{const e=(0,r.Z)(this.props,"style");return Object.assign(Object.assign(Object.assign({},this.props.scaleToFit?{height:`${this.state.verticalSelectedPositionHeight}px`,width:`${this.state.horizontalSelectedPositionWidth}px`}:{}),{opacity:this.props.disabled||this.state.initialLayoutComplete?void 0:0,position:"relative",transformOrigin:`${this.state.xTransformOrigin} ${this.state.yTransformOrigin}`,transform:`translate(\n                ${Math.floor(this.state.xTranslate)}px, \n                ${Math.floor(this.state.yTranslate)}px\n            )`,top:null===this.state.top?null:`${this.state.top}px`,right:null===this.state.right?null:`${this.state.right}px`,bottom:null===this.state.bottom?null:`${this.state.bottom}px`,left:null===this.state.left?null:`${this.state.left}px`}),e)},this.updateDisabledState=()=>{(0,n.N)()&&!0!==this.props.disabled?(null===this.getAnchorElement()||null===this.getViewportElement(this.props.viewport))&&this.state.validRefChecksRemaining>0?this.setState({validRefChecksRemaining:this.state.validRefChecksRemaining-1,initialLayoutComplete:this.state.validRefChecksRemaining<=1}):this.enableComponent():this.disable()},this.enableComponent=()=>{const e=this.getViewportElement(this.props.viewport),t=this.getAnchorElement();!this.state.disabled||this.props.disabled||(0,h.Z)(t)||(0,h.Z)(e)||(0,h.Z)(this.rootElement.current)||(window.IntersectionObserver&&window.ResizeObserver?(this.setState({disabled:!1,noObserverMode:!1,validRefChecksRemaining:0}),this.collisionDetector=new window.IntersectionObserver(this.handleCollision,{root:e,rootMargin:"0px",threshold:[0,1]}),this.collisionDetector.observe(this.rootElement.current),this.collisionDetector.observe(t),this.resizeDetector=new window.ResizeObserver(this.handleResize),this.resizeDetector.observe(t),this.resizeDetector.observe(this.rootElement.current),e.addEventListener("scroll",this.handleScroll)):this.setNoObserverMode())},this.setNoObserverMode=()=>{const e=this.getViewportElement(this.props.viewport),t=this.getAnchorElement();if((0,h.Z)(e)||(0,h.Z)(t))return;const s=this.rootElement.current.getBoundingClientRect();this.positionerDimension={height:s.height,width:s.width},this.viewportRect=e.getBoundingClientRect();const i=t.getBoundingClientRect();this.anchorTop=i.top,this.anchorRight=i.right,this.anchorBottom=i.bottom,this.anchorLeft=i.left,this.anchorWidth=i.width,this.anchorHeight=i.height,this.updatePositionerOffset(s),this.setState({validRefChecksRemaining:0,disabled:!1,noObserverMode:!0}),this.requestFrame()},this.disable=()=>{this.state.disabled||(this.detachListeners(this.props.viewport),this.setState({disabled:!0,validRefChecksRemaining:0}))},this.detachListeners=e=>{const t=this.getViewportElement(e);(0,h.Z)(t)||t.removeEventListener("scroll",this.handleScroll),this.collisionDetector&&"function"==typeof this.collisionDetector.disconnect&&(this.collisionDetector.disconnect(),this.collisionDetector=null),this.resizeDetector&&"function"==typeof this.resizeDetector.disconnect&&(this.resizeDetector.disconnect(),this.resizeDetector=null)},this.getHorizontalPositioningOptions=()=>{switch(this.props.horizontalPositioningMode){case d.tg.inset:return[u.insetLeft,u.insetRight];case d.tg.adjacent:return[u.left,u.right]}},this.getVerticalPositioningOptions=()=>{switch(this.props.verticalPositioningMode){case d.tg.inset:return[m.insetTop,m.insetBottom];case d.tg.adjacent:return[m.top,m.bottom]}},this.getAvailableWidth=e=>{const t=this.anchorLeft-this.viewportRect.left,s=this.viewportRect.right-(this.anchorLeft+this.anchorWidth);switch(e){case u.left:return t;case u.insetLeft:return t+this.anchorWidth;case u.insetRight:return s+this.anchorWidth;case u.right:return s}},this.getAvailableHeight=e=>{const t=this.anchorTop-this.viewportRect.top,s=this.viewportRect.bottom-(this.anchorTop+this.anchorHeight);switch(e){case m.top:return t;case m.insetTop:return t+this.anchorHeight;case m.insetBottom:return s+this.anchorHeight;case m.bottom:return s}},this.handleScroll=()=>{this.requestFrame()},this.handleResize=e=>{e.forEach((e=>{e.target===this.rootElement.current?this.handlePositionerResize(e):this.handleAnchorResize(e)}))},this.handlePositionerResize=e=>{this.props.scaleToFit||(this.positionerDimension={height:e.contentRect.height,width:e.contentRect.width},this.requestFrame())},this.handleAnchorResize=e=>{this.anchorHeight=e.contentRect.height,this.anchorWidth=e.contentRect.width,this.state.currentVerticalPosition===m.top||this.state.currentVerticalPosition===m.insetTop?this.anchorBottom=this.anchorTop+this.anchorHeight:this.anchorTop=this.anchorBottom-this.anchorHeight,this.state.currentHorizontalPosition===u.left||this.state.currentHorizontalPosition===u.insetLeft?this.anchorRight=this.anchorLeft+this.anchorWidth:this.anchorLeft=this.anchorRight-this.anchorWidth,this.requestFrame()},this.handleCollision=(e,t)=>{let s=null;e.forEach((t=>{t.target===this.rootElement.current?(this.handlePositionerCollision(t,1===e.length),s=t.boundingClientRect):this.handleAnchorCollision(t)}));const i=this.getViewportElement(this.props.viewport);(0,h.Z)(i)||(this.scrollTop=i.scrollTop,this.scrollLeft=i.scrollLeft),2===e.length&&null!==s&&this.updatePositionerOffset(s),this.requestFrame()},this.handleAnchorCollision=e=>{this.viewportRect=e.rootBounds,this.anchorTop=e.boundingClientRect.top,this.anchorRight=e.boundingClientRect.right,this.anchorBottom=e.boundingClientRect.bottom,this.anchorLeft=e.boundingClientRect.left,this.anchorHeight=e.boundingClientRect.height,this.anchorWidth=e.boundingClientRect.width},this.handlePositionerCollision=(e,t)=>{this.viewportRect=e.rootBounds;const s=e.boundingClientRect;if(this.positionerDimension={height:s.height,width:s.width},t){switch(this.state.currentVerticalPosition){case m.top:this.anchorTop=s.bottom-this.state.yTranslate,this.anchorBottom=this.anchorTop+this.anchorHeight;break;case m.insetTop:this.anchorBottom=s.bottom-this.state.yTranslate,this.anchorTop=this.anchorBottom-this.anchorHeight;break;case m.insetBottom:this.anchorTop=s.top-this.state.yTranslate,this.anchorBottom=this.anchorTop+this.anchorHeight;break;case m.bottom:this.anchorBottom=s.top-this.state.yTranslate,this.anchorTop=this.anchorBottom-this.anchorHeight}switch(this.state.currentHorizontalPosition){case u.left:this.anchorLeft=s.right-this.state.xTranslate,this.anchorRight=this.anchorLeft+this.anchorWidth;break;case u.insetLeft:this.anchorRight=s.right-this.state.xTranslate,this.anchorLeft=this.anchorRight-this.anchorWidth;break;case u.insetRight:this.anchorLeft=s.left-this.state.xTranslate,this.anchorRight=this.anchorLeft+this.anchorWidth;break;case u.right:this.anchorRight=s.left-this.state.xTranslate,this.anchorLeft=this.anchorRight-this.anchorWidth}}},this.updatePositionerOffset=e=>{if(this.props.horizontalPositioningMode===d.tg.uncontrolled)this.baseHorizontalOffset=this.anchorLeft-e.left;else switch(this.state.currentHorizontalPosition){case u.undefined:this.baseHorizontalOffset=this.anchorLeft+this.state.xTranslate-e.left;break;case u.left:this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorLeft+this.state.xTranslate-e.right);break;case u.insetLeft:this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorRight+this.state.xTranslate-e.right);break;case u.insetRight:this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorLeft+this.state.xTranslate-e.left);break;case u.right:this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorRight+this.state.xTranslate-e.left)}if(this.props.verticalPositioningMode===d.tg.uncontrolled)this.baseVerticalOffset=this.anchorBottom-e.top;else switch(this.state.currentVerticalPosition){case m.undefined:this.baseVerticalOffset=this.anchorBottom+this.state.yTranslate-e.top;break;case m.top:this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorTop+this.state.yTranslate-e.bottom);break;case m.insetTop:this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorBottom+this.state.yTranslate-e.bottom);break;case m.insetBottom:this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorTop+this.state.yTranslate-e.top);break;case m.bottom:this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorBottom+this.state.yTranslate-e.top)}},this.updateForScrolling=()=>{const e=this.getViewportElement(this.props.viewport);if((0,h.Z)(e)||isNaN(e.scrollTop))return;const t=e.scrollTop,s=e.scrollLeft;if(this.scrollTop!==t){const e=this.scrollTop-t;this.scrollTop=t,this.anchorTop=this.anchorTop+e,this.anchorBottom=this.anchorBottom+e}if(this.scrollLeft!==s){const e=this.scrollLeft-s;this.scrollLeft=s,this.anchorLeft=this.anchorLeft+e,this.anchorRight=this.anchorRight+e}},this.updateLayout=()=>{if(this.openRequestAnimationFrame=null,this.state.disabled||(0,h.Z)(this.viewportRect)||(0,h.Z)(this.positionerDimension)||this.props.fixedAfterInitialPlacement&&this.state.initialLayoutComplete||this.state.noObserverMode&&this.state.initialLayoutComplete)return;this.updateForScrolling();let e=m.undefined,t=u.undefined;if(this.props.horizontalPositioningMode!==d.tg.uncontrolled){const e=this.getHorizontalPositioningOptions();t=this.state.defaultHorizontalPosition;const s=void 0!==this.props.horizontalThreshold?this.props.horizontalThreshold:this.positionerDimension.width;(t===u.undefined||!this.props.horizontalLockToDefault&&this.getAvailableWidth(t)<s)&&(t=this.getAvailableWidth(e[0])>this.getAvailableWidth(e[1])?e[0]:e[1])}if(this.props.verticalPositioningMode!==d.tg.uncontrolled){const t=this.getVerticalPositioningOptions();e=this.state.defaultVerticalPosition;const s=void 0!==this.props.verticalThreshold?this.props.verticalThreshold:this.positionerDimension.height;(e===m.undefined||!this.props.verticalLockToDefault&&this.getAvailableHeight(e)<s)&&(e=this.getAvailableHeight(t[0])>this.getAvailableHeight(t[1])?t[0]:t[1])}const s=this.getNextPositionerDimension(t,e);this.setState(Object.assign({xTranslate:this.getHorizontalTranslate(t),yTranslate:this.getVerticalTranslate(e),initialLayoutComplete:!0},this.getHorizontalPositioningState(t,s),this.getVerticalPositioningState(e,s)))},this.getNextPositionerDimension=(e,t)=>{const s={height:this.positionerDimension.height,width:this.positionerDimension.width};return this.props.scaleToFit&&(s.height=Math.max(Math.min(this.getAvailableHeight(t),this.viewportRect.height),(0,h.Z)(this.props.verticalThreshold)?0:this.props.verticalThreshold),s.width=Math.max(Math.min(this.getAvailableWidth(e),this.viewportRect.width),(0,h.Z)(this.props.horizontalThreshold)?0:this.props.horizontalThreshold)),s},this.getHorizontalPositioningState=(e,t)=>{let s=null,i=null,a="left";switch(e){case u.left:a="right",s=t.width-this.baseHorizontalOffset;break;case u.insetLeft:a="right",s=t.width-this.anchorWidth-this.baseHorizontalOffset;break;case u.insetRight:a="left",i=this.baseHorizontalOffset;break;case u.right:a="left",i=this.anchorWidth+this.baseHorizontalOffset}return{xTransformOrigin:a,right:s,left:i,currentHorizontalPosition:e,horizontalSelectedPositionWidth:t.width}},this.getVerticalPositioningState=(e,t)=>{let s=null,i=null,a="top";switch(e){case m.top:a="bottom",i=t.height+this.anchorHeight-this.baseVerticalOffset;break;case m.insetTop:a="bottom",i=t.height-this.baseVerticalOffset;break;case m.insetBottom:a="top",s=this.baseVerticalOffset-this.anchorHeight;break;case m.bottom:a="top",s=this.baseVerticalOffset}return{yTransformOrigin:a,top:s,bottom:i,currentVerticalPosition:e,verticalSelectedPositionHeight:t.height}},this.getHorizontalTranslate=e=>{if(!this.props.horizontalAlwaysInView||this.state.disabled)return 0;let t=0;switch(e){case u.left:t=this.viewportRect.right-this.anchorLeft,t=t<0?t-1:0;break;case u.insetLeft:t=this.viewportRect.right-this.anchorRight,t=t<0?t-1:0;break;case u.insetRight:t=this.viewportRect.left-this.anchorLeft,t=t>0?t+1:0;break;case u.right:t=this.viewportRect.left-this.anchorRight,t=t>0?t+1:0}return t},this.getVerticalTranslate=e=>{if(!this.props.verticalAlwaysInView||this.state.disabled)return 0;let t=0;switch(e){case m.top:t=this.viewportRect.bottom-this.anchorTop,t=t<0?t-1:0;break;case m.insetTop:t=this.viewportRect.bottom-this.anchorBottom,t=t<0?t-1:0;break;case m.insetBottom:t=this.viewportRect.top-this.anchorTop,t=t<0?0:t+1;break;case m.bottom:t=this.viewportRect.top-this.anchorBottom,t=t<0?0:t+1}return t},this.requestFrame=()=>{null===this.openRequestAnimationFrame&&(this.openRequestAnimationFrame=window.requestAnimationFrame(this.updateLayout))},this.getAnchorElement=()=>(0,h.Z)(this.props.anchor)?null:this.extractElement(this.props.anchor),this.getViewportElement=e=>{if(!(0,h.Z)(e)){const t=this.extractElement(e);return null!==t?t:null}if(!(0,h.Z)(this.context.viewport)){const e=this.extractElement(this.context.viewport);return null!==e?e:null}return document.scrollingElement instanceof HTMLElement?document.scrollingElement:null},this.extractElement=e=>{const t=(0,o.x)(e);return t instanceof HTMLElement?t:null},this.getHorizontalPositionToLabel=(e,t)=>{switch(e){case d.tg.inset:if(t===d.kv.left)return u.insetLeft;if(t===d.kv.right)return u.insetRight;case d.tg.adjacent:if(t===d.kv.left)return u.left;if(t===d.kv.right)return u.right;case d.tg.uncontrolled:return u.undefined}},this.getVerticalPositionToLabel=(e,t)=>{switch(e){case d.tg.inset:if(t===d.Lp.top)return m.insetTop;if(t===d.Lp.bottom)return m.insetBottom;case d.tg.adjacent:if(t===d.Lp.top)return m.top;if(t===d.Lp.bottom)return m.bottom;case d.tg.uncontrolled:return m.undefined}},this.generateInitialState=()=>({disabled:!0,noObserverMode:!1,xTransformOrigin:"left",yTransformOrigin:"top",xTranslate:0,yTranslate:0,top:null,right:null,bottom:null,left:null,currentHorizontalPosition:u.undefined,currentVerticalPosition:m.undefined,defaultHorizontalPosition:this.getHorizontalPositionToLabel(this.props.horizontalPositioningMode,this.props.defaultHorizontalPosition),defaultVerticalPosition:this.getVerticalPositionToLabel(this.props.verticalPositioningMode,this.props.defaultVerticalPosition),horizontalSelectedPositionWidth:null,verticalSelectedPositionHeight:null,initialLayoutComplete:!1,validRefChecksRemaining:2}),this.state=this.generateInitialState()}componentDidMount(){this.updateDisabledState(),this.requestFrame()}componentWillUnmount(){this.state.disabled||this.detachListeners(this.props.viewport)}componentDidUpdate(e){if(e!==this.props){if(e.anchor!==this.props.anchor||e.viewport!==this.props.viewport)return this.detachListeners(e.viewport),void this.setState(this.generateInitialState());this.requestFrame()}(e.disabled!==this.props.disabled||this.state.validRefChecksRemaining>0)&&this.updateDisabledState()}render(){return c.createElement("div",Object.assign({},this.unhandledProps(),{ref:this.rootElement,className:this.generateClassNames(),style:this.getPositioningStyles()}),this.props.disabled||this.state.initialLayoutComplete||!this.props.delayContentInstanciation?this.props.children:null)}generateClassNames(){const{viewportPositioner:e,viewportPositioner__left:t,viewportPositioner__right:s,viewportPositioner__top:i,viewportPositioner__bottom:o,viewportPositioner__horizontalInset:n,viewportPositioner__verticalInset:r}=this.props.managedClasses,h=this.state.currentHorizontalPosition,c=this.state.currentVerticalPosition,l=c===m.insetTop||c===m.insetBottom,d=h===u.insetLeft||h===u.insetRight;return super.generateClassNames((0,a.A)(e,[t,h===u.left||h===u.insetLeft],[s,h===u.right||h===u.insetRight],[n,d],[i,c===m.top||c===m.insetTop],[o,c===m.bottom||c===m.insetBottom],[r,l]))}}g.displayName=`${l.k}ViewportPositioner`,g.contextType=p,g.defaultProps={horizontalPositioningMode:d.tg.uncontrolled,defaultHorizontalPosition:d.kv.uncontrolled,verticalPositioningMode:d.tg.adjacent,defaultVerticalPosition:d.Lp.bottom,horizontalAlwaysInView:!1,verticalAlwaysInView:!1,verticalLockToDefault:!1,horizontalLockToDefault:!1,fixedAfterInitialPlacement:!1,scaleToFit:!1,delayContentInstanciation:!1,managedClasses:{}},g.contextType=p;const y=g},10736:(e,t,s)=>{var i,a,o;s.d(t,{kv:()=>i,Lp:()=>a,tg:()=>o}),function(e){e.left="left",e.right="right",e.uncontrolled="uncontrolled"}(i||(i={})),function(e){e.top="top",e.bottom="bottom",e.uncontrolled="uncontrolled"}(a||(a={})),function(e){e.uncontrolled="uncontrolled",e.adjacent="adjacent",e.inset="inset"}(o||(o={}))}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var o=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,e=[],i.O=(t,s,a,o)=>{if(!s){var n=1/0;for(c=0;c<e.length;c++){for(var[s,a,o]=e[c],r=!0,h=0;h<s.length;h++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](s[h])))?s.splice(h--,1):(r=!1,o<n&&(n=o));r&&(e.splice(c--,1),t=a())}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,a,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.j=185,(()=>{var e={185:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,o,[n,r,h]=s,c=0;for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(h)var l=h(i);for(t&&t(s);c<n.length;c++)o=n[c],i.o(e,o)&&e[o]&&e[o][0](),e[n[c]]=0;return i.O(l)},s=self.webpackChunkedge_common=self.webpackChunkedge_common||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[692,197],(()=>i(53085)));a=i.O(a)})();